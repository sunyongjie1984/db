SCOTT@orcl >select * from dept;

    DEPTNO DNAME          LOC                                                                       
---------- -------------- -------------                                                             
        10 ACCOUNTING     NEW YORK                                                                  
        20 RESEARCH       DALLAS                                                                    
        30 SALES          CHICAGO                                                                   
        40 OPERATIONS     BOSTON                                                                    


执行计划
----------------------------------------------------------                                          
Plan hash value: 3383998547                                                                         
                                                                                                    
--------------------------------------------------------------------------                          
| Id  | Operation         | Name | Rows  | Bytes | Cost (%CPU)| Time     |                          
--------------------------------------------------------------------------                          
|   0 | SELECT STATEMENT  |      |     4 |    80 |     3   (0)| 00:00:01 |                          
|   1 |  TABLE ACCESS FULL| DEPT |     4 |    80 |     3   (0)| 00:00:01 |                          
--------------------------------------------------------------------------                          


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
          8  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        667  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          4  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1* select * from dept
SCOTT@orcl >quit
SCOTT@orcl >get D:\git\db\sqlOptimize\1_1_2.sql
  1  select * from emp
  2      where mgr = 7902
  3  select count( * ) from emp;
  4  select count( distinct mgr ) from emp;
  5  -- the following statement can not run in file
  6  -- I have to copy and paste this line in sqlplus window to run them
  7  exec dbms_stats.gather_table_stats(ownname => 'SCOTT', tabname => 'EMP', estimate_percent => 100,
  8      cascade => true, method_opt =>'for all columns size 1', no_invalidate ->false);
  9  --1.1.2.3
 10  -- create t1 and t2
 11  create table t1( c1 number, c2 varchar2( 10 ) );
 12* create table t2( c1 number, c2 varchar2( 10 ) );
 13  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  create table t1( c1 number, c2 varchar2( 10 ) );
  2* create table t2( c1 number, c2 varchar2( 10 ) );
SCOTT@orcl >/
create table t1( c1 number, c2 varchar2( 10 ) );
                                               *
第 1 行出现错误: 
ORA-00911: 无效字符 


SCOTT@orcl >ed
已写入 file afiedt.buf

  1* create table t1( c1 number, c2 varchar2( 10 ) )
SCOTT@orcl >/

表已创建。

SCOTT@orcl >
SCOTT@orcl >get D:\git\db\sqlOptimize\1_1_2.sql
  1  select * from emp
  2      where mgr = 7902
  3  select count( * ) from emp;
  4  select count( distinct mgr ) from emp;
  5  -- the following statement can not run in file
  6  -- I have to copy and paste this line in sqlplus window to run them
  7  exec dbms_stats.gather_table_stats(ownname => 'SCOTT', tabname => 'EMP', estimate_percent => 100,
  8      cascade => true, method_opt =>'for all columns size 1', no_invalidate ->false);
  9  --1.1.2.3
 10  -- create t1 and t2
 11  create table t1( c1 number, c2 varchar2( 10 ) );
 12* create table t2( c1 number, c2 varchar2( 10 ) );
 13  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1* create table t2( c1 number, c2 varchar2( 10 ) )
SCOTT@orcl >/

表已创建。

SCOTT@orcl >get D:\git\db\sqlOptimize\1_1_2.sql
  1  select * from emp
  2      where mgr = 7902
  3  select count( * ) from emp;
  4  select count( distinct mgr ) from emp;
  5  -- the following statement can not run in file
  6  -- I have to copy and paste this line in sqlplus window to run them
  7  exec dbms_stats.gather_table_stats(ownname => 'SCOTT', tabname => 'EMP', estimate_percent => 100,
  8      cascade => true, method_opt =>'for all columns size 1', no_invalidate ->false);
  9  --1.1.2.3
 10  -- create t1 and t2
 11  create table t1( c1 number, c2 varchar2( 10 ) );
 12  create table t2( c1 number, c2 varchar2( 10 ) );
 13  -- create index
 14* create index idx_t2 on t2( c1 );
 15  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1* create index idx_t2 on t2( c1 )
SCOTT@orcl >/

索引已创建。

SCOTT@orcl >insert into t1 values(10, "haha");
insert into t1 values(10, "haha")
                          *
第 1 行出现错误: 
ORA-00984: 列在此处不允许 


SCOTT@orcl >desc t1
 名称                                                  是否为空? 类型
 ----------------------------------------------------- -------- ------------------------------------
 C1                                                             NUMBER
 C2                                                             VARCHAR2(10)

SCOTT@orcl >
SCOTT@orcl >insert into t1 values(10, 'haha');

已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T1   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
        866  recursive calls                                                                        
         56  db block gets                                                                          
        227  consistent gets                                                                        
          2  physical reads                                                                         
       6184  redo size                                                                              
        915  bytes sent via SQL*Net to client                                                       
        997  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
         13  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >select * from t1
  2  
SCOTT@orcl >/

        C1 C2                                                                                       
---------- ----------                                                                               
        10 haha                                                                                     


执行计划
----------------------------------------------------------                                          
Plan hash value: 3617692013                                                                         
                                                                                                    
--------------------------------------------------------------------------                          
| Id  | Operation         | Name | Rows  | Bytes | Cost (%CPU)| Time     |                          
--------------------------------------------------------------------------                          
|   0 | SELECT STATEMENT  |      |     1 |    20 |     3   (0)| 00:00:01 |                          
|   1 |  TABLE ACCESS FULL| T1   |     1 |    20 |     3   (0)| 00:00:01 |                          
--------------------------------------------------------------------------                          
                                                                                                    
Note                                                                                                
-----                                                                                               
   - dynamic sampling used for this statement (level=2)                                             


统计信息
----------------------------------------------------------                                          
         48  recursive calls                                                                        
          0  db block gets                                                                          
         19  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        482  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >get D:\git\db\sqlOptimize\1_1_2.sql
  1  select * from emp
  2      where mgr = 7902
  3  select count( * ) from emp;
  4  select count( distinct mgr ) from emp;
  5  -- the following statement can not run in file
  6  -- I have to copy and paste this line in sqlplus window to run them
  7  exec dbms_stats.gather_table_stats(ownname => 'SCOTT', tabname => 'EMP', estimate_percent => 100,
  8      cascade => true, method_opt =>'for all columns size 1', no_invalidate ->false);
  9  --1.1.2.3
 10  -- create t1 and t2
 11  create table t1( c1 number, c2 varchar2( 10 ) );
 12  create table t2( c1 number, c2 varchar2( 10 ) );
 13  -- create index
 14  create index idx_t2 on t2( c1 );
 15  -- add some data
 16  insert into t1 values( 40, 'haha' );
 17  insert into t1 values( 14, 'ha8ha' );
 18  insert into t1 values( 13, 'ha8ha' );
 19  insert into t1 values( 12, 'haha' );
 20  insert into t2 values( 11, 'haha' );
 21  insert into t2 values( 30, 'haha' );
 22  insert into t2 values( 40, 'haha' );
 23  insert into t2 values( 50, 'haha' );
 24  insert into t2 values( 60, 'haha' );
 25* insert into t2 values( 70, 'haha' );
 26  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  insert into t1 values( 40, 'haha' );
  2  insert into t1 values( 14, 'ha8ha' );
  3  insert into t1 values( 13, 'ha8ha' );
  4  insert into t1 values( 12, 'haha' );
  5  insert into t2 values( 11, 'haha' );
  6  insert into t2 values( 30, 'haha' );
  7  insert into t2 values( 40, 'haha' );
  8  insert into t2 values( 50, 'haha' );
  9  insert into t2 values( 60, 'haha' );
 10* insert into t2 values( 70, 'haha' );
SCOTT@orcl >/
insert into t1 values( 40, 'haha' );
                                   *
第 1 行出现错误: 
ORA-00911: 无效字符 


SCOTT@orcl >ed
已写入 file afiedt.buf

  1  insert into t1 values( 40, 'haha' );
  2  insert into t1 values( 14, 'ha8ha' );
  3  insert into t1 values( 13, 'ha8ha' );
  4  insert into t1 values( 12, 'haha' );
  5  insert into t2 values( 11, 'haha' );
  6  insert into t2 values( 30, 'haha' );
  7  insert into t2 values( 40, 'haha' );
  8  insert into t2 values( 50, 'haha' );
  9  insert into t2 values( 60, 'haha' );
 10* insert into t2 values( 70, 'haha' );
SCOTT@orcl >insert into t1 values( 40, 'haha' );

已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T1   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          3  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        288  redo size                                                                              
        916  bytes sent via SQL*Net to client                                                       
        999  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >insert into t1 values( 14, 'ha8ha' );

已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T1   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          3  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        248  redo size                                                                              
        916  bytes sent via SQL*Net to client                                                       
       1000  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >insert into t1 values( 13, 'ha8ha' );

已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T1   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          3  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        248  redo size                                                                              
        916  bytes sent via SQL*Net to client                                                       
       1000  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >insert into t1 values( 12, 'haha' );

已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T1   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          3  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        244  redo size                                                                              
        916  bytes sent via SQL*Net to client                                                       
        999  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >insert into t2 values( 11, 'haha' );

已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T2   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          5  db block gets                                                                          
          2  consistent gets                                                                        
          0  physical reads                                                                         
        456  redo size                                                                              
        917  bytes sent via SQL*Net to client                                                       
        999  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >insert into t2 values( 30, 'haha' );

已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T2   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          5  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        456  redo size                                                                              
        917  bytes sent via SQL*Net to client                                                       
        999  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >insert into t2 values( 40, 'haha' );

已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T2   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          5  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        456  redo size                                                                              
        917  bytes sent via SQL*Net to client                                                       
        999  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >insert into t2 values( 50, 'haha' );

已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T2   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          5  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        456  redo size                                                                              
        917  bytes sent via SQL*Net to client                                                       
        999  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >insert into t2 values( 60, 'haha' );

已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T2   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          5  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        500  redo size                                                                              
        917  bytes sent via SQL*Net to client                                                       
        999  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >insert into t2 values( 70, 'haha' );

已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T2   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          5  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        456  redo size                                                                              
        917  bytes sent via SQL*Net to client                                                       
        999  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >desc t1
 名称                                                  是否为空? 类型
 ----------------------------------------------------- -------- ------------------------------------
 C1                                                             NUMBER
 C2                                                             VARCHAR2(10)

SCOTT@orcl >select count( * ) from t1;

  COUNT(*)                                                                                          
----------                                                                                          
         5                                                                                          


执行计划
----------------------------------------------------------                                          
Plan hash value: 3724264953                                                                         
                                                                                                    
-------------------------------------------------------------------                                 
| Id  | Operation          | Name | Rows  | Cost (%CPU)| Time     |                                 
-------------------------------------------------------------------                                 
|   0 | SELECT STATEMENT   |      |     1 |     3   (0)| 00:00:01 |                                 
|   1 |  SORT AGGREGATE    |      |     1 |            |          |                                 
|   2 |   TABLE ACCESS FULL| T1   |     5 |     3   (0)| 00:00:01 |                                 
-------------------------------------------------------------------                                 
                                                                                                    
Note                                                                                                
-----                                                                                               
   - dynamic sampling used for this statement (level=2)                                             


统计信息
----------------------------------------------------------                                          
          4  recursive calls                                                                        
          0  db block gets                                                                          
         25  consistent gets                                                                        
          0  physical reads                                                                         
        172  redo size                                                                              
        423  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >insert into t1 values( 40, 'haha' );

已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T1   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          3  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        288  redo size                                                                              
        916  bytes sent via SQL*Net to client                                                       
        999  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >insert into t1 values( 14, 'ha8ha' );

已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T1   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          3  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        248  redo size                                                                              
        917  bytes sent via SQL*Net to client                                                       
       1000  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >insert into t1 values( 13, 'ha8ha' );

已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T1   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          3  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        248  redo size                                                                              
        917  bytes sent via SQL*Net to client                                                       
       1000  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >insert into t1 values( 12, 'haha' );

已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T1   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          3  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        244  redo size                                                                              
        917  bytes sent via SQL*Net to client                                                       
        999  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >insert into t2 values( 11, 'haha' );

已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T2   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          5  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        456  redo size                                                                              
        917  bytes sent via SQL*Net to client                                                       
        999  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >insert into t2 values( 30, 'haha' );

已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T2   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          5  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        456  redo size                                                                              
        917  bytes sent via SQL*Net to client                                                       
        999  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >insert into t2 values( 40, 'haha' );

已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T2   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          5  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        456  redo size                                                                              
        917  bytes sent via SQL*Net to client                                                       
        999  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >insert into t2 values( 50, 'haha' );

已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T2   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          5  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        456  redo size                                                                              
        916  bytes sent via SQL*Net to client                                                       
        999  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >insert into t2 values( 60, 'haha' );

已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T2   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          5  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        456  redo size                                                                              
        917  bytes sent via SQL*Net to client                                                       
        999  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >insert into t2 values( 70, 'haha' );

已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T2   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          5  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        456  redo size                                                                              
        917  bytes sent via SQL*Net to client                                                       
        999  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >commit;

提交完成。

SCOTT@orcl >select count( * ) from t1;

  COUNT(*)                                                                                          
----------                                                                                          
         9                                                                                          


执行计划
----------------------------------------------------------                                          
Plan hash value: 3724264953                                                                         
                                                                                                    
-------------------------------------------------------------------                                 
| Id  | Operation          | Name | Rows  | Cost (%CPU)| Time     |                                 
-------------------------------------------------------------------                                 
|   0 | SELECT STATEMENT   |      |     1 |     3   (0)| 00:00:01 |                                 
|   1 |  SORT AGGREGATE    |      |     1 |            |          |                                 
|   2 |   TABLE ACCESS FULL| T1   |     9 |     3   (0)| 00:00:01 |                                 
-------------------------------------------------------------------                                 
                                                                                                    
Note                                                                                                
-----                                                                                               
   - dynamic sampling used for this statement (level=2)                                             


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
         12  consistent gets                                                                        
          0  physical reads                                                                         
        108  redo size                                                                              
        423  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >insert into t1 values( 40, 'haha' );

已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T1   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          3  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        288  redo size                                                                              
        917  bytes sent via SQL*Net to client                                                       
        999  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >insert into t1 values( 14, 'ha8ha' );

已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T1   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          3  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        248  redo size                                                                              
        917  bytes sent via SQL*Net to client                                                       
       1000  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >insert into t1 values( 13, 'ha8ha' );

已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T1   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          3  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        248  redo size                                                                              
        917  bytes sent via SQL*Net to client                                                       
       1000  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >insert into t1 values( 12, 'haha' );

已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T1   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          3  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        244  redo size                                                                              
        917  bytes sent via SQL*Net to client                                                       
        999  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >insert into t2 values( 11, 'haha' );

已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T2   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          5  db block gets                                                                          
          2  consistent gets                                                                        
          0  physical reads                                                                         
        520  redo size                                                                              
        917  bytes sent via SQL*Net to client                                                       
        999  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >insert into t2 values( 30, 'haha' );

已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T2   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          5  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        456  redo size                                                                              
        917  bytes sent via SQL*Net to client                                                       
        999  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >insert into t2 values( 40, 'haha' );

已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T2   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          5  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        456  redo size                                                                              
        917  bytes sent via SQL*Net to client                                                       
        999  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >insert into t2 values( 50, 'haha' );

已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T2   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          5  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        456  redo size                                                                              
        917  bytes sent via SQL*Net to client                                                       
        999  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >insert into t2 values( 60, 'haha' );

已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T2   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          5  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        456  redo size                                                                              
        917  bytes sent via SQL*Net to client                                                       
        999  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >insert into t2 values( 70, 'haha' );

已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T2   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          5  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        456  redo size                                                                              
        917  bytes sent via SQL*Net to client                                                       
        999  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >select count( * ) from t1;

  COUNT(*)                                                                                          
----------                                                                                          
        13                                                                                          


执行计划
----------------------------------------------------------                                          
Plan hash value: 3724264953                                                                         
                                                                                                    
-------------------------------------------------------------------                                 
| Id  | Operation          | Name | Rows  | Cost (%CPU)| Time     |                                 
-------------------------------------------------------------------                                 
|   0 | SELECT STATEMENT   |      |     1 |     3   (0)| 00:00:01 |                                 
|   1 |  SORT AGGREGATE    |      |     1 |            |          |                                 
|   2 |   TABLE ACCESS FULL| T1   |    13 |     3   (0)| 00:00:01 |                                 
-------------------------------------------------------------------                                 
                                                                                                    
Note                                                                                                
-----                                                                                               
   - dynamic sampling used for this statement (level=2)                                             


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
         12  consistent gets                                                                        
          0  physical reads                                                                         
        108  redo size                                                                              
        423  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >select * from t1;

        C1 C2                                                                                       
---------- ----------                                                                               
        10 haha                                                                                     
        40 haha                                                                                     
        14 ha8ha                                                                                    
        13 ha8ha                                                                                    
        12 haha                                                                                     
        40 haha                                                                                     
        14 ha8ha                                                                                    
        13 ha8ha                                                                                    
        12 haha                                                                                     
        40 haha                                                                                     
        14 ha8ha                                                                                    

        C1 C2                                                                                       
---------- ----------                                                                               
        13 ha8ha                                                                                    
        12 haha                                                                                     

已选择13行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 3617692013                                                                         
                                                                                                    
--------------------------------------------------------------------------                          
| Id  | Operation         | Name | Rows  | Bytes | Cost (%CPU)| Time     |                          
--------------------------------------------------------------------------                          
|   0 | SELECT STATEMENT  |      |    13 |   260 |     3   (0)| 00:00:01 |                          
|   1 |  TABLE ACCESS FULL| T1   |    13 |   260 |     3   (0)| 00:00:01 |                          
--------------------------------------------------------------------------                          
                                                                                                    
Note                                                                                                
-----                                                                                               
   - dynamic sampling used for this statement (level=2)                                             


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
         13  consistent gets                                                                        
          0  physical reads                                                                         
        108  redo size                                                                              
        678  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         13  rows processed                                                                         

SCOTT@orcl >
SCOTT@orcl >select * from t2;

        C1 C2                                                                                       
---------- ----------                                                                               
        11 haha                                                                                     
        30 haha                                                                                     
        40 haha                                                                                     
        50 haha                                                                                     
        60 haha                                                                                     
        70 haha                                                                                     
        11 haha                                                                                     
        30 haha                                                                                     
        40 haha                                                                                     
        50 haha                                                                                     
        60 haha                                                                                     

        C1 C2                                                                                       
---------- ----------                                                                               
        70 haha                                                                                     
        11 haha                                                                                     
        30 haha                                                                                     
        40 haha                                                                                     
        50 haha                                                                                     
        60 haha                                                                                     
        70 haha                                                                                     

已选择18行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 1513984157                                                                         
                                                                                                    
--------------------------------------------------------------------------                          
| Id  | Operation         | Name | Rows  | Bytes | Cost (%CPU)| Time     |                          
--------------------------------------------------------------------------                          
|   0 | SELECT STATEMENT  |      |    18 |   360 |     3   (0)| 00:00:01 |                          
|   1 |  TABLE ACCESS FULL| T2   |    18 |   360 |     3   (0)| 00:00:01 |                          
--------------------------------------------------------------------------                          
                                                                                                    
Note                                                                                                
-----                                                                                               
   - dynamic sampling used for this statement (level=2)                                             


统计信息
----------------------------------------------------------                                          
         28  recursive calls                                                                        
          0  db block gets                                                                          
         35  consistent gets                                                                        
          0  physical reads                                                                         
        172  redo size                                                                              
        867  bytes sent via SQL*Net to client                                                       
        426  bytes received via SQL*Net from client                                                 
          3  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         18  rows processed                                                                         

SCOTT@orcl >quit
SCOTT@orcl >show user
USER 为 "SCOTT"
SCOTT@orcl >get D:\git\db\sqlOptimize\1_1_2.sql
  1  select * from emp
  2      where mgr = 7902
  3  select count( * ) from emp;
  4  select count( distinct mgr ) from emp;
  5  -- the following statement can not run in file
  6  -- I have to copy and paste this line in sqlplus window to run them
  7  exec dbms_stats.gather_table_stats(ownname => 'SCOTT', tabname => 'EMP', estimate_percent => 100,
  8      cascade => true, method_opt =>'for all columns size 1', no_invalidate ->false);
  9  --1.1.2.3
 10  -- create t1 and t2
 11  create table t1( c1 number, c2 varchar2( 10 ) );
 12  create table t2( c1 number, c2 varchar2( 10 ) );
 13  -- create index
 14  create index idx_t2 on t2( c1 );
 15  -- add some data
 16  insert into t1 values( 40, 'haha' );
 17  insert into t1 values( 14, 'ha8ha' );
 18  insert into t1 values( 13, 'ha8ha' );
 19  insert into t1 values( 12, 'haha' );
 20  insert into t2 values( 11, 'haha' );
 21  insert into t2 values( 30, 'haha' );
 22  insert into t2 values( 40, 'haha' );
 23  insert into t2 values( 50, 'haha' );
 24  insert into t2 values( 60, 'haha' );
 25  insert into t2 values( 70, 'haha' );
 26  -- select
 27  select t1.c1, t2.c2 from t1, t2
 28* 	where t1.c1 = t2.c1 and t.c1 = 10;
 29  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.c1, t2.c2 from t1, t2
  2* 	where t1.c1 = t2.c1 and t.c1 = 10
SCOTT@orcl >/
	where t1.c1 = t2.c1 and t.c1 = 10
	                        *
第 2 行出现错误: 
ORA-00904: "T"."C1": 标识符无效 


SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.c1, t2.c2 from t1, t2
  2* 	where t1.c1 = t2.c1 and t1.c1 = 10
SCOTT@orcl >/

未选定行


执行计划
----------------------------------------------------------                                          
Plan hash value: 2918692618                                                                         
                                                                                                    
----------------------------------------------------------------------------------------            
| Id  | Operation                     | Name   | Rows  | Bytes | Cost (%CPU)| Time     |            
----------------------------------------------------------------------------------------            
|   0 | SELECT STATEMENT              |        |     1 |    33 |     3   (0)| 00:00:01 |            
|   1 |  MERGE JOIN CARTESIAN         |        |     1 |    33 |     3   (0)| 00:00:01 |            
|*  2 |   TABLE ACCESS FULL           | T1     |     1 |    13 |     3   (0)| 00:00:01 |            
|   3 |   BUFFER SORT                 |        |     1 |    20 |     0   (0)| 00:00:01 |            
|   4 |    TABLE ACCESS BY INDEX ROWID| T2     |     1 |    20 |     0   (0)| 00:00:01 |            
|*  5 |     INDEX RANGE SCAN          | IDX_T2 |     1 |       |     0   (0)| 00:00:01 |            
----------------------------------------------------------------------------------------            
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   2 - filter("T1"."C1"=10)                                                                         
   5 - access("T2"."C1"=10)                                                                         
                                                                                                    
Note                                                                                                
-----                                                                                               
   - dynamic sampling used for this statement (level=2)                                             


统计信息
----------------------------------------------------------                                          
         13  recursive calls                                                                        
          0  db block gets                                                                          
         60  consistent gets                                                                        
          0  physical reads                                                                         
        372  redo size                                                                              
        339  bytes sent via SQL*Net to client                                                       
        404  bytes received via SQL*Net from client                                                 
          1  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          0  rows processed                                                                         

SCOTT@orcl >get D:\git\db\sqlOptimize\1_1_2.sql
  1  select * from emp
  2      where mgr = 7902
  3  select count( * ) from emp;
  4  select count( distinct mgr ) from emp;
  5  -- the following statement can not run in file
  6  -- I have to copy and paste this line in sqlplus window to run them
  7  exec dbms_stats.gather_table_stats(ownname => 'SCOTT', tabname => 'EMP', estimate_percent => 100,
  8      cascade => true, method_opt =>'for all columns size 1', no_invalidate ->false);
  9  --1.1.2.3
 10  -- create t1 and t2
 11  create table t1( c1 number, c2 varchar2( 10 ) );
 12  create table t2( c1 number, c2 varchar2( 10 ) );
 13  -- create index
 14  create index idx_t2 on t2( c1 );
 15  -- add some data
 16  insert into t1 values( 40, 'haha' );
 17  insert into t1 values( 14, 'ha8ha' );
 18  insert into t1 values( 13, 'ha8ha' );
 19  insert into t1 values( 12, 'haha' );
 20  insert into t2 values( 11, 'haha' );
 21  insert into t2 values( 30, 'haha' );
 22  insert into t2 values( 40, 'haha' );
 23  insert into t2 values( 50, 'haha' );
 24  insert into t2 values( 60, 'haha' );
 25  insert into t2 values( 70, 'haha' );
 26  -- select
 27  select t1.c1, t2.c2 from t1, t2
 28  	where t1.c1 = t2.c1 and t1.c1 = 10;
 29  select t1.c1, t2.c2 from t1, t2
 30* 	where t1.c1 = t2.c1 and t1.c1 = 10 and t2.c1 = 10
 31  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.c1, t2.c2 from t1, t2
  2* 	where t1.c1 = t2.c1 and t1.c1 = 10 and t2.c1 = 10
SCOTT@orcl >/

未选定行


执行计划
----------------------------------------------------------                                          
Plan hash value: 1054738919                                                                         
                                                                                                    
---------------------------------------------------------------------------------------             
| Id  | Operation                    | Name   | Rows  | Bytes | Cost (%CPU)| Time     |             
---------------------------------------------------------------------------------------             
|   0 | SELECT STATEMENT             |        |     1 |    33 |     3   (0)| 00:00:01 |             
|   1 |  NESTED LOOPS                |        |       |       |            |          |             
|   2 |   NESTED LOOPS               |        |     1 |    33 |     3   (0)| 00:00:01 |             
|*  3 |    TABLE ACCESS FULL         | T1     |     1 |    13 |     3   (0)| 00:00:01 |             
|*  4 |    INDEX RANGE SCAN          | IDX_T2 |     1 |       |     0   (0)| 00:00:01 |             
|   5 |   TABLE ACCESS BY INDEX ROWID| T2     |     1 |    20 |     0   (0)| 00:00:01 |             
---------------------------------------------------------------------------------------             
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   3 - filter("T1"."C1"=10)                                                                         
   4 - access("T2"."C1"=10)                                                                         
       filter("T1"."C1"="T2"."C1")                                                                  
                                                                                                    
Note                                                                                                
-----                                                                                               
   - dynamic sampling used for this statement (level=2)                                             


统计信息
----------------------------------------------------------                                          
         10  recursive calls                                                                        
          0  db block gets                                                                          
         60  consistent gets                                                                        
          0  physical reads                                                                         
        364  redo size                                                                              
        339  bytes sent via SQL*Net to client                                                       
        404  bytes received via SQL*Net from client                                                 
          1  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          0  rows processed                                                                         

SCOTT@orcl >/

未选定行


执行计划
----------------------------------------------------------                                          
Plan hash value: 1054738919                                                                         
                                                                                                    
---------------------------------------------------------------------------------------             
| Id  | Operation                    | Name   | Rows  | Bytes | Cost (%CPU)| Time     |             
---------------------------------------------------------------------------------------             
|   0 | SELECT STATEMENT             |        |     1 |    11 |     4   (0)| 00:00:01 |             
|   1 |  NESTED LOOPS                |        |       |       |            |          |             
|   2 |   NESTED LOOPS               |        |     1 |    11 |     4   (0)| 00:00:01 |             
|*  3 |    TABLE ACCESS FULL         | T1     |     1 |     3 |     3   (0)| 00:00:01 |             
|*  4 |    INDEX RANGE SCAN          | IDX_T2 |     1 |       |     0   (0)| 00:00:01 |             
|   5 |   TABLE ACCESS BY INDEX ROWID| T2     |     1 |     8 |     1   (0)| 00:00:01 |             
---------------------------------------------------------------------------------------             
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   3 - filter("T1"."C1"=10)                                                                         
   4 - access("T2"."C1"=10)                                                                         
       filter("T1"."C1"="T2"."C1")                                                                  


统计信息
----------------------------------------------------------                                          
        485  recursive calls                                                                        
          0  db block gets                                                                          
         87  consistent gets                                                                        
          1  physical reads                                                                         
        172  redo size                                                                              
        339  bytes sent via SQL*Net to client                                                       
        404  bytes received via SQL*Net from client                                                 
          1  SQL*Net roundtrips to/from client                                                      
         12  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          0  rows processed                                                                         

SCOTT@orcl >
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.c1, t2.c2 from t1, t2
  2* 	where t1.c1 = t2.c1 and t1.c1 = 10 and t2.c1 = 10
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.c1, t2.c2 from t1, t2
  2* 	where t1.c1 = t2.c1 and t1.c1 = 10 and t2.c1 = 10
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.c1, t2.c2 from t1, t2
  2* 	where t1.c1 = t2.c1 and t1.c1 = 10 and t2.c1 = 10
SCOTT@orcl >/

未选定行


执行计划
----------------------------------------------------------                                          
Plan hash value: 1054738919                                                                         
                                                                                                    
---------------------------------------------------------------------------------------             
| Id  | Operation                    | Name   | Rows  | Bytes | Cost (%CPU)| Time     |             
---------------------------------------------------------------------------------------             
|   0 | SELECT STATEMENT             |        |     1 |    11 |     4   (0)| 00:00:01 |             
|   1 |  NESTED LOOPS                |        |       |       |            |          |             
|   2 |   NESTED LOOPS               |        |     1 |    11 |     4   (0)| 00:00:01 |             
|*  3 |    TABLE ACCESS FULL         | T1     |     1 |     3 |     3   (0)| 00:00:01 |             
|*  4 |    INDEX RANGE SCAN          | IDX_T2 |     1 |       |     0   (0)| 00:00:01 |             
|   5 |   TABLE ACCESS BY INDEX ROWID| T2     |     1 |     8 |     1   (0)| 00:00:01 |             
---------------------------------------------------------------------------------------             
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   3 - filter("T1"."C1"=10)                                                                         
   4 - access("T2"."C1"=10)                                                                         
       filter("T1"."C1"="T2"."C1")                                                                  


统计信息
----------------------------------------------------------                                          
        248  recursive calls                                                                        
          0  db block gets                                                                          
         55  consistent gets                                                                        
          2  physical reads                                                                         
        172  redo size                                                                              
        339  bytes sent via SQL*Net to client                                                       
        404  bytes received via SQL*Net from client                                                 
          1  SQL*Net roundtrips to/from client                                                      
         10  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          0  rows processed                                                                         

SCOTT@orcl >
SCOTT@orcl >
SCOTT@orcl >/

未选定行


执行计划
----------------------------------------------------------                                          
Plan hash value: 1054738919                                                                         
                                                                                                    
---------------------------------------------------------------------------------------             
| Id  | Operation                    | Name   | Rows  | Bytes | Cost (%CPU)| Time     |             
---------------------------------------------------------------------------------------             
|   0 | SELECT STATEMENT             |        |     1 |    11 |     4   (0)| 00:00:01 |             
|   1 |  NESTED LOOPS                |        |       |       |            |          |             
|   2 |   NESTED LOOPS               |        |     1 |    11 |     4   (0)| 00:00:01 |             
|*  3 |    TABLE ACCESS FULL         | T1     |     1 |     3 |     3   (0)| 00:00:01 |             
|*  4 |    INDEX RANGE SCAN          | IDX_T2 |     1 |       |     0   (0)| 00:00:01 |             
|   5 |   TABLE ACCESS BY INDEX ROWID| T2     |     1 |     8 |     1   (0)| 00:00:01 |             
---------------------------------------------------------------------------------------             
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   3 - filter("T1"."C1"=10)                                                                         
   4 - access("T2"."C1"=10)                                                                         
       filter("T1"."C1"="T2"."C1")                                                                  


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
         21  consistent gets                                                                        
          0  physical reads                                                                         
        172  redo size                                                                              
        339  bytes sent via SQL*Net to client                                                       
        404  bytes received via SQL*Net from client                                                 
          1  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          0  rows processed                                                                         

SCOTT@orcl >desc t1
 名称                                                  是否为空? 类型
 ----------------------------------------------------- -------- ------------------------------------
 C1                                                             NUMBER
 C2                                                             VARCHAR2(10)

SCOTT@orcl >@D:\git\db\sqlOptimize\1_2_4.sql
create table t1( col1 number, col2 varchar2( 1 ) )
             *
第 1 行出现错误: 
ORA-00955: 名称已由现有对象使用 


create table t2( col2 varchar2( 1 ), col3 varchar2( 2 ) )
             *
第 1 行出现错误: 
ORA-00955: 名称已由现有对象使用 



已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |     8 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T1   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
        194  recursive calls                                                                        
          5  db block gets                                                                          
         27  consistent gets                                                                        
          3  physical reads                                                                         
          0  redo size                                                                              
        916  bytes sent via SQL*Net to client                                                       
        995  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          6  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         


已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |     8 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T1   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          3  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        244  redo size                                                                              
        918  bytes sent via SQL*Net to client                                                       
        995  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         


已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |     8 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T1   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          3  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        244  redo size                                                                              
        918  bytes sent via SQL*Net to client                                                       
        995  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

insert into t2 values( 'A', 'A2' )
                       *
第 1 行出现错误: 
ORA-01722: 无效数字 


insert into t2 values( 'B', 'B2' )
                       *
第 1 行出现错误: 
ORA-01722: 无效数字 


insert into t2 values( 'D', 'D2' )
                       *
第 1 行出现错误: 
ORA-01722: 无效数字 


SCOTT@orcl >@D:\git\db\sqlOptimize\1_2_4.sql
create table t1( col1 number, col2 varchar2( 1 ) )
             *
第 1 行出现错误: 
ORA-00955: 名称已由现有对象使用 


create table t2( col2 varchar2( 1 ), col3 varchar2( 2 ) )
             *
第 1 行出现错误: 
ORA-00955: 名称已由现有对象使用 



已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |     8 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T1   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
         42  recursive calls                                                                        
          5  db block gets                                                                          
          5  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        919  bytes sent via SQL*Net to client                                                       
        995  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         


已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |     8 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T1   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          3  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        244  redo size                                                                              
        918  bytes sent via SQL*Net to client                                                       
        995  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         


已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |     8 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T1   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          3  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        244  redo size                                                                              
        919  bytes sent via SQL*Net to client                                                       
        995  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

insert into t2 values( 'A', 'A2' )
                       *
第 1 行出现错误: 
ORA-01722: 无效数字 


insert into t2 values( 'B', 'B2' )
                       *
第 1 行出现错误: 
ORA-01722: 无效数字 


insert into t2 values( 'D', 'D2' )
                       *
第 1 行出现错误: 
ORA-01722: 无效数字 


SCOTT@orcl >
SCOTT@orcl >ed
SP2-0107: 无须保存。
SCOTT@orcl >get D:\git\db\sqlOptimize\1_2_4.sql
  1  create table t1( col1 number, col2 varchar2( 1 ) );
  2  create table t2( col2 varchar2( 1 ), col3 varchar2( 2 ) );
  3  insert into t1 values( 1, 'A' );
  4  insert into t1 values( 2, 'B' );
  5  insert into t1 values( 3, 'C' );
  6  insert into t2 values( 'A', 'A2' );
  7  insert into t2 values( 'B', 'B2' );
  8* insert into t2 values( 'D', 'D2' );
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  create table t1( col1 number, col2 varchar2( 1 ) );
  2  create table t2( col2 varchar2( 1 ), col3 varchar2( 2 ) );
  3  insert into t1 values( 1, 'A' );
  4  insert into t1 values( 2, 'B' );
  5  insert into t1 values( 3, 'C' );
  6  insert into t2 values( 'A', 'A2' );
  7  insert into t2 values( 'B', 'B2' );
  8* insert into t2 values( 'D', 'D2' );
SCOTT@orcl >/
create table t1( col1 number, col2 varchar2( 1 ) );
                                                  *
第 1 行出现错误: 
ORA-00911: 无效字符 


SCOTT@orcl >@D:\git\db\sqlOptimize\1_2_4.sql
create table t1( col1 number, col2 varchar2( 1 ) )
             *
第 1 行出现错误: 
ORA-00955: 名称已由现有对象使用 


create table t2( col2 varchar2( 1 ), col3 varchar2( 2 ) )
             *
第 1 行出现错误: 
ORA-00955: 名称已由现有对象使用 



已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |     8 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T1   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          5  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        911  bytes sent via SQL*Net to client                                                       
        995  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         


已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |     8 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T1   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          3  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        244  redo size                                                                              
        913  bytes sent via SQL*Net to client                                                       
        995  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         


已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |     8 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T1   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          3  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        244  redo size                                                                              
        914  bytes sent via SQL*Net to client                                                       
        995  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

insert into t2 values( 'A', 'A2' )
                       *
第 1 行出现错误: 
ORA-01722: 无效数字 


insert into t2 values( 'B', 'B2' )
                       *
第 1 行出现错误: 
ORA-01722: 无效数字 


insert into t2 values( 'D', 'D2' )
                       *
第 1 行出现错误: 
ORA-01722: 无效数字 


SCOTT@orcl >drop t1;drop t2;
drop t1;drop t2
     *
第 1 行出现错误: 
ORA-00950: 无效 DROP 选项 


SCOTT@orcl >drop t1;
drop t1
     *
第 1 行出现错误: 
ORA-00950: 无效 DROP 选项 


SCOTT@orcl >drop table t1, t2;
drop table t1, t2
             *
第 1 行出现错误: 
ORA-00933: SQL 命令未正确结束 


SCOTT@orcl >drop table t1;
drop table t1
           *
第 1 行出现错误: 
ORA-00054: 资源正忙, 但指定以 NOWAIT 方式获取资源, 或者超时失效 


SCOTT@orcl >desc t1;
 名称                                                  是否为空? 类型
 ----------------------------------------------------- -------- ------------------------------------
 C1                                                             NUMBER
 C2                                                             VARCHAR2(10)

SCOTT@orcl >drop table t1
  2  /
drop table t1
           *
第 1 行出现错误: 
ORA-00054: 资源正忙, 但指定以 NOWAIT 方式获取资源, 或者超时失效 


SCOTT@orcl >show user
USER 为 "SCOTT"
SCOTT@orcl >select * from t1
  2  /

        C1 C2                                                                                       
---------- ----------                                                                               
        10 haha                                                                                     
        40 haha                                                                                     
        14 ha8ha                                                                                    
        13 ha8ha                                                                                    
        12 haha                                                                                     
        40 haha                                                                                     
        14 ha8ha                                                                                    
        13 ha8ha                                                                                    
        12 haha                                                                                     
        40 haha                                                                                     
        14 ha8ha                                                                                    

        C1 C2                                                                                       
---------- ----------                                                                               
        13 ha8ha                                                                                    
        12 haha                                                                                     
         1 A                                                                                        
         2 B                                                                                        
         3 C                                                                                        
         1 A                                                                                        
         2 B                                                                                        
         3 C                                                                                        
         1 A                                                                                        
         2 B                                                                                        
         3 C                                                                                        

已选择22行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 3617692013                                                                         
                                                                                                    
--------------------------------------------------------------------------                          
| Id  | Operation         | Name | Rows  | Bytes | Cost (%CPU)| Time     |                          
--------------------------------------------------------------------------                          
|   0 | SELECT STATEMENT  |      |    13 |   104 |     3   (0)| 00:00:01 |                          
|   1 |  TABLE ACCESS FULL| T1   |    13 |   104 |     3   (0)| 00:00:01 |                          
--------------------------------------------------------------------------                          


统计信息
----------------------------------------------------------                                          
        223  recursive calls                                                                        
          0  db block gets                                                                          
         41  consistent gets                                                                        
          2  physical reads                                                                         
        108  redo size                                                                              
        898  bytes sent via SQL*Net to client                                                       
        426  bytes received via SQL*Net from client                                                 
          3  SQL*Net roundtrips to/from client                                                      
          5  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         22  rows processed                                                                         

SCOTT@orcl >
SCOTT@orcl >drop table t1;
drop table t1
           *
第 1 行出现错误: 
ORA-00054: 资源正忙, 但指定以 NOWAIT 方式获取资源, 或者超时失效 


SCOTT@orcl >select session_id from v$locked_object;

SESSION_ID                                                                                          
----------                                                                                          
        34                                                                                          
        34                                                                                          


执行计划
----------------------------------------------------------                                          
Plan hash value: 4287998530                                                                         
                                                                                                    
------------------------------------------------------------------------------                      
| Id  | Operation          | Name    | Rows  | Bytes | Cost (%CPU)| Time     |                      
------------------------------------------------------------------------------                      
|   0 | SELECT STATEMENT   |         |     1 |    42 |     1 (100)| 00:00:01 |                      
|*  1 |  HASH JOIN         |         |     1 |    42 |     1 (100)| 00:00:01 |                      
|*  2 |   HASH JOIN        |         |     1 |    25 |     1 (100)| 00:00:01 |                      
|*  3 |    FIXED TABLE FULL| X$KTCXB |     1 |    21 |     0   (0)| 00:00:01 |                      
|   4 |    FIXED TABLE FULL| X$KTADM |   100 |   400 |     0   (0)| 00:00:01 |                      
|   5 |   FIXED TABLE FULL | X$KSUSE |   100 |  1700 |     0   (0)| 00:00:01 |                      
------------------------------------------------------------------------------                      
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   1 - access("X"."KTCXBSES"="S"."ADDR")                                                            
   2 - access("X"."KTCXBXBA"="L"."KSSOBOWN")                                                        
   3 - filter("X"."INST_ID"=USERENV('INSTANCE'))                                                    


统计信息
----------------------------------------------------------                                          
        352  recursive calls                                                                        
          1  db block gets                                                                          
         78  consistent gets                                                                        
          1  physical reads                                                                         
          0  redo size                                                                              
        463  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
         12  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          2  rows processed                                                                         

SCOTT@orcl >desc v$session
 名称                                                  是否为空? 类型
 ----------------------------------------------------- -------- ------------------------------------
 SADDR                                                          RAW(4)
 SID                                                            NUMBER
 SERIAL#                                                        NUMBER
 AUDSID                                                         NUMBER
 PADDR                                                          RAW(4)
 USER#                                                          NUMBER
 USERNAME                                                       VARCHAR2(30)
 COMMAND                                                        NUMBER
 OWNERID                                                        NUMBER
 TADDR                                                          VARCHAR2(8)
 LOCKWAIT                                                       VARCHAR2(8)
 STATUS                                                         VARCHAR2(8)
 SERVER                                                         VARCHAR2(9)
 SCHEMA#                                                        NUMBER
 SCHEMANAME                                                     VARCHAR2(30)
 OSUSER                                                         VARCHAR2(30)
 PROCESS                                                        VARCHAR2(24)
 MACHINE                                                        VARCHAR2(64)
 PORT                                                           NUMBER
 TERMINAL                                                       VARCHAR2(16)
 PROGRAM                                                        VARCHAR2(64)
 TYPE                                                           VARCHAR2(10)
 SQL_ADDRESS                                                    RAW(4)
 SQL_HASH_VALUE                                                 NUMBER
 SQL_ID                                                         VARCHAR2(13)
 SQL_CHILD_NUMBER                                               NUMBER
 SQL_EXEC_START                                                 DATE
 SQL_EXEC_ID                                                    NUMBER
 PREV_SQL_ADDR                                                  RAW(4)
 PREV_HASH_VALUE                                                NUMBER
 PREV_SQL_ID                                                    VARCHAR2(13)
 PREV_CHILD_NUMBER                                              NUMBER
 PREV_EXEC_START                                                DATE
 PREV_EXEC_ID                                                   NUMBER
 PLSQL_ENTRY_OBJECT_ID                                          NUMBER
 PLSQL_ENTRY_SUBPROGRAM_ID                                      NUMBER
 PLSQL_OBJECT_ID                                                NUMBER
 PLSQL_SUBPROGRAM_ID                                            NUMBER
 MODULE                                                         VARCHAR2(48)
 MODULE_HASH                                                    NUMBER
 ACTION                                                         VARCHAR2(32)
 ACTION_HASH                                                    NUMBER
 CLIENT_INFO                                                    VARCHAR2(64)
 FIXED_TABLE_SEQUENCE                                           NUMBER
 ROW_WAIT_OBJ#                                                  NUMBER
 ROW_WAIT_FILE#                                                 NUMBER
 ROW_WAIT_BLOCK#                                                NUMBER
 ROW_WAIT_ROW#                                                  NUMBER
 TOP_LEVEL_CALL#                                                NUMBER
 LOGON_TIME                                                     DATE
 LAST_CALL_ET                                                   NUMBER
 PDML_ENABLED                                                   VARCHAR2(3)
 FAILOVER_TYPE                                                  VARCHAR2(13)
 FAILOVER_METHOD                                                VARCHAR2(10)
 FAILED_OVER                                                    VARCHAR2(3)
 RESOURCE_CONSUMER_GROUP                                        VARCHAR2(32)
 PDML_STATUS                                                    VARCHAR2(8)
 PDDL_STATUS                                                    VARCHAR2(8)
 PQ_STATUS                                                      VARCHAR2(8)
 CURRENT_QUEUE_DURATION                                         NUMBER
 CLIENT_IDENTIFIER                                              VARCHAR2(64)
 BLOCKING_SESSION_STATUS                                        VARCHAR2(11)
 BLOCKING_INSTANCE                                              NUMBER
 BLOCKING_SESSION                                               NUMBER
 FINAL_BLOCKING_SESSION_STATUS                                  VARCHAR2(11)
 FINAL_BLOCKING_INSTANCE                                        NUMBER
 FINAL_BLOCKING_SESSION                                         NUMBER
 SEQ#                                                           NUMBER
 EVENT#                                                         NUMBER
 EVENT                                                          VARCHAR2(64)
 P1TEXT                                                         VARCHAR2(64)
 P1                                                             NUMBER
 P1RAW                                                          RAW(8)
 P2TEXT                                                         VARCHAR2(64)
 P2                                                             NUMBER
 P2RAW                                                          RAW(8)
 P3TEXT                                                         VARCHAR2(64)
 P3                                                             NUMBER
 P3RAW                                                          RAW(8)
 WAIT_CLASS_ID                                                  NUMBER
 WAIT_CLASS#                                                    NUMBER
 WAIT_CLASS                                                     VARCHAR2(64)
 WAIT_TIME                                                      NUMBER
 SECONDS_IN_WAIT                                                NUMBER
 STATE                                                          VARCHAR2(19)
 WAIT_TIME_MICRO                                                NUMBER
 TIME_REMAINING_MICRO                                           NUMBER
 TIME_SINCE_LAST_WAIT_MICRO                                     NUMBER
 SERVICE_NAME                                                   VARCHAR2(64)
 SQL_TRACE                                                      VARCHAR2(8)
 SQL_TRACE_WAITS                                                VARCHAR2(5)
 SQL_TRACE_BINDS                                                VARCHAR2(5)
 SQL_TRACE_PLAN_STATS                                           VARCHAR2(10)
 SESSION_EDITION_ID                                             NUMBER
 CREATOR_ADDR                                                   RAW(4)
 CREATOR_SERIAL#                                                NUMBER
 ECID                                                           VARCHAR2(64)

SCOTT@orcl >select session_idi, user from v$locked_object;
select session_idi, user from v$locked_object
       *
第 1 行出现错误: 
ORA-00904: "SESSION_IDI": 标识符无效 


SCOTT@orcl >desc v$session
 名称                                                  是否为空? 类型
 ----------------------------------------------------- -------- ------------------------------------
 SADDR                                                          RAW(4)
 SID                                                            NUMBER
 SERIAL#                                                        NUMBER
 AUDSID                                                         NUMBER
 PADDR                                                          RAW(4)
 USER#                                                          NUMBER
 USERNAME                                                       VARCHAR2(30)
 COMMAND                                                        NUMBER
 OWNERID                                                        NUMBER
 TADDR                                                          VARCHAR2(8)
 LOCKWAIT                                                       VARCHAR2(8)
 STATUS                                                         VARCHAR2(8)
 SERVER                                                         VARCHAR2(9)
 SCHEMA#                                                        NUMBER
 SCHEMANAME                                                     VARCHAR2(30)
 OSUSER                                                         VARCHAR2(30)
 PROCESS                                                        VARCHAR2(24)
 MACHINE                                                        VARCHAR2(64)
 PORT                                                           NUMBER
 TERMINAL                                                       VARCHAR2(16)
 PROGRAM                                                        VARCHAR2(64)
 TYPE                                                           VARCHAR2(10)
 SQL_ADDRESS                                                    RAW(4)
 SQL_HASH_VALUE                                                 NUMBER
 SQL_ID                                                         VARCHAR2(13)
 SQL_CHILD_NUMBER                                               NUMBER
 SQL_EXEC_START                                                 DATE
 SQL_EXEC_ID                                                    NUMBER
 PREV_SQL_ADDR                                                  RAW(4)
 PREV_HASH_VALUE                                                NUMBER
 PREV_SQL_ID                                                    VARCHAR2(13)
 PREV_CHILD_NUMBER                                              NUMBER
 PREV_EXEC_START                                                DATE
 PREV_EXEC_ID                                                   NUMBER
 PLSQL_ENTRY_OBJECT_ID                                          NUMBER
 PLSQL_ENTRY_SUBPROGRAM_ID                                      NUMBER
 PLSQL_OBJECT_ID                                                NUMBER
 PLSQL_SUBPROGRAM_ID                                            NUMBER
 MODULE                                                         VARCHAR2(48)
 MODULE_HASH                                                    NUMBER
 ACTION                                                         VARCHAR2(32)
 ACTION_HASH                                                    NUMBER
 CLIENT_INFO                                                    VARCHAR2(64)
 FIXED_TABLE_SEQUENCE                                           NUMBER
 ROW_WAIT_OBJ#                                                  NUMBER
 ROW_WAIT_FILE#                                                 NUMBER
 ROW_WAIT_BLOCK#                                                NUMBER
 ROW_WAIT_ROW#                                                  NUMBER
 TOP_LEVEL_CALL#                                                NUMBER
 LOGON_TIME                                                     DATE
 LAST_CALL_ET                                                   NUMBER
 PDML_ENABLED                                                   VARCHAR2(3)
 FAILOVER_TYPE                                                  VARCHAR2(13)
 FAILOVER_METHOD                                                VARCHAR2(10)
 FAILED_OVER                                                    VARCHAR2(3)
 RESOURCE_CONSUMER_GROUP                                        VARCHAR2(32)
 PDML_STATUS                                                    VARCHAR2(8)
 PDDL_STATUS                                                    VARCHAR2(8)
 PQ_STATUS                                                      VARCHAR2(8)
 CURRENT_QUEUE_DURATION                                         NUMBER
 CLIENT_IDENTIFIER                                              VARCHAR2(64)
 BLOCKING_SESSION_STATUS                                        VARCHAR2(11)
 BLOCKING_INSTANCE                                              NUMBER
 BLOCKING_SESSION                                               NUMBER
 FINAL_BLOCKING_SESSION_STATUS                                  VARCHAR2(11)
 FINAL_BLOCKING_INSTANCE                                        NUMBER
 FINAL_BLOCKING_SESSION                                         NUMBER
 SEQ#                                                           NUMBER
 EVENT#                                                         NUMBER
 EVENT                                                          VARCHAR2(64)
 P1TEXT                                                         VARCHAR2(64)
 P1                                                             NUMBER
 P1RAW                                                          RAW(8)
 P2TEXT                                                         VARCHAR2(64)
 P2                                                             NUMBER
 P2RAW                                                          RAW(8)
 P3TEXT                                                         VARCHAR2(64)
 P3                                                             NUMBER
 P3RAW                                                          RAW(8)
 WAIT_CLASS_ID                                                  NUMBER
 WAIT_CLASS#                                                    NUMBER
 WAIT_CLASS                                                     VARCHAR2(64)
 WAIT_TIME                                                      NUMBER
 SECONDS_IN_WAIT                                                NUMBER
 STATE                                                          VARCHAR2(19)
 WAIT_TIME_MICRO                                                NUMBER
 TIME_REMAINING_MICRO                                           NUMBER
 TIME_SINCE_LAST_WAIT_MICRO                                     NUMBER
 SERVICE_NAME                                                   VARCHAR2(64)
 SQL_TRACE                                                      VARCHAR2(8)
 SQL_TRACE_WAITS                                                VARCHAR2(5)
 SQL_TRACE_BINDS                                                VARCHAR2(5)
 SQL_TRACE_PLAN_STATS                                           VARCHAR2(10)
 SESSION_EDITION_ID                                             NUMBER
 CREATOR_ADDR                                                   RAW(4)
 CREATOR_SERIAL#                                                NUMBER
 ECID                                                           VARCHAR2(64)

SCOTT@orcl >select sid, username from v$session;

       SID USERNAME                                                                                 
---------- ------------------------------                                                           
         1                                                                                          
         2                                                                                          
         3                                                                                          
         4                                                                                          
         5                                                                                          
         6                                                                                          
         7                                                                                          
         8                                                                                          
         9                                                                                          
        10                                                                                          
        11                                                                                          

       SID USERNAME                                                                                 
---------- ------------------------------                                                           
        12                                                                                          
        13                                                                                          
        14                                                                                          
        15                                                                                          
        16                                                                                          
        19                                                                                          
        22                                                                                          
        23                                                                                          
        27 SCOTT                                                                                    
        29                                                                                          
        31 SYSMAN                                                                                   

       SID USERNAME                                                                                 
---------- ------------------------------                                                           
        32 SCOTT                                                                                    
        34 SCOTT                                                                                    
        35 DBSNMP                                                                                   
        36 DBSNMP                                                                                   
        37                                                                                          
        38 DBSNMP                                                                                   
        39 DBSNMP                                                                                   
        40                                                                                          
        41 DBSNMP                                                                                   
        42 SCOTT                                                                                    
        43 SYSMAN                                                                                   

       SID USERNAME                                                                                 
---------- ------------------------------                                                           
        44 DBSNMP                                                                                   
        45 DBSNMP                                                                                   
        47 DBSNMP                                                                                   
        61 SYSMAN                                                                                   
        62 SYSMAN                                                                                   

已选择38行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 644658511                                                                          
                                                                                                    
---------------------------------------------------------------------------------------------       
| Id  | Operation                 | Name            | Rows  | Bytes | Cost (%CPU)| Time     |       
---------------------------------------------------------------------------------------------       
|   0 | SELECT STATEMENT          |                 |     1 |   108 |     0   (0)| 00:00:01 |       
|   1 |  NESTED LOOPS             |                 |     1 |   108 |     0   (0)| 00:00:01 |       
|   2 |   NESTED LOOPS            |                 |     1 |    95 |     0   (0)| 00:00:01 |       
|*  3 |    FIXED TABLE FULL       | X$KSUSE         |     1 |    69 |     0   (0)| 00:00:01 |       
|*  4 |    FIXED TABLE FIXED INDEX| X$KSLWT (ind:1) |     1 |    26 |     0   (0)| 00:00:01 |       
|*  5 |   FIXED TABLE FIXED INDEX | X$KSLED (ind:2) |     1 |    13 |     0   (0)| 00:00:01 |       
---------------------------------------------------------------------------------------------       
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   3 - filter("S"."INST_ID"=USERENV('INSTANCE') AND BITAND("S"."KSSPAFLG",1)<>0 AND                 
              BITAND("S"."KSUSEFLG",1)<>0)                                                          
   4 - filter("S"."INDX"="W"."KSLWTSID")                                                            
   5 - filter("W"."KSLWTEVT"="E"."INDX")                                                            


统计信息
----------------------------------------------------------                                          
          8  recursive calls                                                                        
          0  db block gets                                                                          
          2  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
       1132  bytes sent via SQL*Net to client                                                       
        437  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         38  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select sid, username from v$session
  2* 	where username = 'SCOTT'
SCOTT@orcl >/

       SID USERNAME                                                                                 
---------- ------------------------------                                                           
        27 SCOTT                                                                                    
        32 SCOTT                                                                                    
        34 SCOTT                                                                                    
        42 SCOTT                                                                                    


执行计划
----------------------------------------------------------                                          
Plan hash value: 644658511                                                                          
                                                                                                    
---------------------------------------------------------------------------------------------       
| Id  | Operation                 | Name            | Rows  | Bytes | Cost (%CPU)| Time     |       
---------------------------------------------------------------------------------------------       
|   0 | SELECT STATEMENT          |                 |     1 |   108 |     0   (0)| 00:00:01 |       
|   1 |  NESTED LOOPS             |                 |     1 |   108 |     0   (0)| 00:00:01 |       
|   2 |   NESTED LOOPS            |                 |     1 |    95 |     0   (0)| 00:00:01 |       
|*  3 |    FIXED TABLE FULL       | X$KSUSE         |     1 |    69 |     0   (0)| 00:00:01 |       
|*  4 |    FIXED TABLE FIXED INDEX| X$KSLWT (ind:1) |     1 |    26 |     0   (0)| 00:00:01 |       
|*  5 |   FIXED TABLE FIXED INDEX | X$KSLED (ind:2) |     1 |    13 |     0   (0)| 00:00:01 |       
---------------------------------------------------------------------------------------------       
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   3 - filter("S"."KSUUDLNA"='SCOTT' AND "S"."INST_ID"=USERENV('INSTANCE') AND                      
              BITAND("S"."KSSPAFLG",1)<>0 AND BITAND("S"."KSUSEFLG",1)<>0)                          
   4 - filter("S"."INDX"="W"."KSLWTSID")                                                            
   5 - filter("W"."KSLWTEVT"="E"."INDX")                                                            


统计信息
----------------------------------------------------------                                          
          8  recursive calls                                                                        
          0  db block gets                                                                          
          2  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        546  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          4  rows processed                                                                         

SCOTT@orcl >select userenv('sid') from dual;

USERENV('SID')                                                                                      
--------------                                                                                      
            42                                                                                      


执行计划
----------------------------------------------------------                                          
Plan hash value: 1388734953                                                                         
                                                                                                    
-----------------------------------------------------------------                                   
| Id  | Operation        | Name | Rows  | Cost (%CPU)| Time     |                                   
-----------------------------------------------------------------                                   
|   0 | SELECT STATEMENT |      |     1 |     2   (0)| 00:00:01 |                                   
|   1 |  FAST DUAL       |      |     1 |     2   (0)| 00:00:01 |                                   
-----------------------------------------------------------------                                   


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          0  db block gets                                                                          
          0  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        429  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >select sid, username from v$session;

       SID USERNAME                                                                                 
---------- ------------------------------                                                           
         1                                                                                          
         2                                                                                          
         3                                                                                          
         4                                                                                          
         5                                                                                          
         6                                                                                          
         7                                                                                          
         8                                                                                          
         9                                                                                          
        10                                                                                          
        11                                                                                          

       SID USERNAME                                                                                 
---------- ------------------------------                                                           
        12                                                                                          
        13                                                                                          
        14                                                                                          
        15                                                                                          
        16                                                                                          
        19                                                                                          
        22                                                                                          
        23                                                                                          
        27 SCOTT                                                                                    
        29                                                                                          
        31 SYSMAN                                                                                   

       SID USERNAME                                                                                 
---------- ------------------------------                                                           
        32 SCOTT                                                                                    
        34 SCOTT                                                                                    
        35 DBSNMP                                                                                   
        36 DBSNMP                                                                                   
        37                                                                                          
        38 DBSNMP                                                                                   
        39 DBSNMP                                                                                   
        40                                                                                          
        41 DBSNMP                                                                                   
        42 SCOTT                                                                                    
        43 SYSMAN                                                                                   

       SID USERNAME                                                                                 
---------- ------------------------------                                                           
        44 DBSNMP                                                                                   
        45 DBSNMP                                                                                   
        47 DBSNMP                                                                                   
        61 SYSMAN                                                                                   
        62 SYSMAN                                                                                   

已选择38行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 644658511                                                                          
                                                                                                    
---------------------------------------------------------------------------------------------       
| Id  | Operation                 | Name            | Rows  | Bytes | Cost (%CPU)| Time     |       
---------------------------------------------------------------------------------------------       
|   0 | SELECT STATEMENT          |                 |     1 |   108 |     0   (0)| 00:00:01 |       
|   1 |  NESTED LOOPS             |                 |     1 |   108 |     0   (0)| 00:00:01 |       
|   2 |   NESTED LOOPS            |                 |     1 |    95 |     0   (0)| 00:00:01 |       
|*  3 |    FIXED TABLE FULL       | X$KSUSE         |     1 |    69 |     0   (0)| 00:00:01 |       
|*  4 |    FIXED TABLE FIXED INDEX| X$KSLWT (ind:1) |     1 |    26 |     0   (0)| 00:00:01 |       
|*  5 |   FIXED TABLE FIXED INDEX | X$KSLED (ind:2) |     1 |    13 |     0   (0)| 00:00:01 |       
---------------------------------------------------------------------------------------------       
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   3 - filter("S"."INST_ID"=USERENV('INSTANCE') AND BITAND("S"."KSSPAFLG",1)<>0 AND                 
              BITAND("S"."KSUSEFLG",1)<>0)                                                          
   4 - filter("S"."INDX"="W"."KSLWTSID")                                                            
   5 - filter("W"."KSLWTEVT"="E"."INDX")                                                            


统计信息
----------------------------------------------------------                                          
          8  recursive calls                                                                        
          0  db block gets                                                                          
          2  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
       1132  bytes sent via SQL*Net to client                                                       
        437  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         38  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1* select sid, username from v$session
SCOTT@orcl >select session_idi, user from v$locked_object;
select session_idi, user from v$locked_object
       *
第 1 行出现错误: 
ORA-00904: "SESSION_IDI": 标识符无效 


SCOTT@orcl >select session, user from v$locked_object;
select session, user from v$locked_object
       *
第 1 行出现错误: 
ORA-00936: 缺失表达式 


SCOTT@orcl >select session_idi, user from v$locked_object;
select session_idi, user from v$locked_object
       *
第 1 行出现错误: 
ORA-00904: "SESSION_IDI": 标识符无效 


SCOTT@orcl >
SCOTT@orcl >select session_id from v$locked_object;

SESSION_ID                                                                                          
----------                                                                                          
        34                                                                                          
        34                                                                                          


执行计划
----------------------------------------------------------                                          
Plan hash value: 4287998530                                                                         
                                                                                                    
------------------------------------------------------------------------------                      
| Id  | Operation          | Name    | Rows  | Bytes | Cost (%CPU)| Time     |                      
------------------------------------------------------------------------------                      
|   0 | SELECT STATEMENT   |         |     1 |    42 |     1 (100)| 00:00:01 |                      
|*  1 |  HASH JOIN         |         |     1 |    42 |     1 (100)| 00:00:01 |                      
|*  2 |   HASH JOIN        |         |     1 |    25 |     1 (100)| 00:00:01 |                      
|*  3 |    FIXED TABLE FULL| X$KTCXB |     1 |    21 |     0   (0)| 00:00:01 |                      
|   4 |    FIXED TABLE FULL| X$KTADM |   100 |   400 |     0   (0)| 00:00:01 |                      
|   5 |   FIXED TABLE FULL | X$KSUSE |   100 |  1700 |     0   (0)| 00:00:01 |                      
------------------------------------------------------------------------------                      
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   1 - access("X"."KTCXBSES"="S"."ADDR")                                                            
   2 - access("X"."KTCXBXBA"="L"."KSSOBOWN")                                                        
   3 - filter("X"."INST_ID"=USERENV('INSTANCE'))                                                    


统计信息
----------------------------------------------------------                                          
          8  recursive calls                                                                        
          1  db block gets                                                                          
          2  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        463  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          2  rows processed                                                                         

SCOTT@orcl >select session_id from v$locked_object;

SESSION_ID                                                                                          
----------                                                                                          
        34                                                                                          
        34                                                                                          
        42                                                                                          


执行计划
----------------------------------------------------------                                          
Plan hash value: 4287998530                                                                         
                                                                                                    
------------------------------------------------------------------------------                      
| Id  | Operation          | Name    | Rows  | Bytes | Cost (%CPU)| Time     |                      
------------------------------------------------------------------------------                      
|   0 | SELECT STATEMENT   |         |     1 |    42 |     1 (100)| 00:00:01 |                      
|*  1 |  HASH JOIN         |         |     1 |    42 |     1 (100)| 00:00:01 |                      
|*  2 |   HASH JOIN        |         |     1 |    25 |     1 (100)| 00:00:01 |                      
|*  3 |    FIXED TABLE FULL| X$KTCXB |     1 |    21 |     0   (0)| 00:00:01 |                      
|   4 |    FIXED TABLE FULL| X$KTADM |   100 |   400 |     0   (0)| 00:00:01 |                      
|   5 |   FIXED TABLE FULL | X$KSUSE |   100 |  1700 |     0   (0)| 00:00:01 |                      
------------------------------------------------------------------------------                      
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   1 - access("X"."KTCXBSES"="S"."ADDR")                                                            
   2 - access("X"."KTCXBXBA"="L"."KSSOBOWN")                                                        
   3 - filter("X"."INST_ID"=USERENV('INSTANCE'))                                                    


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          2  db block gets                                                                          
          0  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        471  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          3  rows processed                                                                         

SCOTT@orcl >desc v$locked_object;
 名称                                                  是否为空? 类型
 ----------------------------------------------------- -------- ------------------------------------
 XIDUSN                                                         NUMBER
 XIDSLOT                                                        NUMBER
 XIDSQN                                                         NUMBER
 OBJECT_ID                                                      NUMBER
 SESSION_ID                                                     NUMBER
 ORACLE_USERNAME                                                VARCHAR2(30)
 OS_USER_NAME                                                   VARCHAR2(30)
 PROCESS                                                        VARCHAR2(24)
 LOCKED_MODE                                                    NUMBER

SCOTT@orcl >select * from v$locked_object;

    XIDUSN    XIDSLOT     XIDSQN  OBJECT_ID SESSION_ID ORACLE_USERNAME                              
---------- ---------- ---------- ---------- ---------- ------------------------------               
OS_USER_NAME                   PROCESS                  LOCKED_MODE                                 
------------------------------ ------------------------ -----------                                 
         2         14        898      74695         34 SCOTT                                        
win7-yongjis-PC\win7-yongjis   4004:5084                          3                                 
                                                                                                    
         2         14        898      74694         34 SCOTT                                        
win7-yongjis-PC\win7-yongjis   4004:5084                          3                                 
                                                                                                    
         4          5        864       5003         42 SCOTT                                        
win7-yongjis-PC\win7-yongjis   3580:4580                          3                                 
                                                                                                    


执行计划
----------------------------------------------------------                                          
Plan hash value: 4287998530                                                                         
                                                                                                    
------------------------------------------------------------------------------                      
| Id  | Operation          | Name    | Rows  | Bytes | Cost (%CPU)| Time     |                      
------------------------------------------------------------------------------                      
|   0 | SELECT STATEMENT   |         |     1 |   155 |     1 (100)| 00:00:01 |                      
|*  1 |  HASH JOIN         |         |     1 |   155 |     1 (100)| 00:00:01 |                      
|*  2 |   HASH JOIN        |         |     1 |    90 |     1 (100)| 00:00:01 |                      
|*  3 |    FIXED TABLE FULL| X$KTCXB |     1 |    60 |     0   (0)| 00:00:01 |                      
|   4 |    FIXED TABLE FULL| X$KTADM |   100 |  3000 |     0   (0)| 00:00:01 |                      
|   5 |   FIXED TABLE FULL | X$KSUSE |   100 |  6500 |     0   (0)| 00:00:01 |                      
------------------------------------------------------------------------------                      
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   1 - access("X"."KTCXBSES"="S"."ADDR")                                                            
   2 - access("X"."KTCXBXBA"="L"."KSSOBOWN")                                                        
   3 - filter("X"."INST_ID"=USERENV('INSTANCE'))                                                    


统计信息
----------------------------------------------------------                                          
        131  recursive calls                                                                        
          2  db block gets                                                                          
         14  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
       1127  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          3  rows processed                                                                         

SCOTT@orcl >select session_id, oracle_username from v$locked_object;

SESSION_ID ORACLE_USERNAME                                                                          
---------- ------------------------------                                                           
        34 SCOTT                                                                                    
        34 SCOTT                                                                                    
        42 SCOTT                                                                                    


执行计划
----------------------------------------------------------                                          
Plan hash value: 4287998530                                                                         
                                                                                                    
------------------------------------------------------------------------------                      
| Id  | Operation          | Name    | Rows  | Bytes | Cost (%CPU)| Time     |                      
------------------------------------------------------------------------------                      
|   0 | SELECT STATEMENT   |         |     1 |    59 |     1 (100)| 00:00:01 |                      
|*  1 |  HASH JOIN         |         |     1 |    59 |     1 (100)| 00:00:01 |                      
|*  2 |   HASH JOIN        |         |     1 |    25 |     1 (100)| 00:00:01 |                      
|*  3 |    FIXED TABLE FULL| X$KTCXB |     1 |    21 |     0   (0)| 00:00:01 |                      
|   4 |    FIXED TABLE FULL| X$KTADM |   100 |   400 |     0   (0)| 00:00:01 |                      
|   5 |   FIXED TABLE FULL | X$KSUSE |   100 |  3400 |     0   (0)| 00:00:01 |                      
------------------------------------------------------------------------------                      
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   1 - access("X"."KTCXBSES"="S"."ADDR")                                                            
   2 - access("X"."KTCXBXBA"="L"."KSSOBOWN")                                                        
   3 - filter("X"."INST_ID"=USERENV('INSTANCE'))                                                    


统计信息
----------------------------------------------------------                                          
          8  recursive calls                                                                        
          2  db block gets                                                                          
          2  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        552  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          3  rows processed                                                                         

SCOTT@orcl >commit
  2  
SCOTT@orcl >commit;

提交完成。

SCOTT@orcl >select session_id, oracle_username from v$locked_object;

SESSION_ID ORACLE_USERNAME                                                                          
---------- ------------------------------                                                           
        34 SCOTT                                                                                    
        34 SCOTT                                                                                    


执行计划
----------------------------------------------------------                                          
Plan hash value: 4287998530                                                                         
                                                                                                    
------------------------------------------------------------------------------                      
| Id  | Operation          | Name    | Rows  | Bytes | Cost (%CPU)| Time     |                      
------------------------------------------------------------------------------                      
|   0 | SELECT STATEMENT   |         |     1 |    59 |     1 (100)| 00:00:01 |                      
|*  1 |  HASH JOIN         |         |     1 |    59 |     1 (100)| 00:00:01 |                      
|*  2 |   HASH JOIN        |         |     1 |    25 |     1 (100)| 00:00:01 |                      
|*  3 |    FIXED TABLE FULL| X$KTCXB |     1 |    21 |     0   (0)| 00:00:01 |                      
|   4 |    FIXED TABLE FULL| X$KTADM |   100 |   400 |     0   (0)| 00:00:01 |                      
|   5 |   FIXED TABLE FULL | X$KSUSE |   100 |  3400 |     0   (0)| 00:00:01 |                      
------------------------------------------------------------------------------                      
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   1 - access("X"."KTCXBSES"="S"."ADDR")                                                            
   2 - access("X"."KTCXBXBA"="L"."KSSOBOWN")                                                        
   3 - filter("X"."INST_ID"=USERENV('INSTANCE'))                                                    


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          1  db block gets                                                                          
          0  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        544  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          2  rows processed                                                                         

SCOTT@orcl >select session_id, oracle_username from v$locked_object;

SESSION_ID ORACLE_USERNAME                                                                          
---------- ------------------------------                                                           
        42 SCOTT                                                                                    


执行计划
----------------------------------------------------------                                          
Plan hash value: 4287998530                                                                         
                                                                                                    
------------------------------------------------------------------------------                      
| Id  | Operation          | Name    | Rows  | Bytes | Cost (%CPU)| Time     |                      
------------------------------------------------------------------------------                      
|   0 | SELECT STATEMENT   |         |     1 |    59 |     1 (100)| 00:00:01 |                      
|*  1 |  HASH JOIN         |         |     1 |    59 |     1 (100)| 00:00:01 |                      
|*  2 |   HASH JOIN        |         |     1 |    25 |     1 (100)| 00:00:01 |                      
|*  3 |    FIXED TABLE FULL| X$KTCXB |     1 |    21 |     0   (0)| 00:00:01 |                      
|   4 |    FIXED TABLE FULL| X$KTADM |   100 |   400 |     0   (0)| 00:00:01 |                      
|   5 |   FIXED TABLE FULL | X$KSUSE |   100 |  3400 |     0   (0)| 00:00:01 |                      
------------------------------------------------------------------------------                      
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   1 - access("X"."KTCXBSES"="S"."ADDR")                                                            
   2 - access("X"."KTCXBXBA"="L"."KSSOBOWN")                                                        
   3 - filter("X"."INST_ID"=USERENV('INSTANCE'))                                                    


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          1  db block gets                                                                          
          0  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        500  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >
SCOTT@orcl >
SCOTT@orcl >
SCOTT@orcl >
SCOTT@orcl >
SCOTT@orcl >
SCOTT@orcl >
SCOTT@orcl >select session_id, oracle_username from v$locked_object;

SESSION_ID ORACLE_USERNAME                                                                          
---------- ------------------------------                                                           
        42 SCOTT                                                                                    


执行计划
----------------------------------------------------------                                          
Plan hash value: 4287998530                                                                         
                                                                                                    
------------------------------------------------------------------------------                      
| Id  | Operation          | Name    | Rows  | Bytes | Cost (%CPU)| Time     |                      
------------------------------------------------------------------------------                      
|   0 | SELECT STATEMENT   |         |     1 |    59 |     1 (100)| 00:00:01 |                      
|*  1 |  HASH JOIN         |         |     1 |    59 |     1 (100)| 00:00:01 |                      
|*  2 |   HASH JOIN        |         |     1 |    25 |     1 (100)| 00:00:01 |                      
|*  3 |    FIXED TABLE FULL| X$KTCXB |     1 |    21 |     0   (0)| 00:00:01 |                      
|   4 |    FIXED TABLE FULL| X$KTADM |   100 |   400 |     0   (0)| 00:00:01 |                      
|   5 |   FIXED TABLE FULL | X$KSUSE |   100 |  3400 |     0   (0)| 00:00:01 |                      
------------------------------------------------------------------------------                      
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   1 - access("X"."KTCXBSES"="S"."ADDR")                                                            
   2 - access("X"."KTCXBXBA"="L"."KSSOBOWN")                                                        
   3 - filter("X"."INST_ID"=USERENV('INSTANCE'))                                                    


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          1  db block gets                                                                          
          0  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        500  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >drop table t1;

表已删除。

SCOTT@orcl >
SCOTT@orcl >D:\git\db\sqlOptimize\1_2_4.sql
SP2-0734: 未知的命令开头 "D:\git\db\..." - 忽略了剩余的行。
SCOTT@orcl >start D:\git\db\sqlOptimize\1_2_4.sql

表已创建。

create table t2( col2 varchar2( 1 ), col3 varchar2( 2 ) )
             *
第 1 行出现错误: 
ORA-00955: 名称已由现有对象使用 



已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T1   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
       1777  recursive calls                                                                        
         58  db block gets                                                                          
        371  consistent gets                                                                        
          1  physical reads                                                                         
       6292  redo size                                                                              
        917  bytes sent via SQL*Net to client                                                       
        995  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
         54  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         


已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T1   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          3  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        244  redo size                                                                              
        918  bytes sent via SQL*Net to client                                                       
        995  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         


已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T1   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          3  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        244  redo size                                                                              
        918  bytes sent via SQL*Net to client                                                       
        995  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

insert into t2 values( 'A', 'A2' )
                       *
第 1 行出现错误: 
ORA-01722: 无效数字 


insert into t2 values( 'B', 'B2' )
                       *
第 1 行出现错误: 
ORA-01722: 无效数字 


insert into t2 values( 'D', 'D2' )
                       *
第 1 行出现错误: 
ORA-01722: 无效数字 


SCOTT@orcl >drop table t1
  2  /

表已删除。

SCOTT@orcl >drop table t2;

表已删除。

SCOTT@orcl >start D:\git\db\sqlOptimize\1_2_4.sql

表已创建。


表已创建。


已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T1   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
        136  recursive calls                                                                        
         55  db block gets                                                                          
         31  consistent gets                                                                        
          0  physical reads                                                                         
       6244  redo size                                                                              
        918  bytes sent via SQL*Net to client                                                       
        995  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          2  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         


已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T1   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          3  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        244  redo size                                                                              
        918  bytes sent via SQL*Net to client                                                       
        995  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         


已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T1   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          3  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        244  redo size                                                                              
        918  bytes sent via SQL*Net to client                                                       
        995  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         


已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T2   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
        136  recursive calls                                                                        
         61  db block gets                                                                          
         31  consistent gets                                                                        
          0  physical reads                                                                         
       6092  redo size                                                                              
        918  bytes sent via SQL*Net to client                                                       
        998  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          2  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         


已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T2   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          3  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        244  redo size                                                                              
        918  bytes sent via SQL*Net to client                                                       
        998  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         


已创建 1 行。


执行计划
----------------------------------------------------------                                          
                                                                                                    
---------------------------------------------------------------------------------                   
| Id  | Operation                | Name | Rows  | Bytes | Cost (%CPU)| Time     |                   
---------------------------------------------------------------------------------                   
|   0 | INSERT STATEMENT         |      |     1 |   100 |     1   (0)| 00:00:01 |                   
|   1 |  LOAD TABLE CONVENTIONAL | T2   |       |       |            |          |                   
---------------------------------------------------------------------------------                   


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          3  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
        244  redo size                                                                              
        918  bytes sent via SQL*Net to client                                                       
        998  bytes received via SQL*Net from client                                                 
          4  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >select * from t1 ;

      COL1 C                                                                                        
---------- -                                                                                        
         1 A                                                                                        
         2 B                                                                                        
         3 C                                                                                        


执行计划
----------------------------------------------------------                                          
Plan hash value: 3617692013                                                                         
                                                                                                    
--------------------------------------------------------------------------                          
| Id  | Operation         | Name | Rows  | Bytes | Cost (%CPU)| Time     |                          
--------------------------------------------------------------------------                          
|   0 | SELECT STATEMENT  |      |     3 |    45 |     3   (0)| 00:00:01 |                          
|   1 |  TABLE ACCESS FULL| T1   |     3 |    45 |     3   (0)| 00:00:01 |                          
--------------------------------------------------------------------------                          
                                                                                                    
Note                                                                                                
-----                                                                                               
   - dynamic sampling used for this statement (level=2)                                             


统计信息
----------------------------------------------------------                                          
         48  recursive calls                                                                        
          0  db block gets                                                                          
         20  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        537  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          3  rows processed                                                                         

SCOTT@orcl >select * from t2;

C CO                                                                                                
- --                                                                                                
A A2                                                                                                
B B2                                                                                                
D D2                                                                                                


执行计划
----------------------------------------------------------                                          
Plan hash value: 1513984157                                                                         
                                                                                                    
--------------------------------------------------------------------------                          
| Id  | Operation         | Name | Rows  | Bytes | Cost (%CPU)| Time     |                          
--------------------------------------------------------------------------                          
|   0 | SELECT STATEMENT  |      |     3 |    15 |     3   (0)| 00:00:01 |                          
|   1 |  TABLE ACCESS FULL| T2   |     3 |    15 |     3   (0)| 00:00:01 |                          
--------------------------------------------------------------------------                          
                                                                                                    
Note                                                                                                
-----                                                                                               
   - dynamic sampling used for this statement (level=2)                                             


统计信息
----------------------------------------------------------                                          
         48  recursive calls                                                                        
          0  db block gets                                                                          
         20  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        537  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          3  rows processed                                                                         

SCOTT@orcl >get D:\git\db\sqlOptimize\1_2_4.sql
  1  create table t1( col1 number, col2 varchar2( 1 ) );
  2  create table t2( col2 varchar2( 1 ), col3 varchar2( 2 ) );
  3  insert into t1 values( 1, 'A' );
  4  insert into t1 values( 2, 'B' );
  5  insert into t1 values( 3, 'C' );
  6  insert into t2 values( 'A', 'A2' );
  7  insert into t2 values( 'B', 'B2' );
  8  insert into t2 values( 'D', 'D2' );
  9  select t1.col1, t1.col2, t2.col3
 10  	from t1, t2
 11* 	where t1.col2 = t2.col2
 12  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.col1, t1.col2, t2.col3
  2  	from t1, t2
  3* 	where t1.col2 = t2.col2
SCOTT@orcl >/

      COL1 C CO                                                                                     
---------- - --                                                                                     
         1 A A2                                                                                     
         2 B B2                                                                                     


执行计划
----------------------------------------------------------                                          
Plan hash value: 1838229974                                                                         
                                                                                                    
---------------------------------------------------------------------------                         
| Id  | Operation          | Name | Rows  | Bytes | Cost (%CPU)| Time     |                         
---------------------------------------------------------------------------                         
|   0 | SELECT STATEMENT   |      |     3 |    60 |     7  (15)| 00:00:01 |                         
|*  1 |  HASH JOIN         |      |     3 |    60 |     7  (15)| 00:00:01 |                         
|   2 |   TABLE ACCESS FULL| T1   |     3 |    45 |     3   (0)| 00:00:01 |                         
|   3 |   TABLE ACCESS FULL| T2   |     3 |    15 |     3   (0)| 00:00:01 |                         
---------------------------------------------------------------------------                         
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   1 - access("T1"."COL2"="T2"."COL2")                                                              
                                                                                                    
Note                                                                                                
-----                                                                                               
   - dynamic sampling used for this statement (level=2)                                             


统计信息
----------------------------------------------------------                                          
          9  recursive calls                                                                        
          0  db block gets                                                                          
         31  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        583  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          2  rows processed                                                                         

SCOTT@orcl >get D:\git\db\sqlOptimize\1_2_4.sql
  1  create table t1( col1 number, col2 varchar2( 1 ) );
  2  create table t2( col2 varchar2( 1 ), col3 varchar2( 2 ) );
  3  insert into t1 values( 1, 'A' );
  4  insert into t1 values( 2, 'B' );
  5  insert into t1 values( 3, 'C' );
  6  insert into t2 values( 'A', 'A2' );
  7  insert into t2 values( 'B', 'B2' );
  8  insert into t2 values( 'D', 'D2' );
  9  select t1.col1, t1.col2, t2.col3
 10  	from t1, t2
 11  	where t1.col2 = t2.col2;
 12  select t1.col1, t1.col2, t2.col3
 13  	from t1
 14* 	inner join on t1.col2 = t2.col3;
 15  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.col1, t1.col2, t2.col3
  2  	from t1
  3* 	inner join on t1.col2 = t2.col3;
SCOTT@orcl >/
	inner join on t1.col2 = t2.col3;
	           *
第 3 行出现错误: 
ORA-00903: 表名无效 


SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.col1, t1.col2, t2.col3
  2  	from t1
  3  	inner join t2
  4* 	on t1.col2 = t2.col3;
SCOTT@orcl >get D:\git\db\sqlOptimize\1_2_4.sql
  1  create table t1( col1 number, col2 varchar2( 1 ) );
  2  create table t2( col2 varchar2( 1 ), col3 varchar2( 2 ) );
  3  insert into t1 values( 1, 'A' );
  4  insert into t1 values( 2, 'B' );
  5  insert into t1 values( 3, 'C' );
  6  insert into t2 values( 'A', 'A2' );
  7  insert into t2 values( 'B', 'B2' );
  8  insert into t2 values( 'D', 'D2' );
  9  select t1.col1, t1.col2, t2.col3
 10  	from t1, t2
 11  	where t1.col2 = t2.col2;
 12  select t1.col1, t1.col2, t2.col3
 13  	from t1
 14* 	inner join on t1.col2 = t2.col3;
 15  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.col1, t1.col2, t2.col3
  2  	from t1
  3* 	inner join on t1.col2 = t2.col3;
SCOTT@orcl >/
	inner join on t1.col2 = t2.col3;
	           *
第 3 行出现错误: 
ORA-00903: 表名无效 


SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.col1, t1.col2, t2.col3
  2  	from t1
  3* 	inner join on t1.col2 = t2.col3;
SCOTT@orcl >get D:\git\db\sqlOptimize\1_2_4.sql
  1  create table t1( col1 number, col2 varchar2( 1 ) );
  2  create table t2( col2 varchar2( 1 ), col3 varchar2( 2 ) );
  3  insert into t1 values( 1, 'A' );
  4  insert into t1 values( 2, 'B' );
  5  insert into t1 values( 3, 'C' );
  6  insert into t2 values( 'A', 'A2' );
  7  insert into t2 values( 'B', 'B2' );
  8  insert into t2 values( 'D', 'D2' );
  9  select t1.col1, t1.col2, t2.col3
 10  	from t1, t2
 11  	where t1.col2 = t2.col2;
 12  select t1.col1, t1.col2, t2.col3
 13  	from t1
 14  	inner join t2
 15* 	on t1.col2 = t2.col3;
 16  ed
 17  
SCOTT@orcl >
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.col1, t1.col2, t2.col3
  2  	from t1
  3  	inner join t2
  4* 	on t1.col2 = t2.col3;
SCOTT@orcl >/
	on t1.col2 = t2.col3;
	                    *
第 4 行出现错误: 
ORA-00911: 无效字符 


SCOTT@orcl >/
	on t1.col2 = t2.col3;
	                    *
第 4 行出现错误: 
ORA-00911: 无效字符 


SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.col1, t1.col2, t2.col3
  2  	from t1
  3  	inner join t2
  4* 	on t1.col2 = t2.col3
SCOTT@orcl >/

未选定行


执行计划
----------------------------------------------------------                                          
Plan hash value: 1838229974                                                                         
                                                                                                    
---------------------------------------------------------------------------                         
| Id  | Operation          | Name | Rows  | Bytes | Cost (%CPU)| Time     |                         
---------------------------------------------------------------------------                         
|   0 | SELECT STATEMENT   |      |     3 |    54 |     7  (15)| 00:00:01 |                         
|*  1 |  HASH JOIN         |      |     3 |    54 |     7  (15)| 00:00:01 |                         
|   2 |   TABLE ACCESS FULL| T1   |     3 |    45 |     3   (0)| 00:00:01 |                         
|   3 |   TABLE ACCESS FULL| T2   |     3 |     9 |     3   (0)| 00:00:01 |                         
---------------------------------------------------------------------------                         
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   1 - access("T1"."COL2"="T2"."COL3")                                                              
                                                                                                    
Note                                                                                                
-----                                                                                               
   - dynamic sampling used for this statement (level=2)                                             


统计信息
----------------------------------------------------------                                          
          8  recursive calls                                                                        
          0  db block gets                                                                          
         30  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        401  bytes sent via SQL*Net to client                                                       
        404  bytes received via SQL*Net from client                                                 
          1  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          0  rows processed                                                                         

SCOTT@orcl >get D:\git\db\sqlOptimize\1_2_4.sql
  1  create table t1( col1 number, col2 varchar2( 1 ) )
  2  create table t2( col2 varchar2( 1 ), col3 varchar2( 2 ) )
  3  insert into t1 values( 1, 'A' )
  4  insert into t1 values( 2, 'B' )
  5  insert into t1 values( 3, 'C' )
  6  insert into t2 values( 'A', 'A2' )
  7  insert into t2 values( 'B', 'B2' )
  8  insert into t2 values( 'D', 'D2' )
  9  select t1.col1, t1.col2, t2.col3
 10  	from t1, t2
 11  	where t1.col2 = t2.col2
 12  select t1.col1, t1.col2, t2.col3
 13  	from t1
 14  	inner join t2
 15* 	on t1.col2 = t2.col3
 16  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.col1, t1.col2, t2.col3
  2  	from t1
  3  	inner join t2
  4* 	on t1.col2 = t2.col3
SCOTT@orcl >/

未选定行


执行计划
----------------------------------------------------------                                          
Plan hash value: 1838229974                                                                         
                                                                                                    
---------------------------------------------------------------------------                         
| Id  | Operation          | Name | Rows  | Bytes | Cost (%CPU)| Time     |                         
---------------------------------------------------------------------------                         
|   0 | SELECT STATEMENT   |      |     3 |    54 |     7  (15)| 00:00:01 |                         
|*  1 |  HASH JOIN         |      |     3 |    54 |     7  (15)| 00:00:01 |                         
|   2 |   TABLE ACCESS FULL| T1   |     3 |    45 |     3   (0)| 00:00:01 |                         
|   3 |   TABLE ACCESS FULL| T2   |     3 |     9 |     3   (0)| 00:00:01 |                         
---------------------------------------------------------------------------                         
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   1 - access("T1"."COL2"="T2"."COL3")                                                              
                                                                                                    
Note                                                                                                
-----                                                                                               
   - dynamic sampling used for this statement (level=2)                                             


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
         14  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        401  bytes sent via SQL*Net to client                                                       
        404  bytes received via SQL*Net from client                                                 
          1  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          0  rows processed                                                                         

SCOTT@orcl >get D:\git\db\sqlOptimize\1_2_4.sql
  1  create table t1( col1 number, col2 varchar2( 1 ) )
  2  create table t2( col2 varchar2( 1 ), col3 varchar2( 2 ) )
  3  insert into t1 values( 1, 'A' )
  4  insert into t1 values( 2, 'B' )
  5  insert into t1 values( 3, 'C' )
  6  insert into t2 values( 'A', 'A2' )
  7  insert into t2 values( 'B', 'B2' )
  8  insert into t2 values( 'D', 'D2' )
  9  select t1.col1, t1.col2, t2.col3
 10  	from t1, t2
 11  	where t1.col2 = t2.col2
 12  select t1.col1, t1.col2, t2.col3
 13  	from t1
 14  	inner join t2
 15* 	on ( t1.col2 = t2.col3 )
 16  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.col1, t1.col2, t2.col3
  2  	from t1
  3  	inner join t2
  4* 	on ( t1.col2 = t2.col3 )
SCOTT@orcl >/

未选定行


执行计划
----------------------------------------------------------                                          
Plan hash value: 1838229974                                                                         
                                                                                                    
---------------------------------------------------------------------------                         
| Id  | Operation          | Name | Rows  | Bytes | Cost (%CPU)| Time     |                         
---------------------------------------------------------------------------                         
|   0 | SELECT STATEMENT   |      |     3 |    54 |     7  (15)| 00:00:01 |                         
|*  1 |  HASH JOIN         |      |     3 |    54 |     7  (15)| 00:00:01 |                         
|   2 |   TABLE ACCESS FULL| T1   |     3 |    45 |     3   (0)| 00:00:01 |                         
|   3 |   TABLE ACCESS FULL| T2   |     3 |     9 |     3   (0)| 00:00:01 |                         
---------------------------------------------------------------------------                         
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   1 - access("T1"."COL2"="T2"."COL3")                                                              
                                                                                                    
Note                                                                                                
-----                                                                                               
   - dynamic sampling used for this statement (level=2)                                             


统计信息
----------------------------------------------------------                                          
          7  recursive calls                                                                        
          0  db block gets                                                                          
         30  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        401  bytes sent via SQL*Net to client                                                       
        404  bytes received via SQL*Net from client                                                 
          1  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          0  rows processed                                                                         

SCOTT@orcl >select * from t1;

      COL1 C                                                                                        
---------- -                                                                                        
         1 A                                                                                        
         2 B                                                                                        
         3 C                                                                                        


执行计划
----------------------------------------------------------                                          
Plan hash value: 3617692013                                                                         
                                                                                                    
--------------------------------------------------------------------------                          
| Id  | Operation         | Name | Rows  | Bytes | Cost (%CPU)| Time     |                          
--------------------------------------------------------------------------                          
|   0 | SELECT STATEMENT  |      |     3 |    45 |     3   (0)| 00:00:01 |                          
|   1 |  TABLE ACCESS FULL| T1   |     3 |    45 |     3   (0)| 00:00:01 |                          
--------------------------------------------------------------------------                          
                                                                                                    
Note                                                                                                
-----                                                                                               
   - dynamic sampling used for this statement (level=2)                                             


统计信息
----------------------------------------------------------                                          
          4  recursive calls                                                                        
          0  db block gets                                                                          
         16  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        537  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          3  rows processed                                                                         

SCOTT@orcl >select * from t2;

C CO                                                                                                
- --                                                                                                
A A2                                                                                                
B B2                                                                                                
D D2                                                                                                


执行计划
----------------------------------------------------------                                          
Plan hash value: 1513984157                                                                         
                                                                                                    
--------------------------------------------------------------------------                          
| Id  | Operation         | Name | Rows  | Bytes | Cost (%CPU)| Time     |                          
--------------------------------------------------------------------------                          
|   0 | SELECT STATEMENT  |      |     3 |    15 |     3   (0)| 00:00:01 |                          
|   1 |  TABLE ACCESS FULL| T2   |     3 |    15 |     3   (0)| 00:00:01 |                          
--------------------------------------------------------------------------                          
                                                                                                    
Note                                                                                                
-----                                                                                               
   - dynamic sampling used for this statement (level=2)                                             


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
          8  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        537  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          3  rows processed                                                                         

SCOTT@orcl >get D:\git\db\sqlOptimize\1_2_4.sql
  1  create table t1( col1 number, col2 varchar2( 1 ) )
  2  create table t2( col2 varchar2( 1 ), col3 varchar2( 2 ) )
  3  insert into t1 values( 1, 'A' )
  4  insert into t1 values( 2, 'B' )
  5  insert into t1 values( 3, 'C' )
  6  insert into t2 values( 'A', 'A2' )
  7  insert into t2 values( 'B', 'B2' )
  8  insert into t2 values( 'D', 'D2' )
  9  -- inner join
 10  select t1.col1, t1.col2, t2.col3
 11  	from t1, t2
 12  	where t1.col2 = t2.col2
 13  select t1.col1, t1.col2, t2.col3
 14  	from t1
 15  	inner join t2
 16  	on ( t1.col2 = t2.col3 )
 17  -- outer join
 18  select t1.col1, t1.col2, t2.col3
 19  	from t1
 20  	outer join t2
 21* 	on ( t1.col2 = t2.col2 )
 22  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.col1, t1.col2, t2.col3
  2  	from t1
  3  	outer join t2
  4* 	on ( t1.col2 = t2.col2 )
SCOTT@orcl >/
	on ( t1.col2 = t2.col2 )
	     *
第 4 行出现错误: 
ORA-00904: "T1"."COL2": 标识符无效 


SCOTT@orcl >get D:\git\db\sqlOptimize\1_2_4.sql
  1  create table t1( col1 number, col2 varchar2( 1 ) )
  2  create table t2( col2 varchar2( 1 ), col3 varchar2( 2 ) )
  3  insert into t1 values( 1, 'A' )
  4  insert into t1 values( 2, 'B' )
  5  insert into t1 values( 3, 'C' )
  6  insert into t2 values( 'A', 'A2' )
  7  insert into t2 values( 'B', 'B2' )
  8  insert into t2 values( 'D', 'D2' )
  9  -- inner join
 10  select t1.col1, t1.col2, t2.col3
 11  	from t1, t2
 12  	where t1.col2 = t2.col2
 13  select t1.col1, t1.col2, t2.col3
 14  	from t1
 15  	inner join t2
 16  	on ( t1.col2 = t2.col3 )
 17  -- outer join
 18  select t1.col1, t1.col2, t2.col3
 19  	from t1
 20  	outer left join t2
 21* 	on ( t1.col2 = t2.col2 )
 22  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.col1, t1.col2, t2.col3
  2  	from t1
  3  	outer left join t2
  4* 	on ( t1.col2 = t2.col2 )
SCOTT@orcl >/
	on ( t1.col2 = t2.col2 )
	     *
第 4 行出现错误: 
ORA-00904: "T1"."COL2": 标识符无效 


SCOTT@orcl >get D:\git\db\sqlOptimize\1_2_4.sql
  1  create table t1( col1 number, col2 varchar2( 1 ) )
  2  create table t2( col2 varchar2( 1 ), col3 varchar2( 2 ) )
  3  insert into t1 values( 1, 'A' )
  4  insert into t1 values( 2, 'B' )
  5  insert into t1 values( 3, 'C' )
  6  insert into t2 values( 'A', 'A2' )
  7  insert into t2 values( 'B', 'B2' )
  8  insert into t2 values( 'D', 'D2' )
  9  -- inner join
 10  select t1.col1, t1.col2, t2.col3
 11  	from t1, t2
 12  	where t1.col2 = t2.col2
 13  select t1.col1, t1.col2, t2.col3
 14  	from t1
 15  	inner join t2
 16  	on ( t1.col2 = t2.col3 )
 17  -- outer join
 18  select t1.col1, t1.col2, t2.col3
 19  	from t1
 20  	left outer join t2
 21* 	on ( t1.col2 = t2.col2 )
 22  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  -- outer join
  2  select t1.col1, t1.col2, t2.col3
  3  	from t1
  4  	left outer join t2
  5* 	on ( t1.col2 = t2.col2 )
SCOTT@orcl >/
-- outer join
*
第 1 行出现错误: 
ORA-24374: 在读取或执行并读取之前没有完成定义 


SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.col1, t1.col2, t2.col3
  2  	from t1
  3  	left join t2
  4* 	on ( t1.col2 = t2.col2 )
SCOTT@orcl >/

      COL1 C CO                                                                                     
---------- - --                                                                                     
         1 A A2                                                                                     
         2 B B2                                                                                     
         3 C                                                                                        


执行计划
----------------------------------------------------------                                          
Plan hash value: 1823443478                                                                         
                                                                                                    
---------------------------------------------------------------------------                         
| Id  | Operation          | Name | Rows  | Bytes | Cost (%CPU)| Time     |                         
---------------------------------------------------------------------------                         
|   0 | SELECT STATEMENT   |      |     3 |    60 |     7  (15)| 00:00:01 |                         
|*  1 |  HASH JOIN OUTER   |      |     3 |    60 |     7  (15)| 00:00:01 |                         
|   2 |   TABLE ACCESS FULL| T1   |     3 |    45 |     3   (0)| 00:00:01 |                         
|   3 |   TABLE ACCESS FULL| T2   |     3 |    15 |     3   (0)| 00:00:01 |                         
---------------------------------------------------------------------------                         
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   1 - access("T1"."COL2"="T2"."COL2"(+))                                                           
                                                                                                    
Note                                                                                                
-----                                                                                               
   - dynamic sampling used for this statement (level=2)                                             


统计信息
----------------------------------------------------------                                          
          7  recursive calls                                                                        
          0  db block gets                                                                          
         31  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        594  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          3  rows processed                                                                         

SCOTT@orcl >get D:\git\db\sqlOptimize\1_2_4.sql
  1  create table t1( col1 number, col2 varchar2( 1 ) )
  2  create table t2( col2 varchar2( 1 ), col3 varchar2( 2 ) )
  3  insert into t1 values( 1, 'A' )
  4  insert into t1 values( 2, 'B' )
  5  insert into t1 values( 3, 'C' )
  6  insert into t2 values( 'A', 'A2' )
  7  insert into t2 values( 'B', 'B2' )
  8  insert into t2 values( 'D', 'D2' )
  9  -- inner join
 10  select t1.col1, t1.col2, t2.col3
 11  	from t1, t2
 12  	where t1.col2 = t2.col2
 13  select t1.col1, t1.col2, t2.col3
 14  	from t1
 15  	inner join t2
 16  	on ( t1.col2 = t2.col3 )
 17  -- outer join
 18  select t1.col1, t1.col2, t2.col3
 19  	from t1
 20  	left join t2
 21* 	on ( t1.col2 = t2.col2 )
 22  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  -- outer join
  2  select t1.col1, t1.col2, t2.col3
  3  	from t1
  4  	left join t2
  5* 	on ( t1.col2 = t2.col2 )
SCOTT@orcl >/
-- outer join
*
第 1 行出现错误: 
ORA-24374: 在读取或执行并读取之前没有完成定义 


SCOTT@orcl >ed
已写入 file afiedt.buf

  1  -- outer join
  2  select t1.col1, t1.col2, t2.col3
  3  	from t1
  4  	left join t2
  5* 	on ( t1.col2 = t2.col2 )
SCOTT@orcl >get D:\git\db\sqlOptimize\1_2_4.sql
  1  create table t1( col1 number, col2 varchar2( 1 ) )
  2  create table t2( col2 varchar2( 1 ), col3 varchar2( 2 ) )
  3  insert into t1 values( 1, 'A' )
  4  insert into t1 values( 2, 'B' )
  5  insert into t1 values( 3, 'C' )
  6  insert into t2 values( 'A', 'A2' )
  7  insert into t2 values( 'B', 'B2' )
  8  insert into t2 values( 'D', 'D2' )
  9  -- inner join
 10  select t1.col1, t1.col2, t2.col3
 11  	from t1, t2
 12  	where t1.col2 = t2.col2
 13  select t1.col1, t1.col2, t2.col3
 14  	from t1
 15  	inner join t2
 16  	on ( t1.col2 = t2.col3 )
 17  -- outer join
 18  select t1.col1, t1.col2, t2.col3
 19  	from t1
 20  	left join t2
 21* 	on ( t1.col2 = t2.col2 )
 22  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  -- outer join
  2  select t1.col1, t1.col2, t2.col3
  3  	from t1
  4  	left join t2
  5* 	on ( t1.col2 = t2.col2 )
SCOTT@orcl >/
-- outer join
*
第 1 行出现错误: 
ORA-24374: 在读取或执行并读取之前没有完成定义 


SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.col1, t1.col2, t2.col3
  2  	from t1
  3  	left join t2
  4* 	on ( t1.col2 = t2.col2 )
SCOTT@orcl >/

      COL1 C CO                                                                                     
---------- - --                                                                                     
         1 A A2                                                                                     
         2 B B2                                                                                     
         3 C                                                                                        


执行计划
----------------------------------------------------------                                          
Plan hash value: 1823443478                                                                         
                                                                                                    
---------------------------------------------------------------------------                         
| Id  | Operation          | Name | Rows  | Bytes | Cost (%CPU)| Time     |                         
---------------------------------------------------------------------------                         
|   0 | SELECT STATEMENT   |      |     3 |    60 |     7  (15)| 00:00:01 |                         
|*  1 |  HASH JOIN OUTER   |      |     3 |    60 |     7  (15)| 00:00:01 |                         
|   2 |   TABLE ACCESS FULL| T1   |     3 |    45 |     3   (0)| 00:00:01 |                         
|   3 |   TABLE ACCESS FULL| T2   |     3 |    15 |     3   (0)| 00:00:01 |                         
---------------------------------------------------------------------------                         
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   1 - access("T1"."COL2"="T2"."COL2"(+))                                                           
                                                                                                    
Note                                                                                                
-----                                                                                               
   - dynamic sampling used for this statement (level=2)                                             


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
         15  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        594  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          3  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1  -- outer join
  2  select t1.col1, t1.col2, t2.col3
  3  	from t1
  4  	left join t2
  5* 	on ( t1.col2 = t2.col2 )
SCOTT@orcl >/
-- outer join
*
第 1 行出现错误: 
ORA-24374: 在读取或执行并读取之前没有完成定义 


SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.col1, t1.col2, t2.col3
  2  	from t1
  3  	left join t2
  4* 	on ( t1.col2 = t2.col2 )
SCOTT@orcl >/

      COL1 C CO                                                                                     
---------- - --                                                                                     
         1 A A2                                                                                     
         2 B B2                                                                                     
         3 C                                                                                        


执行计划
----------------------------------------------------------                                          
Plan hash value: 1823443478                                                                         
                                                                                                    
---------------------------------------------------------------------------                         
| Id  | Operation          | Name | Rows  | Bytes | Cost (%CPU)| Time     |                         
---------------------------------------------------------------------------                         
|   0 | SELECT STATEMENT   |      |     3 |    60 |     7  (15)| 00:00:01 |                         
|*  1 |  HASH JOIN OUTER   |      |     3 |    60 |     7  (15)| 00:00:01 |                         
|   2 |   TABLE ACCESS FULL| T1   |     3 |    45 |     3   (0)| 00:00:01 |                         
|   3 |   TABLE ACCESS FULL| T2   |     3 |    15 |     3   (0)| 00:00:01 |                         
---------------------------------------------------------------------------                         
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   1 - access("T1"."COL2"="T2"."COL2"(+))                                                           
                                                                                                    
Note                                                                                                
-----                                                                                               
   - dynamic sampling used for this statement (level=2)                                             


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
         15  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        594  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          3  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.col1, t1.col2, t2.col3
  2  	from t1
  3  	left outer join t2
  4* 	on ( t1.col2 = t2.col2 )
SCOTT@orcl >/

      COL1 C CO                                                                                     
---------- - --                                                                                     
         1 A A2                                                                                     
         2 B B2                                                                                     
         3 C                                                                                        


执行计划
----------------------------------------------------------                                          
Plan hash value: 1823443478                                                                         
                                                                                                    
---------------------------------------------------------------------------                         
| Id  | Operation          | Name | Rows  | Bytes | Cost (%CPU)| Time     |                         
---------------------------------------------------------------------------                         
|   0 | SELECT STATEMENT   |      |     3 |    60 |     7  (15)| 00:00:01 |                         
|*  1 |  HASH JOIN OUTER   |      |     3 |    60 |     7  (15)| 00:00:01 |                         
|   2 |   TABLE ACCESS FULL| T1   |     3 |    45 |     3   (0)| 00:00:01 |                         
|   3 |   TABLE ACCESS FULL| T2   |     3 |    15 |     3   (0)| 00:00:01 |                         
---------------------------------------------------------------------------                         
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   1 - access("T1"."COL2"="T2"."COL2"(+))                                                           
                                                                                                    
Note                                                                                                
-----                                                                                               
   - dynamic sampling used for this statement (level=2)                                             


统计信息
----------------------------------------------------------                                          
          7  recursive calls                                                                        
          0  db block gets                                                                          
         31  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        594  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          3  rows processed                                                                         

SCOTT@orcl >
SCOTT@orcl >get D:\git\db\sqlOptimize\1_2_4.sql
  1  create table t1( col1 number, col2 varchar2( 1 ) )
  2  create table t2( col2 varchar2( 1 ), col3 varchar2( 2 ) )
  3  insert into t1 values( 1, 'A' )
  4  insert into t1 values( 2, 'B' )
  5  insert into t1 values( 3, 'C' )
  6  insert into t2 values( 'A', 'A2' )
  7  insert into t2 values( 'B', 'B2' )
  8  insert into t2 values( 'D', 'D2' )
  9  -- inner join
 10  select t1.col1, t1.col2, t2.col3
 11  	from t1, t2
 12  	where t1.col2 = t2.col2
 13  select t1.col1, t1.col2, t2.col3
 14  	from t1
 15  	inner join t2
 16  	on ( t1.col2 = t2.col3 )
 17  -- outer join
 18  select t1.col1, t1.col2, t2.col3
 19  	from t1
 20  	left outer join t2
 21* 	on ( t1.col2 = t2.col2 )
 22  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.col1, t1.col2, t2.col3
  2  	from t1
  3  	left outer join t2
  4* 	on ( t1.col2 = t2.col2 )
SCOTT@orcl >/

      COL1 C CO                                                                                     
---------- - --                                                                                     
         1 A A2                                                                                     
         2 B B2                                                                                     
         3 C                                                                                        


执行计划
----------------------------------------------------------                                          
Plan hash value: 1823443478                                                                         
                                                                                                    
---------------------------------------------------------------------------                         
| Id  | Operation          | Name | Rows  | Bytes | Cost (%CPU)| Time     |                         
---------------------------------------------------------------------------                         
|   0 | SELECT STATEMENT   |      |     3 |    60 |     7  (15)| 00:00:01 |                         
|*  1 |  HASH JOIN OUTER   |      |     3 |    60 |     7  (15)| 00:00:01 |                         
|   2 |   TABLE ACCESS FULL| T1   |     3 |    45 |     3   (0)| 00:00:01 |                         
|   3 |   TABLE ACCESS FULL| T2   |     3 |    15 |     3   (0)| 00:00:01 |                         
---------------------------------------------------------------------------                         
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   1 - access("T1"."COL2"="T2"."COL2"(+))                                                           
                                                                                                    
Note                                                                                                
-----                                                                                               
   - dynamic sampling used for this statement (level=2)                                             


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
         15  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        594  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          3  rows processed                                                                         

SCOTT@orcl >get D:\git\db\sqlOptimize\1_2_4.sql
  1  create table t1( col1 number, col2 varchar2( 1 ) )
  2  create table t2( col2 varchar2( 1 ), col3 varchar2( 2 ) )
  3  insert into t1 values( 1, 'A' )
  4  insert into t1 values( 2, 'B' )
  5  insert into t1 values( 3, 'C' )
  6  insert into t2 values( 'A', 'A2' )
  7  insert into t2 values( 'B', 'B2' )
  8  insert into t2 values( 'D', 'D2' )
  9  -- inner join
 10  select t1.col1, t1.col2, t2.col3
 11  	from t1, t2
 12  	where t1.col2 = t2.col2
 13  select t1.col1, t1.col2, t2.col3
 14  	from t1
 15  	inner join t2
 16  	on ( t1.col2 = t2.col3 )
 17  -- left outer join
 18  select t1.col1, t1.col2, t2.col3
 19  	from t1
 20  	left outer join t2
 21  	on ( t1.col2 = t2.col2 )
 22  -- right outer join
 23  select t1.col1, t1.col2, t2.col3
 24  	from t1
 25  	right outer join t2
 26* 	on ( t1.col2 = t2.col2 )
 27  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.col1, t1.col2, t2.col3
  2  	from t1
  3  	right outer join t2
  4* 	on ( t1.col2 = t2.col2 )
SCOTT@orcl >/

      COL1 C CO                                                                                     
---------- - --                                                                                     
         1 A A2                                                                                     
         2 B B2                                                                                     
             D2                                                                                     


执行计划
----------------------------------------------------------                                          
Plan hash value: 1426054487                                                                         
                                                                                                    
---------------------------------------------------------------------------                         
| Id  | Operation          | Name | Rows  | Bytes | Cost (%CPU)| Time     |                         
---------------------------------------------------------------------------                         
|   0 | SELECT STATEMENT   |      |     3 |    60 |     7  (15)| 00:00:01 |                         
|*  1 |  HASH JOIN OUTER   |      |     3 |    60 |     7  (15)| 00:00:01 |                         
|   2 |   TABLE ACCESS FULL| T2   |     3 |    15 |     3   (0)| 00:00:01 |                         
|   3 |   TABLE ACCESS FULL| T1   |     3 |    45 |     3   (0)| 00:00:01 |                         
---------------------------------------------------------------------------                         
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   1 - access("T1"."COL2"(+)="T2"."COL2")                                                           
                                                                                                    
Note                                                                                                
-----                                                                                               
   - dynamic sampling used for this statement (level=2)                                             


统计信息
----------------------------------------------------------                                          
          7  recursive calls                                                                        
          0  db block gets                                                                          
         31  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        593  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          3  rows processed                                                                         

SCOTT@orcl >get D:\git\db\sqlOptimize\1_2_4.sql
  1  create table t1( col1 number, col2 varchar2( 1 ) )
  2  create table t2( col2 varchar2( 1 ), col3 varchar2( 2 ) )
  3  insert into t1 values( 1, 'A' )
  4  insert into t1 values( 2, 'B' )
  5  insert into t1 values( 3, 'C' )
  6  insert into t2 values( 'A', 'A2' )
  7  insert into t2 values( 'B', 'B2' )
  8  insert into t2 values( 'D', 'D2' )
  9  -- inner join
 10  select t1.col1, t1.col2, t2.col3
 11  	from t1, t2
 12  	where t1.col2 = t2.col2
 13  select t1.col1, t1.col2, t2.col3
 14  	from t1
 15  	inner join t2
 16  	on ( t1.col2 = t2.col3 )
 17  -- left outer join
 18  select t1.col1, t1.col2, t2.col3
 19  	from t1
 20  	left outer join t2
 21  	on ( t1.col2 = t2.col2 )
 22  -- right outer join
 23  select t1.col1, t1.col2, t2.col3
 24  	from t1
 25  	right outer join t2
 26  	on ( t1.col2 = t2.col2 )
 27  -- full outer join
 28  select t1.col1, t1.col2, t2.col3
 29  	from t1
 30  	full outer join t2
 31* 	on ( t1.col2 = t2.col2 )
 32  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.col1, t1.col2, t2.col3
  2  	from t1
  3  	full outer join t2
  4* 	on ( t1.col2 = t2.col2 )
SCOTT@orcl >/

      COL1 C CO                                                                                     
---------- - --                                                                                     
         1 A A2                                                                                     
         2 B B2                                                                                     
             D2                                                                                     
         3 C                                                                                        


执行计划
----------------------------------------------------------                                          
Plan hash value: 53297166                                                                           
                                                                                                    
----------------------------------------------------------------------------------                  
| Id  | Operation             | Name     | Rows  | Bytes | Cost (%CPU)| Time     |                  
----------------------------------------------------------------------------------                  
|   0 | SELECT STATEMENT      |          |     3 |    54 |     7  (15)| 00:00:01 |                  
|   1 |  VIEW                 | VW_FOJ_0 |     3 |    54 |     7  (15)| 00:00:01 |                  
|*  2 |   HASH JOIN FULL OUTER|          |     3 |    60 |     7  (15)| 00:00:01 |                  
|   3 |    TABLE ACCESS FULL  | T1       |     3 |    45 |     3   (0)| 00:00:01 |                  
|   4 |    TABLE ACCESS FULL  | T2       |     3 |    15 |     3   (0)| 00:00:01 |                  
----------------------------------------------------------------------------------                  
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   2 - access("T1"."COL2"="T2"."COL2")                                                              
                                                                                                    
Note                                                                                                
-----                                                                                               
   - dynamic sampling used for this statement (level=2)                                             


统计信息
----------------------------------------------------------                                          
          7  recursive calls                                                                        
          0  db block gets                                                                          
         31  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        604  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          4  rows processed                                                                         

SCOTT@orcl >set null NULL;
SCOTT@orcl >/

      COL1 C CO                                                                                     
---------- - --                                                                                     
         1 A A2                                                                                     
         2 B B2                                                                                     
NULL       N D2                                                                                     
           U                                                                                        
           L                                                                                        
           L                                                                                        
                                                                                                    
         3 C NU                                                                                     
             LL                                                                                     
                                                                                                    


执行计划
----------------------------------------------------------                                          
Plan hash value: 53297166                                                                           
                                                                                                    
----------------------------------------------------------------------------------                  
| Id  | Operation             | Name     | Rows  | Bytes | Cost (%CPU)| Time     |                  
----------------------------------------------------------------------------------                  
|   0 | SELECT STATEMENT      |          |     3 |    54 |     7  (15)| 00:00:01 |                  
|   1 |  VIEW                 | VW_FOJ_0 |     3 |    54 |     7  (15)| 00:00:01 |                  
|*  2 |   HASH JOIN FULL OUTER|          |     3 |    60 |     7  (15)| 00:00:01 |                  
|   3 |    TABLE ACCESS FULL  | T1       |     3 |    45 |     3   (0)| 00:00:01 |                  
|   4 |    TABLE ACCESS FULL  | T2       |     3 |    15 |     3   (0)| 00:00:01 |                  
----------------------------------------------------------------------------------                  
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   2 - access("T1"."COL2"="T2"."COL2")                                                              
                                                                                                    
Note                                                                                                
-----                                                                                               
   - dynamic sampling used for this statement (level=2)                                             


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
         15  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        604  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          4  rows processed                                                                         

SCOTT@orcl >
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.col1, t1.col2, t2.col3
  2  	from t1
  3  	full outer join t2
  4* 	on ( t1.col2 = t2.col2 )
SCOTT@orcl >
SCOTT@orcl >/

      COL1 C CO                                                                                     
---------- - --                                                                                     
         1 A A2                                                                                     
         2 B B2                                                                                     
NULL       N D2                                                                                     
           U                                                                                        
           L                                                                                        
           L                                                                                        
                                                                                                    
         3 C NU                                                                                     
             LL                                                                                     
                                                                                                    


执行计划
----------------------------------------------------------                                          
Plan hash value: 53297166                                                                           
                                                                                                    
----------------------------------------------------------------------------------                  
| Id  | Operation             | Name     | Rows  | Bytes | Cost (%CPU)| Time     |                  
----------------------------------------------------------------------------------                  
|   0 | SELECT STATEMENT      |          |     3 |    54 |     7  (15)| 00:00:01 |                  
|   1 |  VIEW                 | VW_FOJ_0 |     3 |    54 |     7  (15)| 00:00:01 |                  
|*  2 |   HASH JOIN FULL OUTER|          |     3 |    60 |     7  (15)| 00:00:01 |                  
|   3 |    TABLE ACCESS FULL  | T1       |     3 |    45 |     3   (0)| 00:00:01 |                  
|   4 |    TABLE ACCESS FULL  | T2       |     3 |    15 |     3   (0)| 00:00:01 |                  
----------------------------------------------------------------------------------                  
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   2 - access("T1"."COL2"="T2"."COL2")                                                              
                                                                                                    
Note                                                                                                
-----                                                                                               
   - dynamic sampling used for this statement (level=2)                                             


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
         15  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        604  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          4  rows processed                                                                         

SCOTT@orcl >select * from t1;

      COL1 C                                                                                        
---------- -                                                                                        
         1 A                                                                                        
         2 B                                                                                        
         3 C                                                                                        


执行计划
----------------------------------------------------------                                          
Plan hash value: 3617692013                                                                         
                                                                                                    
--------------------------------------------------------------------------                          
| Id  | Operation         | Name | Rows  | Bytes | Cost (%CPU)| Time     |                          
--------------------------------------------------------------------------                          
|   0 | SELECT STATEMENT  |      |     3 |    45 |     3   (0)| 00:00:01 |                          
|   1 |  TABLE ACCESS FULL| T1   |     3 |    45 |     3   (0)| 00:00:01 |                          
--------------------------------------------------------------------------                          
                                                                                                    
Note                                                                                                
-----                                                                                               
   - dynamic sampling used for this statement (level=2)                                             


统计信息
----------------------------------------------------------                                          
          4  recursive calls                                                                        
          0  db block gets                                                                          
         16  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        537  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          3  rows processed                                                                         

SCOTT@orcl >commit;

提交完成。

SCOTT@orcl >show null
null "NULL"
SCOTT@orcl >set null
SP2-0311: 未找到所需的字符串
SCOTT@orcl >set null ''
SCOTT@orcl >show null
null ""
SCOTT@orcl >select * from t1;

      COL1 C                                                                                        
---------- -                                                                                        
         1 A                                                                                        
         2 B                                                                                        
         3 C                                                                                        


执行计划
----------------------------------------------------------                                          
Plan hash value: 3617692013                                                                         
                                                                                                    
--------------------------------------------------------------------------                          
| Id  | Operation         | Name | Rows  | Bytes | Cost (%CPU)| Time     |                          
--------------------------------------------------------------------------                          
|   0 | SELECT STATEMENT  |      |     3 |    45 |     3   (0)| 00:00:01 |                          
|   1 |  TABLE ACCESS FULL| T1   |     3 |    45 |     3   (0)| 00:00:01 |                          
--------------------------------------------------------------------------                          
                                                                                                    
Note                                                                                                
-----                                                                                               
   - dynamic sampling used for this statement (level=2)                                             


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
          8  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        537  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          3  rows processed                                                                         

SCOTT@orcl >get D:\git\db\sqlOptimize\1_2_4.sql
  1  create table t1( col1 number, col2 varchar2( 1 ) )
  2  create table t2( col2 varchar2( 1 ), col3 varchar2( 2 ) )
  3  insert into t1 values( 1, 'A' )
  4  insert into t1 values( 2, 'B' )
  5  insert into t1 values( 3, 'C' )
  6  insert into t2 values( 'A', 'A2' )
  7  insert into t2 values( 'B', 'B2' )
  8  insert into t2 values( 'D', 'D2' )
  9  -- inner join
 10  select t1.col1, t1.col2, t2.col3
 11  	from t1, t2
 12  	where t1.col2 = t2.col2
 13  select t1.col1, t1.col2, t2.col3
 14  	from t1
 15  	inner join t2
 16  	on ( t1.col2 = t2.col3 )
 17  -- left outer join
 18  select t1.col1, t1.col2, t2.col3
 19  	from t1
 20  	left outer join t2
 21  	on ( t1.col2 = t2.col2 )
 22  -- right outer join
 23  select t1.col1, t1.col2, t2.col3
 24  	from t1
 25  	right outer join t2
 26  	on ( t1.col2 = t2.col2 )
 27  -- full outer join
 28  select t1.col1, t1.col2, t2.col3
 29  	from t1
 30  	full outer join t2
 31* 	on ( t1.col2 = t2.col2 )
 32  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.col1, t1.col2, t2.col3
  2  	from t1
  3  	full outer join t2
  4* 	on ( t1.col2 = t2.col2 )
SCOTT@orcl >/

      COL1 C CO                                                                                     
---------- - --                                                                                     
         1 A A2                                                                                     
         2 B B2                                                                                     
             D2                                                                                     
         3 C                                                                                        


执行计划
----------------------------------------------------------                                          
Plan hash value: 53297166                                                                           
                                                                                                    
----------------------------------------------------------------------------------                  
| Id  | Operation             | Name     | Rows  | Bytes | Cost (%CPU)| Time     |                  
----------------------------------------------------------------------------------                  
|   0 | SELECT STATEMENT      |          |     3 |    54 |     7  (15)| 00:00:01 |                  
|   1 |  VIEW                 | VW_FOJ_0 |     3 |    54 |     7  (15)| 00:00:01 |                  
|*  2 |   HASH JOIN FULL OUTER|          |     3 |    60 |     7  (15)| 00:00:01 |                  
|   3 |    TABLE ACCESS FULL  | T1       |     3 |    45 |     3   (0)| 00:00:01 |                  
|   4 |    TABLE ACCESS FULL  | T2       |     3 |    15 |     3   (0)| 00:00:01 |                  
----------------------------------------------------------------------------------                  
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   2 - access("T1"."COL2"="T2"."COL2")                                                              
                                                                                                    
Note                                                                                                
-----                                                                                               
   - dynamic sampling used for this statement (level=2)                                             


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
         15  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        604  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          4  rows processed                                                                         

SCOTT@orcl >set null '-'
SCOTT@orcl >/

      COL1 C CO                                                                                     
---------- - --                                                                                     
         1 A A2                                                                                     
         2 B B2                                                                                     
-          - D2                                                                                     
         3 C -                                                                                      


执行计划
----------------------------------------------------------                                          
Plan hash value: 53297166                                                                           
                                                                                                    
----------------------------------------------------------------------------------                  
| Id  | Operation             | Name     | Rows  | Bytes | Cost (%CPU)| Time     |                  
----------------------------------------------------------------------------------                  
|   0 | SELECT STATEMENT      |          |     3 |    54 |     7  (15)| 00:00:01 |                  
|   1 |  VIEW                 | VW_FOJ_0 |     3 |    54 |     7  (15)| 00:00:01 |                  
|*  2 |   HASH JOIN FULL OUTER|          |     3 |    60 |     7  (15)| 00:00:01 |                  
|   3 |    TABLE ACCESS FULL  | T1       |     3 |    45 |     3   (0)| 00:00:01 |                  
|   4 |    TABLE ACCESS FULL  | T2       |     3 |    15 |     3   (0)| 00:00:01 |                  
----------------------------------------------------------------------------------                  
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   2 - access("T1"."COL2"="T2"."COL2")                                                              
                                                                                                    
Note                                                                                                
-----                                                                                               
   - dynamic sampling used for this statement (level=2)                                             


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
         15  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        604  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          4  rows processed                                                                         

SCOTT@orcl >set null ''
SCOTT@orcl >/

      COL1 C CO                                                                                     
---------- - --                                                                                     
         1 A A2                                                                                     
         2 B B2                                                                                     
             D2                                                                                     
         3 C                                                                                        


执行计划
----------------------------------------------------------                                          
Plan hash value: 53297166                                                                           
                                                                                                    
----------------------------------------------------------------------------------                  
| Id  | Operation             | Name     | Rows  | Bytes | Cost (%CPU)| Time     |                  
----------------------------------------------------------------------------------                  
|   0 | SELECT STATEMENT      |          |     3 |    54 |     7  (15)| 00:00:01 |                  
|   1 |  VIEW                 | VW_FOJ_0 |     3 |    54 |     7  (15)| 00:00:01 |                  
|*  2 |   HASH JOIN FULL OUTER|          |     3 |    60 |     7  (15)| 00:00:01 |                  
|   3 |    TABLE ACCESS FULL  | T1       |     3 |    45 |     3   (0)| 00:00:01 |                  
|   4 |    TABLE ACCESS FULL  | T2       |     3 |    15 |     3   (0)| 00:00:01 |                  
----------------------------------------------------------------------------------                  
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   2 - access("T1"."COL2"="T2"."COL2")                                                              
                                                                                                    
Note                                                                                                
-----                                                                                               
   - dynamic sampling used for this statement (level=2)                                             


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
         15  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        604  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          4  rows processed                                                                         

SCOTT@orcl >select *
  2  from emp t1, dept, t2
  3  where t1.deptno = t2.deptno;
where t1.deptno = t2.deptno
                  *
第 3 行出现错误: 
ORA-00904: "T2"."DEPTNO": 标识符无效 


SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select *
  2  from emp t1, dept t2
  3* where t1.deptno = t2.deptno
SCOTT@orcl >/

EMPNO ENAME      JOB              MGR HIREDATE                SAL       COMM     DEPTNO     DEPTNO  
----- ---------- --------- ---------- -------------- ------------ ---------- ---------- ----------  
DNAME          LOC                                                                                  
-------------- -------------                                                                        
 7782 CLARK      MANAGER         7839 09-6月 -81        $2,450.00                    10         10  
ACCOUNTING     NEW YORK                                                                             
                                                                                                    
 7839 KING       PRESIDENT            17-11月-81        $5,000.00                    10         10  
ACCOUNTING     NEW YORK                                                                             
                                                                                                    
 7934 MILLER     CLERK           7782 23-1月 -82        $1,300.00                    10         10  
ACCOUNTING     NEW YORK                                                                             
                                                                                                    

EMPNO ENAME      JOB              MGR HIREDATE                SAL       COMM     DEPTNO     DEPTNO  
----- ---------- --------- ---------- -------------- ------------ ---------- ---------- ----------  
DNAME          LOC                                                                                  
-------------- -------------                                                                        
 7566 JONES      MANAGER         7839 02-4月 -81        $2,975.00                    20         20  
RESEARCH       DALLAS                                                                               
                                                                                                    
 7902 FORD       ANALYST         7566 03-12月-81        $3,000.00                    20         20  
RESEARCH       DALLAS                                                                               
                                                                                                    
 7876 ADAMS      CLERK           7788 23-5月 -87        $1,100.00                    20         20  
RESEARCH       DALLAS                                                                               
                                                                                                    

EMPNO ENAME      JOB              MGR HIREDATE                SAL       COMM     DEPTNO     DEPTNO  
----- ---------- --------- ---------- -------------- ------------ ---------- ---------- ----------  
DNAME          LOC                                                                                  
-------------- -------------                                                                        
 7369 SMITH      CLERK           7902 17-12月-80          $800.00                    20         20  
RESEARCH       DALLAS                                                                               
                                                                                                    
 7788 SCOTT      ANALYST         7566 19-4月 -87        $3,000.00                    20         20  
RESEARCH       DALLAS                                                                               
                                                                                                    
 7521 WARD       SALESMAN        7698 22-2月 -81        $1,250.00        500         30         30  
SALES          CHICAGO                                                                              
                                                                                                    

EMPNO ENAME      JOB              MGR HIREDATE                SAL       COMM     DEPTNO     DEPTNO  
----- ---------- --------- ---------- -------------- ------------ ---------- ---------- ----------  
DNAME          LOC                                                                                  
-------------- -------------                                                                        
 7844 TURNER     SALESMAN        7698 08-9月 -81        $1,500.00          0         30         30  
SALES          CHICAGO                                                                              
                                                                                                    
 7499 ALLEN      SALESMAN        7698 20-2月 -81        $1,600.00        300         30         30  
SALES          CHICAGO                                                                              
                                                                                                    
 7900 JAMES      CLERK           7698 03-12月-81          $950.00                    30         30  
SALES          CHICAGO                                                                              
                                                                                                    

EMPNO ENAME      JOB              MGR HIREDATE                SAL       COMM     DEPTNO     DEPTNO  
----- ---------- --------- ---------- -------------- ------------ ---------- ---------- ----------  
DNAME          LOC                                                                                  
-------------- -------------                                                                        
 7698 BLAKE      MANAGER         7839 01-5月 -81        $2,850.00                    30         30  
SALES          CHICAGO                                                                              
                                                                                                    
 7654 MARTIN     SALESMAN        7698 28-9月 -81        $1,250.00       1400         30         30  
SALES          CHICAGO                                                                              
                                                                                                    

已选择14行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 844388907                                                                          
                                                                                                    
----------------------------------------------------------------------------------------            
| Id  | Operation                    | Name    | Rows  | Bytes | Cost (%CPU)| Time     |            
----------------------------------------------------------------------------------------            
|   0 | SELECT STATEMENT             |         |    14 |   812 |     6  (17)| 00:00:01 |            
|   1 |  MERGE JOIN                  |         |    14 |   812 |     6  (17)| 00:00:01 |            
|   2 |   TABLE ACCESS BY INDEX ROWID| DEPT    |     4 |    80 |     2   (0)| 00:00:01 |            
|   3 |    INDEX FULL SCAN           | PK_DEPT |     4 |       |     1   (0)| 00:00:01 |            
|*  4 |   SORT JOIN                  |         |    14 |   532 |     4  (25)| 00:00:01 |            
|   5 |    TABLE ACCESS FULL         | EMP     |    14 |   532 |     3   (0)| 00:00:01 |            
----------------------------------------------------------------------------------------            
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   4 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                          
       filter("T1"."DEPTNO"="T2"."DEPTNO")                                                          


统计信息
----------------------------------------------------------                                          
        353  recursive calls                                                                        
          0  db block gets                                                                          
         79  consistent gets                                                                        
         10  physical reads                                                                         
          0  redo size                                                                              
       1704  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          5  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >desc user_index;
ERROR:
ORA-04043: 对象 user_index 不存在 


SCOTT@orcl >desc user_indexs
ERROR:
ORA-04043: 对象 user_indexs 不存在 


SCOTT@orcl >desc user_indexes
 名称                                                  是否为空? 类型
 ----------------------------------------------------- -------- ------------------------------------
 INDEX_NAME                                            NOT NULL VARCHAR2(30)
 INDEX_TYPE                                                     VARCHAR2(27)
 TABLE_OWNER                                           NOT NULL VARCHAR2(30)
 TABLE_NAME                                            NOT NULL VARCHAR2(30)
 TABLE_TYPE                                                     VARCHAR2(11)
 UNIQUENESS                                                     VARCHAR2(9)
 COMPRESSION                                                    VARCHAR2(8)
 PREFIX_LENGTH                                                  NUMBER
 TABLESPACE_NAME                                                VARCHAR2(30)
 INI_TRANS                                                      NUMBER
 MAX_TRANS                                                      NUMBER
 INITIAL_EXTENT                                                 NUMBER
 NEXT_EXTENT                                                    NUMBER
 MIN_EXTENTS                                                    NUMBER
 MAX_EXTENTS                                                    NUMBER
 PCT_INCREASE                                                   NUMBER
 PCT_THRESHOLD                                                  NUMBER
 INCLUDE_COLUMN                                                 NUMBER
 FREELISTS                                                      NUMBER
 FREELIST_GROUPS                                                NUMBER
 PCT_FREE                                                       NUMBER
 LOGGING                                                        VARCHAR2(3)
 BLEVEL                                                         NUMBER
 LEAF_BLOCKS                                                    NUMBER
 DISTINCT_KEYS                                                  NUMBER
 AVG_LEAF_BLOCKS_PER_KEY                                        NUMBER
 AVG_DATA_BLOCKS_PER_KEY                                        NUMBER
 CLUSTERING_FACTOR                                              NUMBER
 STATUS                                                         VARCHAR2(8)
 NUM_ROWS                                                       NUMBER
 SAMPLE_SIZE                                                    NUMBER
 LAST_ANALYZED                                                  DATE
 DEGREE                                                         VARCHAR2(40)
 INSTANCES                                                      VARCHAR2(40)
 PARTITIONED                                                    VARCHAR2(3)
 TEMPORARY                                                      VARCHAR2(1)
 GENERATED                                                      VARCHAR2(1)
 SECONDARY                                                      VARCHAR2(1)
 BUFFER_POOL                                                    VARCHAR2(7)
 FLASH_CACHE                                                    VARCHAR2(7)
 CELL_FLASH_CACHE                                               VARCHAR2(7)
 USER_STATS                                                     VARCHAR2(3)
 DURATION                                                       VARCHAR2(15)
 PCT_DIRECT_ACCESS                                              NUMBER
 ITYP_OWNER                                                     VARCHAR2(30)
 ITYP_NAME                                                      VARCHAR2(30)
 PARAMETERS                                                     VARCHAR2(1000)
 GLOBAL_STATS                                                   VARCHAR2(3)
 DOMIDX_STATUS                                                  VARCHAR2(12)
 DOMIDX_OPSTATUS                                                VARCHAR2(6)
 FUNCIDX_STATUS                                                 VARCHAR2(8)
 JOIN_INDEX                                                     VARCHAR2(3)
 IOT_REDUNDANT_PKEY_ELIM                                        VARCHAR2(3)
 DROPPED                                                        VARCHAR2(3)
 VISIBILITY                                                     VARCHAR2(9)
 DOMIDX_MANAGEMENT                                              VARCHAR2(14)
 SEGMENT_CREATED                                                VARCHAR2(3)

SCOTT@orcl >desc user_indexs
ERROR:
ORA-04043: 对象 user_indexs 不存在 


SCOTT@orcl >select table_name, index_name
  2  from user_indexes;

TABLE_NAME                   INDEX_NAME                                                             
---------------------------- ------------------------------                                         
VENDORS                      PK_VENDORS                                                             
PRODUCTS                     PK_PRODUCTS                                                            
ORDERS                       PK_ORDERS                                                              
ORDERITEMS                   PK_ORDERITEMS                                                          
EMP                          PK_EMP                                                                 
DEPT                         PK_DEPT                                                                
CUSTOMERS                    PK_CUSTOMERS                                                           

已选择7行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 277916999                                                                          
                                                                                                    
----------------------------------------------------------------------------------------------      
| Id  | Operation                          | Name    | Rows  | Bytes | Cost (%CPU)| Time     |      
----------------------------------------------------------------------------------------------      
|   0 | SELECT STATEMENT                   |         |  2530 |   321K|   734   (2)| 00:00:09 |      
|*  1 |  HASH JOIN RIGHT OUTER             |         |  2530 |   321K|   734   (2)| 00:00:09 |      
|   2 |   INDEX FULL SCAN                  | I_USER2 |    93 |   372 |     1   (0)| 00:00:01 |      
|*  3 |   HASH JOIN OUTER                  |         |  2530 |   311K|   732   (1)| 00:00:09 |      
|*  4 |    HASH JOIN                       |         |  2530 |   291K|   674   (2)| 00:00:09 |      
|   5 |     INDEX FULL SCAN                | I_USER2 |    93 |   372 |     1   (0)| 00:00:01 |      
|*  6 |     HASH JOIN                      |         |  2530 |   281K|   672   (1)| 00:00:09 |      
|*  7 |      HASH JOIN RIGHT OUTER         |         |  2530 |   200K|   469   (2)| 00:00:06 |      
|   8 |       TABLE ACCESS FULL            | SEG$    |  5896 | 64856 |    48   (0)| 00:00:01 |      
|*  9 |       HASH JOIN RIGHT OUTER        |         |  2530 |   172K|   420   (1)| 00:00:06 |      
|  10 |        TABLE ACCESS FULL           | TS$     |     7 |    21 |     4   (0)| 00:00:01 |      
|  11 |        NESTED LOOPS                |         |       |       |            |          |      
|  12 |         NESTED LOOPS               |         |  2530 |   165K|   416   (1)| 00:00:05 |      
|* 13 |          TABLE ACCESS FULL         | OBJ$    |  2530 | 91080 |   250   (2)| 00:00:03 |      
|* 14 |          INDEX UNIQUE SCAN         | I_IND1  |     1 |       |     0   (0)| 00:00:01 |      
|* 15 |         TABLE ACCESS BY INDEX ROWID| IND$    |     1 |    31 |     1   (0)| 00:00:01 |      
|  16 |      INDEX FAST FULL SCAN          | I_OBJ2  | 73380 |  2364K|   202   (0)| 00:00:03 |      
|  17 |    INDEX FAST FULL SCAN            | I_OBJ1  | 73380 |   573K|    58   (0)| 00:00:01 |      
----------------------------------------------------------------------------------------------      
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   1 - access("ITO"."OWNER#"="ITU"."USER#"(+))                                                      
   3 - access("I"."INDMETHOD#"="ITO"."OBJ#"(+))                                                     
   4 - access("IO"."OWNER#"="IU"."USER#")                                                           
   6 - access("I"."BO#"="IO"."OBJ#")                                                                
   7 - access("I"."FILE#"="S"."FILE#"(+) AND "I"."BLOCK#"="S"."BLOCK#"(+) AND                       
              "I"."TS#"="S"."TS#"(+))                                                               
   9 - access("I"."TS#"="TS"."TS#"(+))                                                              
  13 - filter("O"."OWNER#"=USERENV('SCHEMAID') AND BITAND("O"."FLAGS",128)=0)                       
  14 - access("O"."OBJ#"="I"."OBJ#")                                                                
  15 - filter(BITAND("I"."FLAGS",4096)=0 AND ("I"."TYPE#"=1 OR "I"."TYPE#"=2 OR                     
              "I"."TYPE#"=3 OR "I"."TYPE#"=4 OR "I"."TYPE#"=6 OR "I"."TYPE#"=7 OR "I"."TYPE#"=8 OR  
              "I"."TYPE#"=9))                                                                       


统计信息
----------------------------------------------------------                                          
        354  recursive calls                                                                        
          0  db block gets                                                                          
       2191  consistent gets                                                                        
        192  physical reads                                                                         
          0  redo size                                                                              
        675  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          6  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          7  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1* create index inx_dep on emp( deptno )
SCOTT@orcl >/

索引已创建。

SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.empno, t1.ename, t2.dname
  2  	from emp t1
  3  	inner join dept t2
  4* 	on ( t1.deptno = t2.deptno or t2.deptno = 20)
SCOTT@orcl >/

EMPNO ENAME      DNAME                                                                              
----- ---------- --------------                                                                     
 7369 SMITH      RESEARCH                                                                           
 7499 ALLEN      RESEARCH                                                                           
 7521 WARD       RESEARCH                                                                           
 7566 JONES      RESEARCH                                                                           
 7654 MARTIN     RESEARCH                                                                           
 7698 BLAKE      RESEARCH                                                                           
 7782 CLARK      RESEARCH                                                                           
 7788 SCOTT      RESEARCH                                                                           
 7839 KING       RESEARCH                                                                           
 7844 TURNER     RESEARCH                                                                           
 7876 ADAMS      RESEARCH                                                                           

EMPNO ENAME      DNAME                                                                              
----- ---------- --------------                                                                     
 7900 JAMES      RESEARCH                                                                           
 7902 FORD       RESEARCH                                                                           
 7934 MILLER     RESEARCH                                                                           
 7782 CLARK      ACCOUNTING                                                                         
 7839 KING       ACCOUNTING                                                                         
 7934 MILLER     ACCOUNTING                                                                         
 7521 WARD       SALES                                                                              
 7844 TURNER     SALES                                                                              
 7499 ALLEN      SALES                                                                              
 7900 JAMES      SALES                                                                              
 7698 BLAKE      SALES                                                                              

EMPNO ENAME      DNAME                                                                              
----- ---------- --------------                                                                     
 7654 MARTIN     SALES                                                                              

已选择23行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 1487924614                                                                         
                                                                                                    
-----------------------------------------------------------------------------------------           
| Id  | Operation                     | Name    | Rows  | Bytes | Cost (%CPU)| Time     |           
-----------------------------------------------------------------------------------------           
|   0 | SELECT STATEMENT              |         |    28 |   728 |    10  (10)| 00:00:01 |           
|   1 |  CONCATENATION                |         |       |       |            |          |           
|   2 |   NESTED LOOPS                |         |    14 |   364 |     4   (0)| 00:00:01 |           
|   3 |    TABLE ACCESS BY INDEX ROWID| DEPT    |     1 |    13 |     1   (0)| 00:00:01 |           
|*  4 |     INDEX UNIQUE SCAN         | PK_DEPT |     1 |       |     0   (0)| 00:00:01 |           
|   5 |    TABLE ACCESS FULL          | EMP     |    14 |   182 |     3   (0)| 00:00:01 |           
|   6 |   MERGE JOIN                  |         |    14 |   364 |     6  (17)| 00:00:01 |           
|   7 |    TABLE ACCESS BY INDEX ROWID| DEPT    |     3 |    39 |     2   (0)| 00:00:01 |           
|*  8 |     INDEX FULL SCAN           | PK_DEPT |     4 |       |     1   (0)| 00:00:01 |           
|*  9 |    SORT JOIN                  |         |    14 |   182 |     4  (25)| 00:00:01 |           
|  10 |     TABLE ACCESS FULL         | EMP     |    14 |   182 |     3   (0)| 00:00:01 |           
-----------------------------------------------------------------------------------------           
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   4 - access("T2"."DEPTNO"=20)                                                                     
   8 - filter(LNNVL("T2"."DEPTNO"=20))                                                              
   9 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                          
       filter("T1"."DEPTNO"="T2"."DEPTNO")                                                          


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          0  db block gets                                                                          
         21  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
       1066  bytes sent via SQL*Net to client                                                       
        426  bytes received via SQL*Net from client                                                 
          3  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         23  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select table_name, index_name
  2* from user_indexes
SCOTT@orcl >
SCOTT@orcl >
SCOTT@orcl >
SCOTT@orcl >
SCOTT@orcl >
SCOTT@orcl >
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select table_name, index_name
  2* from user_indexes
SCOTT@orcl >
SCOTT@orcl >ed
SP2-0107: 无须保存。
SCOTT@orcl >se
SP2-0042: 未知命令 "se" - 其余行忽略。
SCOTT@orcl >ed
SP2-0107: 无须保存。
SCOTT@orcl >show suer
SP2-0158: 未知的 SHOW 选项 "suer"
SCOTT@orcl >show user
USER 为 "SCOTT"
SCOTT@orcl >ed
SP2-0107: 无须保存。
SCOTT@orcl >select * from emp
  2  /

EMPNO ENAME      JOB              MGR HIREDATE                SAL       COMM     DEPTNO             
----- ---------- --------- ---------- -------------- ------------ ---------- ----------             
 7369 SMITH      CLERK           7902 17-12月-80          $800.00                    20             
 7499 ALLEN      SALESMAN        7698 20-2月 -81        $1,600.00        300         30             
 7521 WARD       SALESMAN        7698 22-2月 -81        $1,250.00        500         30             
 7566 JONES      MANAGER         7839 02-4月 -81        $2,975.00                    20             
 7654 MARTIN     SALESMAN        7698 28-9月 -81        $1,250.00       1400         30             
 7698 BLAKE      MANAGER         7839 01-5月 -81        $2,850.00                    30             
 7782 CLARK      MANAGER         7839 09-6月 -81        $2,450.00                    10             
 7788 SCOTT      ANALYST         7566 19-4月 -87        $3,000.00                    20             
 7839 KING       PRESIDENT            17-11月-81        $5,000.00                    10             
 7844 TURNER     SALESMAN        7698 08-9月 -81        $1,500.00          0         30             
 7876 ADAMS      CLERK           7788 23-5月 -87        $1,100.00                    20             

EMPNO ENAME      JOB              MGR HIREDATE                SAL       COMM     DEPTNO             
----- ---------- --------- ---------- -------------- ------------ ---------- ----------             
 7900 JAMES      CLERK           7698 03-12月-81          $950.00                    30             
 7902 FORD       ANALYST         7566 03-12月-81        $3,000.00                    20             
 7934 MILLER     CLERK           7782 23-1月 -82        $1,300.00                    10             

已选择14行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 3956160932                                                                         
                                                                                                    
--------------------------------------------------------------------------                          
| Id  | Operation         | Name | Rows  | Bytes | Cost (%CPU)| Time     |                          
--------------------------------------------------------------------------                          
|   0 | SELECT STATEMENT  |      |    14 |   532 |     3   (0)| 00:00:01 |                          
|   1 |  TABLE ACCESS FULL| EMP  |    14 |   532 |     3   (0)| 00:00:01 |                          
--------------------------------------------------------------------------                          


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          0  db block gets                                                                          
          8  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
       1455  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.empno, t1.ename, t2.dname
  2  from emp t1
  3  	inner join dept t2
  4  on ( t1.deptno = t2.deptno or t2.deptno = 20)
  5* 	/
  6  /
	/
	*
第 5 行出现错误: 
ORA-00933: SQL 命令未正确结束 


SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.empno, t1.ename, t2.dname
  2  from emp t1
  3  	inner join dept t2
  4* on ( t1.deptno = t2.deptno or t2.deptno = 20)
SCOTT@orcl >/

EMPNO ENAME      DNAME                                                                              
----- ---------- --------------                                                                     
 7369 SMITH      RESEARCH                                                                           
 7499 ALLEN      RESEARCH                                                                           
 7521 WARD       RESEARCH                                                                           
 7566 JONES      RESEARCH                                                                           
 7654 MARTIN     RESEARCH                                                                           
 7698 BLAKE      RESEARCH                                                                           
 7782 CLARK      RESEARCH                                                                           
 7788 SCOTT      RESEARCH                                                                           
 7839 KING       RESEARCH                                                                           
 7844 TURNER     RESEARCH                                                                           
 7876 ADAMS      RESEARCH                                                                           

EMPNO ENAME      DNAME                                                                              
----- ---------- --------------                                                                     
 7900 JAMES      RESEARCH                                                                           
 7902 FORD       RESEARCH                                                                           
 7934 MILLER     RESEARCH                                                                           
 7782 CLARK      ACCOUNTING                                                                         
 7839 KING       ACCOUNTING                                                                         
 7934 MILLER     ACCOUNTING                                                                         
 7521 WARD       SALES                                                                              
 7844 TURNER     SALES                                                                              
 7499 ALLEN      SALES                                                                              
 7900 JAMES      SALES                                                                              
 7698 BLAKE      SALES                                                                              

EMPNO ENAME      DNAME                                                                              
----- ---------- --------------                                                                     
 7654 MARTIN     SALES                                                                              

已选择23行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 1487924614                                                                         
                                                                                                    
-----------------------------------------------------------------------------------------           
| Id  | Operation                     | Name    | Rows  | Bytes | Cost (%CPU)| Time     |           
-----------------------------------------------------------------------------------------           
|   0 | SELECT STATEMENT              |         |    28 |   728 |    10  (10)| 00:00:01 |           
|   1 |  CONCATENATION                |         |       |       |            |          |           
|   2 |   NESTED LOOPS                |         |    14 |   364 |     4   (0)| 00:00:01 |           
|   3 |    TABLE ACCESS BY INDEX ROWID| DEPT    |     1 |    13 |     1   (0)| 00:00:01 |           
|*  4 |     INDEX UNIQUE SCAN         | PK_DEPT |     1 |       |     0   (0)| 00:00:01 |           
|   5 |    TABLE ACCESS FULL          | EMP     |    14 |   182 |     3   (0)| 00:00:01 |           
|   6 |   MERGE JOIN                  |         |    14 |   364 |     6  (17)| 00:00:01 |           
|   7 |    TABLE ACCESS BY INDEX ROWID| DEPT    |     3 |    39 |     2   (0)| 00:00:01 |           
|*  8 |     INDEX FULL SCAN           | PK_DEPT |     4 |       |     1   (0)| 00:00:01 |           
|*  9 |    SORT JOIN                  |         |    14 |   182 |     4  (25)| 00:00:01 |           
|  10 |     TABLE ACCESS FULL         | EMP     |    14 |   182 |     3   (0)| 00:00:01 |           
-----------------------------------------------------------------------------------------           
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   4 - access("T2"."DEPTNO"=20)                                                                     
   8 - filter(LNNVL("T2"."DEPTNO"=20))                                                              
   9 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                          
       filter("T1"."DEPTNO"="T2"."DEPTNO")                                                          


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          0  db block gets                                                                          
         21  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
       1066  bytes sent via SQL*Net to client                                                       
        426  bytes received via SQL*Net from client                                                 
          3  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         23  rows processed                                                                         

SCOTT@orcl >select * from emp inner join dept where dept.deptno=20;
select * from emp inner join dept where dept.deptno=20
                                  *
第 1 行出现错误: 
ORA-00905: 缺失关键字 


SCOTT@orcl >select * from emp inner join dept on dept.deptno=20;

EMPNO ENAME      JOB              MGR HIREDATE                SAL       COMM     DEPTNO     DEPTNO  
----- ---------- --------- ---------- -------------- ------------ ---------- ---------- ----------  
DNAME          LOC                                                                                  
-------------- -------------                                                                        
 7369 SMITH      CLERK           7902 17-12月-80          $800.00                    20         20  
RESEARCH       DALLAS                                                                               
                                                                                                    
 7499 ALLEN      SALESMAN        7698 20-2月 -81        $1,600.00        300         30         20  
RESEARCH       DALLAS                                                                               
                                                                                                    
 7521 WARD       SALESMAN        7698 22-2月 -81        $1,250.00        500         30         20  
RESEARCH       DALLAS                                                                               
                                                                                                    

EMPNO ENAME      JOB              MGR HIREDATE                SAL       COMM     DEPTNO     DEPTNO  
----- ---------- --------- ---------- -------------- ------------ ---------- ---------- ----------  
DNAME          LOC                                                                                  
-------------- -------------                                                                        
 7566 JONES      MANAGER         7839 02-4月 -81        $2,975.00                    20         20  
RESEARCH       DALLAS                                                                               
                                                                                                    
 7654 MARTIN     SALESMAN        7698 28-9月 -81        $1,250.00       1400         30         20  
RESEARCH       DALLAS                                                                               
                                                                                                    
 7698 BLAKE      MANAGER         7839 01-5月 -81        $2,850.00                    30         20  
RESEARCH       DALLAS                                                                               
                                                                                                    

EMPNO ENAME      JOB              MGR HIREDATE                SAL       COMM     DEPTNO     DEPTNO  
----- ---------- --------- ---------- -------------- ------------ ---------- ---------- ----------  
DNAME          LOC                                                                                  
-------------- -------------                                                                        
 7782 CLARK      MANAGER         7839 09-6月 -81        $2,450.00                    10         20  
RESEARCH       DALLAS                                                                               
                                                                                                    
 7788 SCOTT      ANALYST         7566 19-4月 -87        $3,000.00                    20         20  
RESEARCH       DALLAS                                                                               
                                                                                                    
 7839 KING       PRESIDENT            17-11月-81        $5,000.00                    10         20  
RESEARCH       DALLAS                                                                               
                                                                                                    

EMPNO ENAME      JOB              MGR HIREDATE                SAL       COMM     DEPTNO     DEPTNO  
----- ---------- --------- ---------- -------------- ------------ ---------- ---------- ----------  
DNAME          LOC                                                                                  
-------------- -------------                                                                        
 7844 TURNER     SALESMAN        7698 08-9月 -81        $1,500.00          0         30         20  
RESEARCH       DALLAS                                                                               
                                                                                                    
 7876 ADAMS      CLERK           7788 23-5月 -87        $1,100.00                    20         20  
RESEARCH       DALLAS                                                                               
                                                                                                    
 7900 JAMES      CLERK           7698 03-12月-81          $950.00                    30         20  
RESEARCH       DALLAS                                                                               
                                                                                                    

EMPNO ENAME      JOB              MGR HIREDATE                SAL       COMM     DEPTNO     DEPTNO  
----- ---------- --------- ---------- -------------- ------------ ---------- ---------- ----------  
DNAME          LOC                                                                                  
-------------- -------------                                                                        
 7902 FORD       ANALYST         7566 03-12月-81        $3,000.00                    20         20  
RESEARCH       DALLAS                                                                               
                                                                                                    
 7934 MILLER     CLERK           7782 23-1月 -82        $1,300.00                    10         20  
RESEARCH       DALLAS                                                                               
                                                                                                    

已选择14行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 568005898                                                                          
                                                                                                    
----------------------------------------------------------------------------------------            
| Id  | Operation                    | Name    | Rows  | Bytes | Cost (%CPU)| Time     |            
----------------------------------------------------------------------------------------            
|   0 | SELECT STATEMENT             |         |    14 |   812 |     4   (0)| 00:00:01 |            
|   1 |  NESTED LOOPS                |         |    14 |   812 |     4   (0)| 00:00:01 |            
|   2 |   TABLE ACCESS BY INDEX ROWID| DEPT    |     1 |    20 |     1   (0)| 00:00:01 |            
|*  3 |    INDEX UNIQUE SCAN         | PK_DEPT |     1 |       |     0   (0)| 00:00:01 |            
|   4 |   TABLE ACCESS FULL          | EMP     |    14 |   532 |     3   (0)| 00:00:01 |            
----------------------------------------------------------------------------------------            
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   3 - access("DEPT"."DEPTNO"=20)                                                                   


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          0  db block gets                                                                          
         10  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
       1658  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >
SCOTT@orcl >
SCOTT@orcl >
SCOTT@orcl >ed
已写入 file afiedt.buf

  1* select * from emp inner join dept on dept.deptno=20
SCOTT@orcl >ed
已写入 file afiedt.buf

  1     select t1.empno, t1.ename, t2.dname
  2      	from emp t1
  3      	inner join dept t2
  4*   	on ( t1.deptno = t2.deptno or t2.deptno = 20)
  5  /

EMPNO ENAME      DNAME                                                                              
----- ---------- --------------                                                                     
 7369 SMITH      RESEARCH                                                                           
 7499 ALLEN      RESEARCH                                                                           
 7521 WARD       RESEARCH                                                                           
 7566 JONES      RESEARCH                                                                           
 7654 MARTIN     RESEARCH                                                                           
 7698 BLAKE      RESEARCH                                                                           
 7782 CLARK      RESEARCH                                                                           
 7788 SCOTT      RESEARCH                                                                           
 7839 KING       RESEARCH                                                                           
 7844 TURNER     RESEARCH                                                                           
 7876 ADAMS      RESEARCH                                                                           

EMPNO ENAME      DNAME                                                                              
----- ---------- --------------                                                                     
 7900 JAMES      RESEARCH                                                                           
 7902 FORD       RESEARCH                                                                           
 7934 MILLER     RESEARCH                                                                           
 7782 CLARK      ACCOUNTING                                                                         
 7839 KING       ACCOUNTING                                                                         
 7934 MILLER     ACCOUNTING                                                                         
 7521 WARD       SALES                                                                              
 7844 TURNER     SALES                                                                              
 7499 ALLEN      SALES                                                                              
 7900 JAMES      SALES                                                                              
 7698 BLAKE      SALES                                                                              

EMPNO ENAME      DNAME                                                                              
----- ---------- --------------                                                                     
 7654 MARTIN     SALES                                                                              

已选择23行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 1487924614                                                                         
                                                                                                    
-----------------------------------------------------------------------------------------           
| Id  | Operation                     | Name    | Rows  | Bytes | Cost (%CPU)| Time     |           
-----------------------------------------------------------------------------------------           
|   0 | SELECT STATEMENT              |         |    28 |   728 |    10  (10)| 00:00:01 |           
|   1 |  CONCATENATION                |         |       |       |            |          |           
|   2 |   NESTED LOOPS                |         |    14 |   364 |     4   (0)| 00:00:01 |           
|   3 |    TABLE ACCESS BY INDEX ROWID| DEPT    |     1 |    13 |     1   (0)| 00:00:01 |           
|*  4 |     INDEX UNIQUE SCAN         | PK_DEPT |     1 |       |     0   (0)| 00:00:01 |           
|   5 |    TABLE ACCESS FULL          | EMP     |    14 |   182 |     3   (0)| 00:00:01 |           
|   6 |   MERGE JOIN                  |         |    14 |   364 |     6  (17)| 00:00:01 |           
|   7 |    TABLE ACCESS BY INDEX ROWID| DEPT    |     3 |    39 |     2   (0)| 00:00:01 |           
|*  8 |     INDEX FULL SCAN           | PK_DEPT |     4 |       |     1   (0)| 00:00:01 |           
|*  9 |    SORT JOIN                  |         |    14 |   182 |     4  (25)| 00:00:01 |           
|  10 |     TABLE ACCESS FULL         | EMP     |    14 |   182 |     3   (0)| 00:00:01 |           
-----------------------------------------------------------------------------------------           
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   4 - access("T2"."DEPTNO"=20)                                                                     
   8 - filter(LNNVL("T2"."DEPTNO"=20))                                                              
   9 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                          
       filter("T1"."DEPTNO"="T2"."DEPTNO")                                                          


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          0  db block gets                                                                          
         21  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
       1066  bytes sent via SQL*Net to client                                                       
        426  bytes received via SQL*Net from client                                                 
          3  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         23  rows processed                                                                         

SCOTT@orcl >
SCOTT@orcl >
SCOTT@orcl >
SCOTT@orcl >/

EMPNO ENAME      DNAME                                                                              
----- ---------- --------------                                                                     
 7369 SMITH      RESEARCH                                                                           
 7499 ALLEN      RESEARCH                                                                           
 7521 WARD       RESEARCH                                                                           
 7566 JONES      RESEARCH                                                                           
 7654 MARTIN     RESEARCH                                                                           
 7698 BLAKE      RESEARCH                                                                           
 7782 CLARK      RESEARCH                                                                           
 7788 SCOTT      RESEARCH                                                                           
 7839 KING       RESEARCH                                                                           
 7844 TURNER     RESEARCH                                                                           
 7876 ADAMS      RESEARCH                                                                           

EMPNO ENAME      DNAME                                                                              
----- ---------- --------------                                                                     
 7900 JAMES      RESEARCH                                                                           
 7902 FORD       RESEARCH                                                                           
 7934 MILLER     RESEARCH                                                                           
 7782 CLARK      ACCOUNTING                                                                         
 7839 KING       ACCOUNTING                                                                         
 7934 MILLER     ACCOUNTING                                                                         
 7521 WARD       SALES                                                                              
 7844 TURNER     SALES                                                                              
 7499 ALLEN      SALES                                                                              
 7900 JAMES      SALES                                                                              
 7698 BLAKE      SALES                                                                              

EMPNO ENAME      DNAME                                                                              
----- ---------- --------------                                                                     
 7654 MARTIN     SALES                                                                              

已选择23行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 1487924614                                                                         
                                                                                                    
-----------------------------------------------------------------------------------------           
| Id  | Operation                     | Name    | Rows  | Bytes | Cost (%CPU)| Time     |           
-----------------------------------------------------------------------------------------           
|   0 | SELECT STATEMENT              |         |    28 |   728 |    10  (10)| 00:00:01 |           
|   1 |  CONCATENATION                |         |       |       |            |          |           
|   2 |   NESTED LOOPS                |         |    14 |   364 |     4   (0)| 00:00:01 |           
|   3 |    TABLE ACCESS BY INDEX ROWID| DEPT    |     1 |    13 |     1   (0)| 00:00:01 |           
|*  4 |     INDEX UNIQUE SCAN         | PK_DEPT |     1 |       |     0   (0)| 00:00:01 |           
|   5 |    TABLE ACCESS FULL          | EMP     |    14 |   182 |     3   (0)| 00:00:01 |           
|   6 |   MERGE JOIN                  |         |    14 |   364 |     6  (17)| 00:00:01 |           
|   7 |    TABLE ACCESS BY INDEX ROWID| DEPT    |     3 |    39 |     2   (0)| 00:00:01 |           
|*  8 |     INDEX FULL SCAN           | PK_DEPT |     4 |       |     1   (0)| 00:00:01 |           
|*  9 |    SORT JOIN                  |         |    14 |   182 |     4  (25)| 00:00:01 |           
|  10 |     TABLE ACCESS FULL         | EMP     |    14 |   182 |     3   (0)| 00:00:01 |           
-----------------------------------------------------------------------------------------           
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   4 - access("T2"."DEPTNO"=20)                                                                     
   8 - filter(LNNVL("T2"."DEPTNO"=20))                                                              
   9 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                          
       filter("T1"."DEPTNO"="T2"."DEPTNO")                                                          


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
         21  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
       1066  bytes sent via SQL*Net to client                                                       
        426  bytes received via SQL*Net from client                                                 
          3  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         23  rows processed                                                                         

SCOTT@orcl >select * from emp inner join dept on dept.deptno = emp.deptno;

EMPNO ENAME      JOB              MGR HIREDATE                SAL       COMM     DEPTNO     DEPTNO  
----- ---------- --------- ---------- -------------- ------------ ---------- ---------- ----------  
DNAME          LOC                                                                                  
-------------- -------------                                                                        
 7782 CLARK      MANAGER         7839 09-6月 -81        $2,450.00                    10         10  
ACCOUNTING     NEW YORK                                                                             
                                                                                                    
 7839 KING       PRESIDENT            17-11月-81        $5,000.00                    10         10  
ACCOUNTING     NEW YORK                                                                             
                                                                                                    
 7934 MILLER     CLERK           7782 23-1月 -82        $1,300.00                    10         10  
ACCOUNTING     NEW YORK                                                                             
                                                                                                    

EMPNO ENAME      JOB              MGR HIREDATE                SAL       COMM     DEPTNO     DEPTNO  
----- ---------- --------- ---------- -------------- ------------ ---------- ---------- ----------  
DNAME          LOC                                                                                  
-------------- -------------                                                                        
 7369 SMITH      CLERK           7902 17-12月-80          $800.00                    20         20  
RESEARCH       DALLAS                                                                               
                                                                                                    
 7566 JONES      MANAGER         7839 02-4月 -81        $2,975.00                    20         20  
RESEARCH       DALLAS                                                                               
                                                                                                    
 7788 SCOTT      ANALYST         7566 19-4月 -87        $3,000.00                    20         20  
RESEARCH       DALLAS                                                                               
                                                                                                    

EMPNO ENAME      JOB              MGR HIREDATE                SAL       COMM     DEPTNO     DEPTNO  
----- ---------- --------- ---------- -------------- ------------ ---------- ---------- ----------  
DNAME          LOC                                                                                  
-------------- -------------                                                                        
 7876 ADAMS      CLERK           7788 23-5月 -87        $1,100.00                    20         20  
RESEARCH       DALLAS                                                                               
                                                                                                    
 7902 FORD       ANALYST         7566 03-12月-81        $3,000.00                    20         20  
RESEARCH       DALLAS                                                                               
                                                                                                    
 7499 ALLEN      SALESMAN        7698 20-2月 -81        $1,600.00        300         30         30  
SALES          CHICAGO                                                                              
                                                                                                    

EMPNO ENAME      JOB              MGR HIREDATE                SAL       COMM     DEPTNO     DEPTNO  
----- ---------- --------- ---------- -------------- ------------ ---------- ---------- ----------  
DNAME          LOC                                                                                  
-------------- -------------                                                                        
 7521 WARD       SALESMAN        7698 22-2月 -81        $1,250.00        500         30         30  
SALES          CHICAGO                                                                              
                                                                                                    
 7654 MARTIN     SALESMAN        7698 28-9月 -81        $1,250.00       1400         30         30  
SALES          CHICAGO                                                                              
                                                                                                    
 7698 BLAKE      MANAGER         7839 01-5月 -81        $2,850.00                    30         30  
SALES          CHICAGO                                                                              
                                                                                                    

EMPNO ENAME      JOB              MGR HIREDATE                SAL       COMM     DEPTNO     DEPTNO  
----- ---------- --------- ---------- -------------- ------------ ---------- ---------- ----------  
DNAME          LOC                                                                                  
-------------- -------------                                                                        
 7844 TURNER     SALESMAN        7698 08-9月 -81        $1,500.00          0         30         30  
SALES          CHICAGO                                                                              
                                                                                                    
 7900 JAMES      CLERK           7698 03-12月-81          $950.00                    30         30  
SALES          CHICAGO                                                                              
                                                                                                    

已选择14行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 2528716167                                                                         
                                                                                                    
----------------------------------------------------------------------------------------            
| Id  | Operation                    | Name    | Rows  | Bytes | Cost (%CPU)| Time     |            
----------------------------------------------------------------------------------------            
|   0 | SELECT STATEMENT             |         |    14 |   812 |     6  (17)| 00:00:01 |            
|   1 |  MERGE JOIN                  |         |    14 |   812 |     6  (17)| 00:00:01 |            
|   2 |   TABLE ACCESS BY INDEX ROWID| EMP     |    14 |   532 |     2   (0)| 00:00:01 |            
|   3 |    INDEX FULL SCAN           | INX_DEP |    14 |       |     1   (0)| 00:00:01 |            
|*  4 |   SORT JOIN                  |         |     4 |    80 |     4  (25)| 00:00:01 |            
|   5 |    TABLE ACCESS FULL         | DEPT    |     4 |    80 |     3   (0)| 00:00:01 |            
----------------------------------------------------------------------------------------            
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   4 - access("DEPT"."DEPTNO"="EMP"."DEPTNO")                                                       
       filter("DEPT"."DEPTNO"="EMP"."DEPTNO")                                                       


统计信息
----------------------------------------------------------                                          
          3  recursive calls                                                                        
          0  db block gets                                                                          
         12  consistent gets                                                                        
          5  physical reads                                                                         
          0  redo size                                                                              
       1701  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >
SCOTT@orcl >ed
已写入 file afiedt.buf

  1* select emp.empno,dept.deptno from emp inner join dept on dept.deptno = emp.deptno
SCOTT@orcl >/

EMPNO     DEPTNO                                                                                    
----- ----------                                                                                    
 7782         10                                                                                    
 7839         10                                                                                    
 7934         10                                                                                    
 7369         20                                                                                    
 7566         20                                                                                    
 7788         20                                                                                    
 7876         20                                                                                    
 7902         20                                                                                    
 7499         30                                                                                    
 7521         30                                                                                    
 7654         30                                                                                    

EMPNO     DEPTNO                                                                                    
----- ----------                                                                                    
 7698         30                                                                                    
 7844         30                                                                                    
 7900         30                                                                                    

已选择14行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 4287482794                                                                         
                                                                                                    
---------------------------------------------------------------------------------------             
| Id  | Operation                   | Name    | Rows  | Bytes | Cost (%CPU)| Time     |             
---------------------------------------------------------------------------------------             
|   0 | SELECT STATEMENT            |         |    14 |    98 |     2   (0)| 00:00:01 |             
|   1 |  TABLE ACCESS BY INDEX ROWID| EMP     |    14 |    98 |     2   (0)| 00:00:01 |             
|*  2 |   INDEX FULL SCAN           | INX_DEP |    14 |       |     1   (0)| 00:00:01 |             
---------------------------------------------------------------------------------------             
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   2 - filter("EMP"."DEPTNO" IS NOT NULL)                                                           


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          0  db block gets                                                                          
          4  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        669  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1* select emp.empno,dept.deptno,dept.dname from emp inner join dept on dept.deptno = emp.deptno
SCOTT@orcl >/

EMPNO     DEPTNO DNAME                                                                              
----- ---------- --------------                                                                     
 7782         10 ACCOUNTING                                                                         
 7839         10 ACCOUNTING                                                                         
 7934         10 ACCOUNTING                                                                         
 7566         20 RESEARCH                                                                           
 7902         20 RESEARCH                                                                           
 7876         20 RESEARCH                                                                           
 7369         20 RESEARCH                                                                           
 7788         20 RESEARCH                                                                           
 7521         30 SALES                                                                              
 7844         30 SALES                                                                              
 7499         30 SALES                                                                              

EMPNO     DEPTNO DNAME                                                                              
----- ---------- --------------                                                                     
 7900         30 SALES                                                                              
 7698         30 SALES                                                                              
 7654         30 SALES                                                                              

已选择14行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 2780077005                                                                         
                                                                                                    
-------------------------------------------------------------------------------------------------   
| Id  | Operation                    | Name             | Rows  | Bytes | Cost (%CPU)| Time     |   
-------------------------------------------------------------------------------------------------   
|   0 | SELECT STATEMENT             |                  |    14 |   280 |     6  (34)| 00:00:01 |   
|   1 |  MERGE JOIN                  |                  |    14 |   280 |     6  (34)| 00:00:01 |   
|   2 |   TABLE ACCESS BY INDEX ROWID| DEPT             |     4 |    52 |     2   (0)| 00:00:01 |   
|   3 |    INDEX FULL SCAN           | PK_DEPT          |     4 |       |     1   (0)| 00:00:01 |   
|*  4 |   SORT JOIN                  |                  |    14 |    98 |     4  (50)| 00:00:01 |   
|   5 |    VIEW                      | index$_join$_001 |    14 |    98 |     3  (34)| 00:00:01 |   
|*  6 |     HASH JOIN                |                  |       |       |            |          |   
|   7 |      INDEX FAST FULL SCAN    | INX_DEP          |    14 |    98 |     1   (0)| 00:00:01 |   
|   8 |      INDEX FAST FULL SCAN    | PK_EMP           |    14 |    98 |     1   (0)| 00:00:01 |   
-------------------------------------------------------------------------------------------------   
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   4 - access("DEPT"."DEPTNO"="EMP"."DEPTNO")                                                       
       filter("DEPT"."DEPTNO"="EMP"."DEPTNO")                                                       
   6 - access(ROWID=ROWID)                                                                          


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          0  db block gets                                                                          
         12  consistent gets                                                                        
          2  physical reads                                                                         
          0  redo size                                                                              
        765  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >
SCOTT@orcl >
SCOTT@orcl >get D:\git\db\sqlOptimize\index_scan_table_scan.sql
  1  select t1.empno, t1.ename, t1.deptno
  2  	from emp t1
  3  	inner join dept t2
  4  	on (t1.empno = 7844 )
  5  select t1.empno, t1.ename, t1.deptno, t2.dname
  6  	from emp t1
  7  	inner join dept t2
  8* 	on (t1.empno = 7844 )
  9  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.empno, t1.ename, t1.deptno, t2.dname
  2  	from emp t1
  3  	inner join dept t2
  4* 	on (t1.empno = 7844 )
SCOTT@orcl >
SCOTT@orcl >/

EMPNO ENAME          DEPTNO DNAME                                                                   
----- ---------- ---------- --------------                                                          
 7844 TURNER             30 ACCOUNTING                                                              
 7844 TURNER             30 RESEARCH                                                                
 7844 TURNER             30 SALES                                                                   
 7844 TURNER             30 OPERATIONS                                                              


执行计划
----------------------------------------------------------                                          
Plan hash value: 2040012094                                                                         
                                                                                                    
---------------------------------------------------------------------------------------             
| Id  | Operation                    | Name   | Rows  | Bytes | Cost (%CPU)| Time     |             
---------------------------------------------------------------------------------------             
|   0 | SELECT STATEMENT             |        |     4 |    92 |     4   (0)| 00:00:01 |             
|   1 |  NESTED LOOPS                |        |     4 |    92 |     4   (0)| 00:00:01 |             
|   2 |   TABLE ACCESS BY INDEX ROWID| EMP    |     1 |    13 |     1   (0)| 00:00:01 |             
|*  3 |    INDEX UNIQUE SCAN         | PK_EMP |     1 |       |     0   (0)| 00:00:01 |             
|   4 |   TABLE ACCESS FULL          | DEPT   |     4 |    40 |     3   (0)| 00:00:01 |             
---------------------------------------------------------------------------------------             
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   3 - access("T1"."EMPNO"=7844)                                                                    


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
         10  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
SCOTT@orcl >select table_name, index_name
  2  from user_objects
  3  /
select table_name, index_name
                   *
第 1 行出现错误: 
ORA-00904: "INDEX_NAME": 标识符无效 


SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select table_name, index_name
  2* from user_indexes
SCOTT@orcl >/

TABLE_NAME                   INDEX_NAME                                                             
---------------------------- ------------------------------                                         
VENDORS                      PK_VENDORS                                                             
PRODUCTS                     PK_PRODUCTS                                                            
ORDERS                       PK_ORDERS                                                              
ORDERITEMS                   PK_ORDERITEMS                                                          
EMP                          PK_EMP                                                                 
EMP                          INX_DEP                                                                
DEPT                         PK_DEPT                                                                
CUSTOMERS                    PK_CUSTOMERS                                                           

已选择8行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 277916999                                                                          
                                                                                                    
----------------------------------------------------------------------------------------------      
| Id  | Operation                          | Name    | Rows  | Bytes | Cost (%CPU)| Time     |      
----------------------------------------------------------------------------------------------      
|   0 | SELECT STATEMENT                   |         |  2530 |   321K|   734   (2)| 00:00:09 |      
|*  1 |  HASH JOIN RIGHT OUTER             |         |  2530 |   321K|   734   (2)| 00:00:09 |      
|   2 |   INDEX FULL SCAN                  | I_USER2 |    93 |   372 |     1   (0)| 00:00:01 |      
|*  3 |   HASH JOIN OUTER                  |         |  2530 |   311K|   732   (1)| 00:00:09 |      
|*  4 |    HASH JOIN                       |         |  2530 |   291K|   674   (2)| 00:00:09 |      
|   5 |     INDEX FULL SCAN                | I_USER2 |    93 |   372 |     1   (0)| 00:00:01 |      
|*  6 |     HASH JOIN                      |         |  2530 |   281K|   672   (1)| 00:00:09 |      
|*  7 |      HASH JOIN RIGHT OUTER         |         |  2530 |   200K|   469   (2)| 00:00:06 |      
|   8 |       TABLE ACCESS FULL            | SEG$    |  5896 | 64856 |    48   (0)| 00:00:01 |      
|*  9 |       HASH JOIN RIGHT OUTER        |         |  2530 |   172K|   420   (1)| 00:00:06 |      
|  10 |        TABLE ACCESS FULL           | TS$     |     7 |    21 |     4   (0)| 00:00:01 |      
|  11 |        NESTED LOOPS                |         |       |       |            |          |      
|  12 |         NESTED LOOPS               |         |  2530 |   165K|   416   (1)| 00:00:05 |      
|* 13 |          TABLE ACCESS FULL         | OBJ$    |  2530 | 91080 |   250   (2)| 00:00:03 |      
|* 14 |          INDEX UNIQUE SCAN         | I_IND1  |     1 |       |     0   (0)| 00:00:01 |      
|* 15 |         TABLE ACCESS BY INDEX ROWID| IND$    |     1 |    31 |     1   (0)| 00:00:01 |      
|  16 |      INDEX FAST FULL SCAN          | I_OBJ2  | 73380 |  2364K|   202   (0)| 00:00:03 |      
|  17 |    INDEX FAST FULL SCAN            | I_OBJ1  | 73380 |   573K|    58   (0)| 00:00:01 |      
----------------------------------------------------------------------------------------------      
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   1 - access("ITO"."OWNER#"="ITU"."USER#"(+))                                                      
   3 - access("I"."INDMETHOD#"="ITO"."OBJ#"(+))                                                     
   4 - access("IO"."OWNER#"="IU"."USER#")                                                           
   6 - access("I"."BO#"="IO"."OBJ#")                                                                
   7 - access("I"."FILE#"="S"."FILE#"(+) AND "I"."BLOCK#"="S"."BLOCK#"(+) AND                       
              "I"."TS#"="S"."TS#"(+))                                                               
   9 - access("I"."TS#"="TS"."TS#"(+))                                                              
  13 - filter("O"."OWNER#"=USERENV('SCHEMAID') AND BITAND("O"."FLAGS",128)=0)                       
  14 - access("O"."OBJ#"="I"."OBJ#")                                                                
  15 - filter(BITAND("I"."FLAGS",4096)=0 AND ("I"."TYPE#"=1 OR "I"."TYPE#"=2 OR                     
              "I"."TYPE#"=3 OR "I"."TYPE#"=4 OR "I"."TYPE#"=6 OR "I"."TYPE#"=7 OR "I"."TYPE#"=8 OR  
              "I"."TYPE#"=9))                                                                       


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
       2076  consistent gets                                                                        
        196  physical reads                                                                         
          0  redo size                                                                              
        688  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          8  rows processed                                                                         

SCOTT@orcl >select t1.ename, t1.deptno, t2.dname
  2  
SCOTT@orcl >  from emp t1
SP2-0734: 未知的命令开头 "from emp t..." - 忽略了剩余的行。
SCOTT@orcl >
SCOTT@orcl >inner join dept t2
SP2-0734: 未知的命令开头 "inner join..." - 忽略了剩余的行。
SCOTT@orcl >
SCOTT@orcl >    on t1.deptno = t2.deptno;
SP2-0734: 未知的命令开头 "on t1.dept..." - 忽略了剩余的行。
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.ename, t1.deptno, t2.dname
  2  from emp t1
  3  inner join dept t2
  4* on t1.deptno = t2.deptno;
  5  /
on t1.deptno = t2.deptno;
                        *
第 4 行出现错误: 
ORA-00911: 无效字符 


SCOTT@orcl >
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.ename, t1.deptno, t2.dname
  2  from emp t1
  3  inner join dept t2
  4* on t1.deptno = t2.deptno
SCOTT@orcl >/

ENAME          DEPTNO DNAME                                                                         
---------- ---------- --------------                                                                
CLARK              10 ACCOUNTING                                                                    
KING               10 ACCOUNTING                                                                    
MILLER             10 ACCOUNTING                                                                    
SMITH              20 RESEARCH                                                                      
JONES              20 RESEARCH                                                                      
SCOTT              20 RESEARCH                                                                      
ADAMS              20 RESEARCH                                                                      
FORD               20 RESEARCH                                                                      
ALLEN              30 SALES                                                                         
WARD               30 SALES                                                                         
MARTIN             30 SALES                                                                         

ENAME          DEPTNO DNAME                                                                         
---------- ---------- --------------                                                                
BLAKE              30 SALES                                                                         
TURNER             30 SALES                                                                         
JAMES              30 SALES                                                                         

已选择14行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 2528716167                                                                         
                                                                                                    
----------------------------------------------------------------------------------------            
| Id  | Operation                    | Name    | Rows  | Bytes | Cost (%CPU)| Time     |            
----------------------------------------------------------------------------------------            
|   0 | SELECT STATEMENT             |         |    14 |   308 |     6  (17)| 00:00:01 |            
|   1 |  MERGE JOIN                  |         |    14 |   308 |     6  (17)| 00:00:01 |            
|   2 |   TABLE ACCESS BY INDEX ROWID| EMP     |    14 |   126 |     2   (0)| 00:00:01 |            
|   3 |    INDEX FULL SCAN           | INX_DEP |    14 |       |     1   (0)| 00:00:01 |            
|*  4 |   SORT JOIN                  |         |     4 |    52 |     4  (25)| 00:00:01 |            
|   5 |    TABLE ACCESS FULL         | DEPT    |     4 |    52 |     3   (0)| 00:00:01 |            
----------------------------------------------------------------------------------------            
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   4 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                          
       filter("T1"."DEPTNO"="T2"."DEPTNO")                                                          


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          0  db block gets                                                                          
         11  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        794  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.ename, t1.deptno
  2      from emp t1
  3      inner join dept t2
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/

ENAME          DEPTNO                                                                               
---------- ----------                                                                               
CLARK              10                                                                               
KING               10                                                                               
MILLER             10                                                                               
SMITH              20                                                                               
JONES              20                                                                               
SCOTT              20                                                                               
ADAMS              20                                                                               
FORD               20                                                                               
ALLEN              30                                                                               
WARD               30                                                                               
MARTIN             30                                                                               

ENAME          DEPTNO                                                                               
---------- ----------                                                                               
BLAKE              30                                                                               
TURNER             30                                                                               
JAMES              30                                                                               

已选择14行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 4287482794                                                                         
                                                                                                    
---------------------------------------------------------------------------------------             
| Id  | Operation                   | Name    | Rows  | Bytes | Cost (%CPU)| Time     |             
---------------------------------------------------------------------------------------             
|   0 | SELECT STATEMENT            |         |    14 |   126 |     2   (0)| 00:00:01 |             
|   1 |  TABLE ACCESS BY INDEX ROWID| EMP     |    14 |   126 |     2   (0)| 00:00:01 |             
|*  2 |   INDEX FULL SCAN           | INX_DEP |    14 |       |     1   (0)| 00:00:01 |             
---------------------------------------------------------------------------------------             
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   2 - filter("T1"."DEPTNO" IS NOT NULL)                                                            


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          0  db block gets                                                                          
          4  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        698  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.ename, t1.deptno, t2.dname
  2      from emp t1
  3      inner join dept t2
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/

ENAME          DEPTNO DNAME                                                                         
---------- ---------- --------------                                                                
CLARK              10 ACCOUNTING                                                                    
KING               10 ACCOUNTING                                                                    
MILLER             10 ACCOUNTING                                                                    
SMITH              20 RESEARCH                                                                      
JONES              20 RESEARCH                                                                      
SCOTT              20 RESEARCH                                                                      
ADAMS              20 RESEARCH                                                                      
FORD               20 RESEARCH                                                                      
ALLEN              30 SALES                                                                         
WARD               30 SALES                                                                         
MARTIN             30 SALES                                                                         

ENAME          DEPTNO DNAME                                                                         
---------- ---------- --------------                                                                
BLAKE              30 SALES                                                                         
TURNER             30 SALES                                                                         
JAMES              30 SALES                                                                         

已选择14行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 2528716167                                                                         
                                                                                                    
----------------------------------------------------------------------------------------            
| Id  | Operation                    | Name    | Rows  | Bytes | Cost (%CPU)| Time     |            
----------------------------------------------------------------------------------------            
|   0 | SELECT STATEMENT             |         |    14 |   308 |     6  (17)| 00:00:01 |            
|   1 |  MERGE JOIN                  |         |    14 |   308 |     6  (17)| 00:00:01 |            
|   2 |   TABLE ACCESS BY INDEX ROWID| EMP     |    14 |   126 |     2   (0)| 00:00:01 |            
|   3 |    INDEX FULL SCAN           | INX_DEP |    14 |       |     1   (0)| 00:00:01 |            
|*  4 |   SORT JOIN                  |         |     4 |    52 |     4  (25)| 00:00:01 |            
|   5 |    TABLE ACCESS FULL         | DEPT    |     4 |    52 |     3   (0)| 00:00:01 |            
----------------------------------------------------------------------------------------            
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   4 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                          
       filter("T1"."DEPTNO"="T2"."DEPTNO")                                                          


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          0  db block gets                                                                          
         11  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        794  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.ename, t1.deptno
  2      from emp t1
  3      inner join dept t2
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/

ENAME          DEPTNO                                                                               
---------- ----------                                                                               
CLARK              10                                                                               
KING               10                                                                               
MILLER             10                                                                               
SMITH              20                                                                               
JONES              20                                                                               
SCOTT              20                                                                               
ADAMS              20                                                                               
FORD               20                                                                               
ALLEN              30                                                                               
WARD               30                                                                               
MARTIN             30                                                                               

ENAME          DEPTNO                                                                               
---------- ----------                                                                               
BLAKE              30                                                                               
TURNER             30                                                                               
JAMES              30                                                                               

已选择14行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 4287482794                                                                         
                                                                                                    
---------------------------------------------------------------------------------------             
| Id  | Operation                   | Name    | Rows  | Bytes | Cost (%CPU)| Time     |             
---------------------------------------------------------------------------------------             
|   0 | SELECT STATEMENT            |         |    14 |   126 |     2   (0)| 00:00:01 |             
|   1 |  TABLE ACCESS BY INDEX ROWID| EMP     |    14 |   126 |     2   (0)| 00:00:01 |             
|*  2 |   INDEX FULL SCAN           | INX_DEP |    14 |       |     1   (0)| 00:00:01 |             
---------------------------------------------------------------------------------------             
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   2 - filter("T1"."DEPTNO" IS NOT NULL)                                                            


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
          4  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        698  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.ename, t1.deptno, t2.dname
  2      from emp t1
  3      inner join dept t2
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/

ENAME          DEPTNO DNAME                                                                         
---------- ---------- --------------                                                                
CLARK              10 ACCOUNTING                                                                    
KING               10 ACCOUNTING                                                                    
MILLER             10 ACCOUNTING                                                                    
SMITH              20 RESEARCH                                                                      
JONES              20 RESEARCH                                                                      
SCOTT              20 RESEARCH                                                                      
ADAMS              20 RESEARCH                                                                      
FORD               20 RESEARCH                                                                      
ALLEN              30 SALES                                                                         
WARD               30 SALES                                                                         
MARTIN             30 SALES                                                                         

ENAME          DEPTNO DNAME                                                                         
---------- ---------- --------------                                                                
BLAKE              30 SALES                                                                         
TURNER             30 SALES                                                                         
JAMES              30 SALES                                                                         

已选择14行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 2528716167                                                                         
                                                                                                    
----------------------------------------------------------------------------------------            
| Id  | Operation                    | Name    | Rows  | Bytes | Cost (%CPU)| Time     |            
----------------------------------------------------------------------------------------            
|   0 | SELECT STATEMENT             |         |    14 |   308 |     6  (17)| 00:00:01 |            
|   1 |  MERGE JOIN                  |         |    14 |   308 |     6  (17)| 00:00:01 |            
|   2 |   TABLE ACCESS BY INDEX ROWID| EMP     |    14 |   126 |     2   (0)| 00:00:01 |            
|   3 |    INDEX FULL SCAN           | INX_DEP |    14 |       |     1   (0)| 00:00:01 |            
|*  4 |   SORT JOIN                  |         |     4 |    52 |     4  (25)| 00:00:01 |            
|   5 |    TABLE ACCESS FULL         | DEPT    |     4 |    52 |     3   (0)| 00:00:01 |            
----------------------------------------------------------------------------------------            
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   4 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                          
       filter("T1"."DEPTNO"="T2"."DEPTNO")                                                          


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
         11  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        794  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.empno, t1.ename, t1.deptno, t2.dname
  2      from emp t1
  3      inner join dept t2
  4*     on ( t1.deptno = t2.deptno )
SCOTT@orcl >/

EMPNO ENAME          DEPTNO DNAME                                                                   
----- ---------- ---------- --------------                                                          
 7782 CLARK              10 ACCOUNTING                                                              
 7839 KING               10 ACCOUNTING                                                              
 7934 MILLER             10 ACCOUNTING                                                              
 7369 SMITH              20 RESEARCH                                                                
 7566 JONES              20 RESEARCH                                                                
 7788 SCOTT              20 RESEARCH                                                                
 7876 ADAMS              20 RESEARCH                                                                
 7902 FORD               20 RESEARCH                                                                
 7499 ALLEN              30 SALES                                                                   
 7521 WARD               30 SALES                                                                   
 7654 MARTIN             30 SALES                                                                   

EMPNO ENAME          DEPTNO DNAME                                                                   
----- ---------- ---------- --------------                                                          
 7698 BLAKE              30 SALES                                                                   
 7844 TURNER             30 SALES                                                                   
 7900 JAMES              30 SALES                                                                   

已选择14行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 2528716167                                                                         
                                                                                                    
----------------------------------------------------------------------------------------            
| Id  | Operation                    | Name    | Rows  | Bytes | Cost (%CPU)| Time     |            
----------------------------------------------------------------------------------------            
|   0 | SELECT STATEMENT             |         |    14 |   364 |     6  (17)| 00:00:01 |            
|   1 |  MERGE JOIN                  |         |    14 |   364 |     6  (17)| 00:00:01 |            
|   2 |   TABLE ACCESS BY INDEX ROWID| EMP     |    14 |   182 |     2   (0)| 00:00:01 |            
|   3 |    INDEX FULL SCAN           | INX_DEP |    14 |       |     1   (0)| 00:00:01 |            
|*  4 |   SORT JOIN                  |         |     4 |    52 |     4  (25)| 00:00:01 |            
|   5 |    TABLE ACCESS FULL         | DEPT    |     4 |    52 |     3   (0)| 00:00:01 |            
----------------------------------------------------------------------------------------            
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   4 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                          
       filter("T1"."DEPTNO"="T2"."DEPTNO")                                                          


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          0  db block gets                                                                          
         11  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        908  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.empno, t1.ename, t1.deptno, t2.dname
  2      from emp t1
  3      inner join dept t2
  4*     on ( t1.deptno = t2.deptno && t1.empno = 7900 )
SCOTT@orcl >/
输入 t1 的值:  
原值    4:     on ( t1.deptno = t2.deptno && t1.empno = 7900 )
新值    4:     on ( t1.deptno = t2.deptno empno = 7900 )
    on ( t1.deptno = t2.deptno empno = 7900 )
                   *
第 4 行出现错误: 
ORA-00907: 缺失右括号 


SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.empno, t1.ename, t1.deptno, t2.dname
  2      from emp t1
  3      inner join dept t2
  4*     on ( t1.deptno = t2.deptno && t1.empno = '7900' )
SCOTT@orcl >/
原值    4:     on ( t1.deptno = t2.deptno && t1.empno = '7900' )
新值    4:     on ( t1.deptno = t2.deptno empno = '7900' )
    on ( t1.deptno = t2.deptno empno = '7900' )
                   *
第 4 行出现错误: 
ORA-00907: 缺失右括号 


SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.empno, t1.ename, t1.deptno, t2.dname
  2      from emp t1
  3      inner join dept t2
  4*     on ( t1.deptno = t2.deptno and t1.empno = 7900 )
SCOTT@orcl >/

EMPNO ENAME          DEPTNO DNAME                                                                   
----- ---------- ---------- --------------                                                          
 7900 JAMES              30 SALES                                                                   


执行计划
----------------------------------------------------------                                          
Plan hash value: 2385808155                                                                         
                                                                                                    
----------------------------------------------------------------------------------------            
| Id  | Operation                    | Name    | Rows  | Bytes | Cost (%CPU)| Time     |            
----------------------------------------------------------------------------------------            
|   0 | SELECT STATEMENT             |         |     1 |    26 |     2   (0)| 00:00:01 |            
|   1 |  NESTED LOOPS                |         |     1 |    26 |     2   (0)| 00:00:01 |            
|   2 |   TABLE ACCESS BY INDEX ROWID| EMP     |     1 |    13 |     1   (0)| 00:00:01 |            
|*  3 |    INDEX UNIQUE SCAN         | PK_EMP  |     1 |       |     0   (0)| 00:00:01 |            
|   4 |   TABLE ACCESS BY INDEX ROWID| DEPT    |     4 |    52 |     1   (0)| 00:00:01 |            
|*  5 |    INDEX UNIQUE SCAN         | PK_DEPT |     1 |       |     0   (0)| 00:00:01 |            
----------------------------------------------------------------------------------------            
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   3 - access("T1"."EMPNO"=7900)                                                                    
   5 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                          


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          0  db block gets                                                                          
          4  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        613  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.empno, t1.ename, t1.deptno, t2.dname
  2      from emp t1
  3      inner join dept t2
  4*     on ( t1.deptno = t2.deptno and t1.empno = 7900 )
SCOTT@orcl >/

EMPNO ENAME          DEPTNO DNAME                                                                   
----- ---------- ---------- --------------                                                          
 7900 JAMES              30 SALES                                                                   


执行计划
----------------------------------------------------------                                          
Plan hash value: 2385808155                                                                         
                                                                                                    
----------------------------------------------------------------------------------------            
| Id  | Operation                    | Name    | Rows  | Bytes | Cost (%CPU)| Time     |            
----------------------------------------------------------------------------------------            
|   0 | SELECT STATEMENT             |         |     1 |    26 |     2   (0)| 00:00:01 |            
|   1 |  NESTED LOOPS                |         |     1 |    26 |     2   (0)| 00:00:01 |            
|   2 |   TABLE ACCESS BY INDEX ROWID| EMP     |     1 |    13 |     1   (0)| 00:00:01 |            
|*  3 |    INDEX UNIQUE SCAN         | PK_EMP  |     1 |       |     0   (0)| 00:00:01 |            
|   4 |   TABLE ACCESS BY INDEX ROWID| DEPT    |     4 |    52 |     1   (0)| 00:00:01 |            
|*  5 |    INDEX UNIQUE SCAN         | PK_DEPT |     1 |       |     0   (0)| 00:00:01 |            
----------------------------------------------------------------------------------------            
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   3 - access("T1"."EMPNO"=7900)                                                                    
   5 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                          


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
          4  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        613  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.empno, t1.ename, t1.deptno, t2.dname
  2      from emp t1
  3      inner join dept t2
  4*     on ( t1.deptno = t2.deptno and t1.empno = 7900 )
SCOTT@orcl >get D:\git\db\sqlOptimize\index_scan_table_scan.sql
  1  select t1.empno, t1.ename, t1.deptno
  2  	from emp t1
  3  	inner join dept t2
  4  	on (t1.empno = 7844 )
  5  select t1.empno, t1.ename, t1.deptno, t2.dname
  6  	from emp t1
  7  	inner join dept t2
  8  	on (t1.empno = 7844 )
  9  select t1.empno, t1.ename, t2.dname
 10   	from emp t1
 11   	inner join dept t2
 12   	on ( t1.deptno = t2.deptno or t2.deptno = 20)
 13  select t1.empno, t1.ename, t1.deptno, t2.dname
 14  	from emp t1
 15  	inner join dept t2
 16  	-- on (t1.empno = 7844 and t1.deptno = t2.deptno)
 17  	on (t1.empno = 7844 )
 18  -------------- why table access full
 19  select t1.ename, t1.deptno, t2.dname
 20      from emp t1
 21      inner join dept t2
 22      on t1.deptno = t2.deptno
 23  select t1.empno, t1.ename, t1.deptno, t2.dname
 24      from emp t1
 25      inner join dept t2
 26      on t1.deptno = t2.deptno
 27  select t1.empno, t1.ename, t1.deptno, t2.dname
 28      from emp t1
 29      inner join dept t2
 30      on ( t1.deptno = t2.deptno and t1.empno = 7900 )
 31* -------------
 32  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.empno, t1.ename, t1.deptno, t2.dname
  2      from emp t1
  3      inner join dept t2
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/

EMPNO ENAME          DEPTNO DNAME                                                                   
----- ---------- ---------- --------------                                                          
 7782 CLARK              10 ACCOUNTING                                                              
 7839 KING               10 ACCOUNTING                                                              
 7934 MILLER             10 ACCOUNTING                                                              
 7369 SMITH              20 RESEARCH                                                                
 7566 JONES              20 RESEARCH                                                                
 7788 SCOTT              20 RESEARCH                                                                
 7876 ADAMS              20 RESEARCH                                                                
 7902 FORD               20 RESEARCH                                                                
 7499 ALLEN              30 SALES                                                                   
 7521 WARD               30 SALES                                                                   
 7654 MARTIN             30 SALES                                                                   

EMPNO ENAME          DEPTNO DNAME                                                                   
----- ---------- ---------- --------------                                                          
 7698 BLAKE              30 SALES                                                                   
 7844 TURNER             30 SALES                                                                   
 7900 JAMES              30 SALES                                                                   

已选择14行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 2528716167                                                                         
                                                                                                    
----------------------------------------------------------------------------------------            
| Id  | Operation                    | Name    | Rows  | Bytes | Cost (%CPU)| Time     |            
----------------------------------------------------------------------------------------            
|   0 | SELECT STATEMENT             |         |    14 |   364 |     6  (17)| 00:00:01 |            
|   1 |  MERGE JOIN                  |         |    14 |   364 |     6  (17)| 00:00:01 |            
|   2 |   TABLE ACCESS BY INDEX ROWID| EMP     |    14 |   182 |     2   (0)| 00:00:01 |            
|   3 |    INDEX FULL SCAN           | INX_DEP |    14 |       |     1   (0)| 00:00:01 |            
|*  4 |   SORT JOIN                  |         |     4 |    52 |     4  (25)| 00:00:01 |            
|   5 |    TABLE ACCESS FULL         | DEPT    |     4 |    52 |     3   (0)| 00:00:01 |            
----------------------------------------------------------------------------------------            
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   4 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                          
       filter("T1"."DEPTNO"="T2"."DEPTNO")                                                          


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          0  db block gets                                                                          
         11  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        908  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >get D:\git\db\sqlOptimize\index_scan_table_scan.sql
  1  select t1.empno, t1.ename, t1.deptno
  2  	from emp t1
  3  	inner join dept t2
  4  	on (t1.empno = 7844 )
  5  select t1.empno, t1.ename, t1.deptno, t2.dname
  6  	from emp t1
  7  	inner join dept t2
  8  	on (t1.empno = 7844 )
  9  select t1.empno, t1.ename, t2.dname
 10   	from emp t1
 11   	inner join dept t2
 12   	on ( t1.deptno = t2.deptno or t2.deptno = 20)
 13  select t1.empno, t1.ename, t1.deptno, t2.dname
 14  	from emp t1
 15  	inner join dept t2
 16  	-- on (t1.empno = 7844 and t1.deptno = t2.deptno)
 17  	on (t1.empno = 7844 )
 18  -------------- why table access full
 19  select t1.ename, t1.deptno, t2.dname
 20      from emp t1
 21      inner join dept t2
 22      on t1.deptno = t2.deptno
 23  select t1.empno, t1.ename, t1.deptno, t2.dname
 24      from emp t1
 25      inner join dept t2
 26      on t1.deptno = t2.deptno
 27  select t1.empno, t1.ename, t1.deptno
 28      from emp t1
 29      inner join dept t2
 30      on t1.deptno = t2.deptno
 31  select t1.empno, t1.ename, t1.deptno, t2.dname
 32      from emp t1
 33      inner join dept t2
 34      on ( t1.deptno = t2.deptno and t1.empno = 7900 )
 35* -------------
 36  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.empno, t1.ename, t1.deptno
  2      from emp t1
  3      inner join dept t2
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/

EMPNO ENAME          DEPTNO                                                                         
----- ---------- ----------                                                                         
 7782 CLARK              10                                                                         
 7839 KING               10                                                                         
 7934 MILLER             10                                                                         
 7369 SMITH              20                                                                         
 7566 JONES              20                                                                         
 7788 SCOTT              20                                                                         
 7876 ADAMS              20                                                                         
 7902 FORD               20                                                                         
 7499 ALLEN              30                                                                         
 7521 WARD               30                                                                         
 7654 MARTIN             30                                                                         

EMPNO ENAME          DEPTNO                                                                         
----- ---------- ----------                                                                         
 7698 BLAKE              30                                                                         
 7844 TURNER             30                                                                         
 7900 JAMES              30                                                                         

已选择14行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 4287482794                                                                         
                                                                                                    
---------------------------------------------------------------------------------------             
| Id  | Operation                   | Name    | Rows  | Bytes | Cost (%CPU)| Time     |             
---------------------------------------------------------------------------------------             
|   0 | SELECT STATEMENT            |         |    14 |   182 |     2   (0)| 00:00:01 |             
|   1 |  TABLE ACCESS BY INDEX ROWID| EMP     |    14 |   182 |     2   (0)| 00:00:01 |             
|*  2 |   INDEX FULL SCAN           | INX_DEP |    14 |       |     1   (0)| 00:00:01 |             
---------------------------------------------------------------------------------------             
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   2 - filter("T1"."DEPTNO" IS NOT NULL)                                                            


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          0  db block gets                                                                          
          4  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        812  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.empno, t1.ename, t1.deptno, t2.deptno
  2      from emp t1
  3      inner join dept t2
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/

EMPNO ENAME          DEPTNO     DEPTNO                                                              
----- ---------- ---------- ----------                                                              
 7782 CLARK              10         10                                                              
 7839 KING               10         10                                                              
 7934 MILLER             10         10                                                              
 7369 SMITH              20         20                                                              
 7566 JONES              20         20                                                              
 7788 SCOTT              20         20                                                              
 7876 ADAMS              20         20                                                              
 7902 FORD               20         20                                                              
 7499 ALLEN              30         30                                                              
 7521 WARD               30         30                                                              
 7654 MARTIN             30         30                                                              

EMPNO ENAME          DEPTNO     DEPTNO                                                              
----- ---------- ---------- ----------                                                              
 7698 BLAKE              30         30                                                              
 7844 TURNER             30         30                                                              
 7900 JAMES              30         30                                                              

已选择14行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 4287482794                                                                         
                                                                                                    
---------------------------------------------------------------------------------------             
| Id  | Operation                   | Name    | Rows  | Bytes | Cost (%CPU)| Time     |             
---------------------------------------------------------------------------------------             
|   0 | SELECT STATEMENT            |         |    14 |   182 |     2   (0)| 00:00:01 |             
|   1 |  TABLE ACCESS BY INDEX ROWID| EMP     |    14 |   182 |     2   (0)| 00:00:01 |             
|*  2 |   INDEX FULL SCAN           | INX_DEP |    14 |       |     1   (0)| 00:00:01 |             
---------------------------------------------------------------------------------------             
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   2 - filter("T1"."DEPTNO" IS NOT NULL)                                                            


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          0  db block gets                                                                          
          4  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        914  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.empno, t1.ename, t1.deptno, t2.dname
  2      from emp t1
  3      inner join dept t2
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/

EMPNO ENAME          DEPTNO DNAME                                                                   
----- ---------- ---------- --------------                                                          
 7782 CLARK              10 ACCOUNTING                                                              
 7839 KING               10 ACCOUNTING                                                              
 7934 MILLER             10 ACCOUNTING                                                              
 7369 SMITH              20 RESEARCH                                                                
 7566 JONES              20 RESEARCH                                                                
 7788 SCOTT              20 RESEARCH                                                                
 7876 ADAMS              20 RESEARCH                                                                
 7902 FORD               20 RESEARCH                                                                
 7499 ALLEN              30 SALES                                                                   
 7521 WARD               30 SALES                                                                   
 7654 MARTIN             30 SALES                                                                   

EMPNO ENAME          DEPTNO DNAME                                                                   
----- ---------- ---------- --------------                                                          
 7698 BLAKE              30 SALES                                                                   
 7844 TURNER             30 SALES                                                                   
 7900 JAMES              30 SALES                                                                   

已选择14行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 2528716167                                                                         
                                                                                                    
----------------------------------------------------------------------------------------            
| Id  | Operation                    | Name    | Rows  | Bytes | Cost (%CPU)| Time     |            
----------------------------------------------------------------------------------------            
|   0 | SELECT STATEMENT             |         |    14 |   364 |     6  (17)| 00:00:01 |            
|   1 |  MERGE JOIN                  |         |    14 |   364 |     6  (17)| 00:00:01 |            
|   2 |   TABLE ACCESS BY INDEX ROWID| EMP     |    14 |   182 |     2   (0)| 00:00:01 |            
|   3 |    INDEX FULL SCAN           | INX_DEP |    14 |       |     1   (0)| 00:00:01 |            
|*  4 |   SORT JOIN                  |         |     4 |    52 |     4  (25)| 00:00:01 |            
|   5 |    TABLE ACCESS FULL         | DEPT    |     4 |    52 |     3   (0)| 00:00:01 |            
----------------------------------------------------------------------------------------            
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   4 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                          
       filter("T1"."DEPTNO"="T2"."DEPTNO")                                                          


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
         11  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        908  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.empno, t1.ename, t1.deptno, t2.dname
  2      from emp t1
  3      inner join dept t2
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/

EMPNO ENAME          DEPTNO DNAME                                                                   
----- ---------- ---------- --------------                                                          
 7782 CLARK              10 ACCOUNTING                                                              
 7839 KING               10 ACCOUNTING                                                              
 7934 MILLER             10 ACCOUNTING                                                              
 7369 SMITH              20 RESEARCH                                                                
 7566 JONES              20 RESEARCH                                                                
 7788 SCOTT              20 RESEARCH                                                                
 7876 ADAMS              20 RESEARCH                                                                
 7902 FORD               20 RESEARCH                                                                
 7499 ALLEN              30 SALES                                                                   
 7521 WARD               30 SALES                                                                   
 7654 MARTIN             30 SALES                                                                   

EMPNO ENAME          DEPTNO DNAME                                                                   
----- ---------- ---------- --------------                                                          
 7698 BLAKE              30 SALES                                                                   
 7844 TURNER             30 SALES                                                                   
 7900 JAMES              30 SALES                                                                   

已选择14行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 2528716167                                                                         
                                                                                                    
----------------------------------------------------------------------------------------            
| Id  | Operation                    | Name    | Rows  | Bytes | Cost (%CPU)| Time     |            
----------------------------------------------------------------------------------------            
|   0 | SELECT STATEMENT             |         |    14 |   364 |     6  (17)| 00:00:01 |            
|   1 |  MERGE JOIN                  |         |    14 |   364 |     6  (17)| 00:00:01 |            
|   2 |   TABLE ACCESS BY INDEX ROWID| EMP     |    14 |   182 |     2   (0)| 00:00:01 |            
|   3 |    INDEX FULL SCAN           | INX_DEP |    14 |       |     1   (0)| 00:00:01 |            
|*  4 |   SORT JOIN                  |         |     4 |    52 |     4  (25)| 00:00:01 |            
|   5 |    TABLE ACCESS FULL         | DEPT    |     4 |    52 |     3   (0)| 00:00:01 |            
----------------------------------------------------------------------------------------            
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   4 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                          
       filter("T1"."DEPTNO"="T2"."DEPTNO")                                                          


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
         11  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        908  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >select empno, ename, detpno
  2  from emp;
select empno, ename, detpno
                     *
第 1 行出现错误: 
ORA-00904: "DETPNO": 标识符无效 


SCOTT@orcl >select empno, ename, deptno
  2  from emp;

EMPNO ENAME          DEPTNO                                                                         
----- ---------- ----------                                                                         
 7369 SMITH              20                                                                         
 7499 ALLEN              30                                                                         
 7521 WARD               30                                                                         
 7566 JONES              20                                                                         
 7654 MARTIN             30                                                                         
 7698 BLAKE              30                                                                         
 7782 CLARK              10                                                                         
 7788 SCOTT              20                                                                         
 7839 KING               10                                                                         
 7844 TURNER             30                                                                         
 7876 ADAMS              20                                                                         

EMPNO ENAME          DEPTNO                                                                         
----- ---------- ----------                                                                         
 7900 JAMES              30                                                                         
 7902 FORD               20                                                                         
 7934 MILLER             10                                                                         

已选择14行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 3956160932                                                                         
                                                                                                    
--------------------------------------------------------------------------                          
| Id  | Operation         | Name | Rows  | Bytes | Cost (%CPU)| Time     |                          
--------------------------------------------------------------------------                          
|   0 | SELECT STATEMENT  |      |    14 |   182 |     3   (0)| 00:00:01 |                          
|   1 |  TABLE ACCESS FULL| EMP  |    14 |   182 |     3   (0)| 00:00:01 |                          
--------------------------------------------------------------------------                          


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          0  db block gets                                                                          
          8  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        812  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >select deptno, dname
  2  from dept
  3  
SCOTT@orcl >
SCOTT@orcl >/

    DEPTNO DNAME                                                                                    
---------- --------------                                                                           
        10 ACCOUNTING                                                                               
        20 RESEARCH                                                                                 
        30 SALES                                                                                    
        40 OPERATIONS                                                                               


执行计划
----------------------------------------------------------                                          
Plan hash value: 3383998547                                                                         
                                                                                                    
--------------------------------------------------------------------------                          
| Id  | Operation         | Name | Rows  | Bytes | Cost (%CPU)| Time     |                          
--------------------------------------------------------------------------                          
|   0 | SELECT STATEMENT  |      |     4 |    52 |     3   (0)| 00:00:01 |                          
|   1 |  TABLE ACCESS FULL| DEPT |     4 |    52 |     3   (0)| 00:00:01 |                          
--------------------------------------------------------------------------                          


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          0  db block gets                                                                          
          8  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        571  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          4  rows processed                                                                         

SCOTT@orcl >get D:\git\db\sqlOptimize\index_scan_table_scan.sql
  1  select t1.empno, t1.ename, t1.deptno
  2  	from emp t1
  3  	inner join dept t2
  4  	on (t1.empno = 7844 )
  5  select t1.empno, t1.ename, t1.deptno, t2.dname
  6  	from emp t1
  7  	inner join dept t2
  8  	on (t1.empno = 7844 )
  9  select t1.empno, t1.ename, t2.dname
 10   	from emp t1
 11   	inner join dept t2
 12   	on ( t1.deptno = t2.deptno or t2.deptno = 20)
 13  select t1.empno, t1.ename, t1.deptno, t2.dname
 14  	from emp t1
 15  	inner join dept t2
 16  	-- on (t1.empno = 7844 and t1.deptno = t2.deptno)
 17  	on (t1.empno = 7844 )
 18  -------------- why table access full
 19  select t1.ename, t1.deptno, t2.dname
 20      from emp t1
 21      inner join dept t2
 22      on t1.deptno = t2.deptno
 23  select t1.empno, t1.ename, t1.deptno, t2.dname
 24      from emp t1
 25      inner join dept t2
 26      on t1.deptno = t2.deptno
 27  select t1.empno, t1.ename, t1.deptno
 28      from emp t1
 29      inner join dept t2
 30      on t1.deptno = t2.deptno
 31  select t1.empno, t1.ename, t1.deptno, t2.dname
 32      from emp t1
 33      inner join dept t2
 34      on ( t1.deptno = t2.deptno and t1.empno = 7900 )
 35* -------------
 36  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.empno, t1.ename, t1.deptno, t2.dname
  2      from emp t1
  3      inner join dept t2
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >get D:\git\db\sqlOptimize\index_scan_table_scan.sql
  1  select t1.empno, t1.ename, t1.deptno
  2  	from emp t1
  3  	inner join dept t2
  4  	on (t1.empno = 7844 )
  5  select t1.empno, t1.ename, t1.deptno, t2.dname
  6  	from emp t1
  7  	inner join dept t2
  8  	on (t1.empno = 7844 )
  9  select t1.empno, t1.ename, t2.dname
 10   	from emp t1
 11   	inner join dept t2
 12   	on ( t1.deptno = t2.deptno or t2.deptno = 20)
 13  select t1.empno, t1.ename, t1.deptno, t2.dname
 14  	from emp t1
 15  	inner join dept t2
 16  	-- on (t1.empno = 7844 and t1.deptno = t2.deptno)
 17  	on (t1.empno = 7844 )
 18  -------------- why table access full
 19  select t1.ename, t1.deptno, t2.dname
 20      from emp t1
 21      inner join dept t2
 22      on t1.deptno = t2.deptno
 23  select t1.empno, t1.ename, t1.deptno, t2.dname
 24      from emp t1
 25      inner join dept t2
 26      on t1.deptno = t2.deptno
 27  select t1.empno, t1.ename, t1.deptno
 28      from emp t1
 29      inner join dept t2
 30      on t1.deptno = t2.deptno
 31  select t2.deptno, t1.empno, t1.ename
 32      from dept t2
 33      inner join emp t1
 34      on t1.deptno = t2.deptno
 35  select t1.empno, t1.ename, t1.deptno, t2.dname
 36      from emp t1
 37      inner join dept t2
 38      on ( t1.deptno = t2.deptno and t1.empno = 7900 )
 39* -------------
 40  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t2.deptno, t1.empno, t1.ename
  2      from dept t2
  3      inner join emp t1
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/

    DEPTNO EMPNO ENAME                                                                              
---------- ----- ----------                                                                         
        10  7782 CLARK                                                                              
        10  7839 KING                                                                               
        10  7934 MILLER                                                                             
        20  7369 SMITH                                                                              
        20  7566 JONES                                                                              
        20  7788 SCOTT                                                                              
        20  7876 ADAMS                                                                              
        20  7902 FORD                                                                               
        30  7499 ALLEN                                                                              
        30  7521 WARD                                                                               
        30  7654 MARTIN                                                                             

    DEPTNO EMPNO ENAME                                                                              
---------- ----- ----------                                                                         
        30  7698 BLAKE                                                                              
        30  7844 TURNER                                                                             
        30  7900 JAMES                                                                              

已选择14行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 4287482794                                                                         
                                                                                                    
---------------------------------------------------------------------------------------             
| Id  | Operation                   | Name    | Rows  | Bytes | Cost (%CPU)| Time     |             
---------------------------------------------------------------------------------------             
|   0 | SELECT STATEMENT            |         |    14 |   182 |     2   (0)| 00:00:01 |             
|   1 |  TABLE ACCESS BY INDEX ROWID| EMP     |    14 |   182 |     2   (0)| 00:00:01 |             
|*  2 |   INDEX FULL SCAN           | INX_DEP |    14 |       |     1   (0)| 00:00:01 |             
---------------------------------------------------------------------------------------             
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   2 - filter("T1"."DEPTNO" IS NOT NULL)                                                            


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          0  db block gets                                                                          
          4  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        812  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t2.deptno, t2.dname, t1.empno, t1.ename
  2      from dept t2
  3      inner join emp t1
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/

    DEPTNO DNAME          EMPNO ENAME                                                               
---------- -------------- ----- ----------                                                          
        10 ACCOUNTING      7782 CLARK                                                               
        10 ACCOUNTING      7839 KING                                                                
        10 ACCOUNTING      7934 MILLER                                                              
        20 RESEARCH        7369 SMITH                                                               
        20 RESEARCH        7566 JONES                                                               
        20 RESEARCH        7788 SCOTT                                                               
        20 RESEARCH        7876 ADAMS                                                               
        20 RESEARCH        7902 FORD                                                                
        30 SALES           7499 ALLEN                                                               
        30 SALES           7521 WARD                                                                
        30 SALES           7654 MARTIN                                                              

    DEPTNO DNAME          EMPNO ENAME                                                               
---------- -------------- ----- ----------                                                          
        30 SALES           7698 BLAKE                                                               
        30 SALES           7844 TURNER                                                              
        30 SALES           7900 JAMES                                                               

已选择14行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 2528716167                                                                         
                                                                                                    
----------------------------------------------------------------------------------------            
| Id  | Operation                    | Name    | Rows  | Bytes | Cost (%CPU)| Time     |            
----------------------------------------------------------------------------------------            
|   0 | SELECT STATEMENT             |         |    14 |   364 |     6  (17)| 00:00:01 |            
|   1 |  MERGE JOIN                  |         |    14 |   364 |     6  (17)| 00:00:01 |            
|   2 |   TABLE ACCESS BY INDEX ROWID| EMP     |    14 |   182 |     2   (0)| 00:00:01 |            
|   3 |    INDEX FULL SCAN           | INX_DEP |    14 |       |     1   (0)| 00:00:01 |            
|*  4 |   SORT JOIN                  |         |     4 |    52 |     4  (25)| 00:00:01 |            
|   5 |    TABLE ACCESS FULL         | DEPT    |     4 |    52 |     3   (0)| 00:00:01 |            
----------------------------------------------------------------------------------------            
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   4 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                          
       filter("T1"."DEPTNO"="T2"."DEPTNO")                                                          


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          0  db block gets                                                                          
         11  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        908  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t2.deptno, t2.dname, t1.empno, t1.ename
  2      from dept t2
  3      inner join emp t1
  4*     on t2.deptno = t1.deptno
SCOTT@orcl >/

    DEPTNO DNAME          EMPNO ENAME                                                               
---------- -------------- ----- ----------                                                          
        10 ACCOUNTING      7782 CLARK                                                               
        10 ACCOUNTING      7839 KING                                                                
        10 ACCOUNTING      7934 MILLER                                                              
        20 RESEARCH        7369 SMITH                                                               
        20 RESEARCH        7566 JONES                                                               
        20 RESEARCH        7788 SCOTT                                                               
        20 RESEARCH        7876 ADAMS                                                               
        20 RESEARCH        7902 FORD                                                                
        30 SALES           7499 ALLEN                                                               
        30 SALES           7521 WARD                                                                
        30 SALES           7654 MARTIN                                                              

    DEPTNO DNAME          EMPNO ENAME                                                               
---------- -------------- ----- ----------                                                          
        30 SALES           7698 BLAKE                                                               
        30 SALES           7844 TURNER                                                              
        30 SALES           7900 JAMES                                                               

已选择14行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 2528716167                                                                         
                                                                                                    
----------------------------------------------------------------------------------------            
| Id  | Operation                    | Name    | Rows  | Bytes | Cost (%CPU)| Time     |            
----------------------------------------------------------------------------------------            
|   0 | SELECT STATEMENT             |         |    14 |   364 |     6  (17)| 00:00:01 |            
|   1 |  MERGE JOIN                  |         |    14 |   364 |     6  (17)| 00:00:01 |            
|   2 |   TABLE ACCESS BY INDEX ROWID| EMP     |    14 |   182 |     2   (0)| 00:00:01 |            
|   3 |    INDEX FULL SCAN           | INX_DEP |    14 |       |     1   (0)| 00:00:01 |            
|*  4 |   SORT JOIN                  |         |     4 |    52 |     4  (25)| 00:00:01 |            
|   5 |    TABLE ACCESS FULL         | DEPT    |     4 |    52 |     3   (0)| 00:00:01 |            
----------------------------------------------------------------------------------------            
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   4 - access("T2"."DEPTNO"="T1"."DEPTNO")                                                          
       filter("T2"."DEPTNO"="T1"."DEPTNO")                                                          


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          0  db block gets                                                                          
         11  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        908  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.deptno, t1.dname, t2.empno
  2      from dept t1
  3      inner join emp t2
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/

    DEPTNO DNAME          EMPNO                                                                     
---------- -------------- -----                                                                     
        10 ACCOUNTING      7782                                                                     
        10 ACCOUNTING      7839                                                                     
        10 ACCOUNTING      7934                                                                     
        20 RESEARCH        7566                                                                     
        20 RESEARCH        7902                                                                     
        20 RESEARCH        7876                                                                     
        20 RESEARCH        7369                                                                     
        20 RESEARCH        7788                                                                     
        30 SALES           7521                                                                     
        30 SALES           7844                                                                     
        30 SALES           7499                                                                     

    DEPTNO DNAME          EMPNO                                                                     
---------- -------------- -----                                                                     
        30 SALES           7900                                                                     
        30 SALES           7698                                                                     
        30 SALES           7654                                                                     

已选择14行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 2367338791                                                                         
                                                                                                    
-------------------------------------------------------------------------------------------------   
| Id  | Operation                    | Name             | Rows  | Bytes | Cost (%CPU)| Time     |   
-------------------------------------------------------------------------------------------------   
|   0 | SELECT STATEMENT             |                  |    14 |   280 |     6  (34)| 00:00:01 |   
|   1 |  MERGE JOIN                  |                  |    14 |   280 |     6  (34)| 00:00:01 |   
|   2 |   TABLE ACCESS BY INDEX ROWID| DEPT             |     4 |    52 |     2   (0)| 00:00:01 |   
|   3 |    INDEX FULL SCAN           | PK_DEPT          |     4 |       |     1   (0)| 00:00:01 |   
|*  4 |   SORT JOIN                  |                  |    14 |    98 |     4  (50)| 00:00:01 |   
|   5 |    VIEW                      | index$_join$_002 |    14 |    98 |     3  (34)| 00:00:01 |   
|*  6 |     HASH JOIN                |                  |       |       |            |          |   
|   7 |      INDEX FAST FULL SCAN    | INX_DEP          |    14 |    98 |     1   (0)| 00:00:01 |   
|   8 |      INDEX FAST FULL SCAN    | PK_EMP           |    14 |    98 |     1   (0)| 00:00:01 |   
-------------------------------------------------------------------------------------------------   
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   4 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                          
       filter("T1"."DEPTNO"="T2"."DEPTNO")                                                          
   6 - access(ROWID=ROWID)                                                                          


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          0  db block gets                                                                          
         12  consistent gets                                                                        
          1  physical reads                                                                         
          0  redo size                                                                              
        765  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.deptno, t1.dname, t2.empno
  2      from dept t1
  3      inner join emp t2
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/

    DEPTNO DNAME          EMPNO                                                                     
---------- -------------- -----                                                                     
        10 ACCOUNTING      7782                                                                     
        10 ACCOUNTING      7839                                                                     
        10 ACCOUNTING      7934                                                                     
        20 RESEARCH        7566                                                                     
        20 RESEARCH        7902                                                                     
        20 RESEARCH        7876                                                                     
        20 RESEARCH        7369                                                                     
        20 RESEARCH        7788                                                                     
        30 SALES           7521                                                                     
        30 SALES           7844                                                                     
        30 SALES           7499                                                                     

    DEPTNO DNAME          EMPNO                                                                     
---------- -------------- -----                                                                     
        30 SALES           7900                                                                     
        30 SALES           7698                                                                     
        30 SALES           7654                                                                     

已选择14行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 2367338791                                                                         
                                                                                                    
-------------------------------------------------------------------------------------------------   
| Id  | Operation                    | Name             | Rows  | Bytes | Cost (%CPU)| Time     |   
-------------------------------------------------------------------------------------------------   
|   0 | SELECT STATEMENT             |                  |    14 |   280 |     6  (34)| 00:00:01 |   
|   1 |  MERGE JOIN                  |                  |    14 |   280 |     6  (34)| 00:00:01 |   
|   2 |   TABLE ACCESS BY INDEX ROWID| DEPT             |     4 |    52 |     2   (0)| 00:00:01 |   
|   3 |    INDEX FULL SCAN           | PK_DEPT          |     4 |       |     1   (0)| 00:00:01 |   
|*  4 |   SORT JOIN                  |                  |    14 |    98 |     4  (50)| 00:00:01 |   
|   5 |    VIEW                      | index$_join$_002 |    14 |    98 |     3  (34)| 00:00:01 |   
|*  6 |     HASH JOIN                |                  |       |       |            |          |   
|   7 |      INDEX FAST FULL SCAN    | INX_DEP          |    14 |    98 |     1   (0)| 00:00:01 |   
|   8 |      INDEX FAST FULL SCAN    | PK_EMP           |    14 |    98 |     1   (0)| 00:00:01 |   
-------------------------------------------------------------------------------------------------   
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   4 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                          
       filter("T1"."DEPTNO"="T2"."DEPTNO")                                                          
   6 - access(ROWID=ROWID)                                                                          


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
         12  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        765  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.deptno, t1.dname, t2.ename
  2      from dept t1
  3      inner join emp t2
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/

    DEPTNO DNAME          ENAME                                                                     
---------- -------------- ----------                                                                
        10 ACCOUNTING     CLARK                                                                     
        10 ACCOUNTING     KING                                                                      
        10 ACCOUNTING     MILLER                                                                    
        20 RESEARCH       SMITH                                                                     
        20 RESEARCH       JONES                                                                     
        20 RESEARCH       SCOTT                                                                     
        20 RESEARCH       ADAMS                                                                     
        20 RESEARCH       FORD                                                                      
        30 SALES          ALLEN                                                                     
        30 SALES          WARD                                                                      
        30 SALES          MARTIN                                                                    

    DEPTNO DNAME          ENAME                                                                     
---------- -------------- ----------                                                                
        30 SALES          BLAKE                                                                     
        30 SALES          TURNER                                                                    
        30 SALES          JAMES                                                                     

已选择14行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 2528716167                                                                         
                                                                                                    
----------------------------------------------------------------------------------------            
| Id  | Operation                    | Name    | Rows  | Bytes | Cost (%CPU)| Time     |            
----------------------------------------------------------------------------------------            
|   0 | SELECT STATEMENT             |         |    14 |   308 |     6  (17)| 00:00:01 |            
|   1 |  MERGE JOIN                  |         |    14 |   308 |     6  (17)| 00:00:01 |            
|   2 |   TABLE ACCESS BY INDEX ROWID| EMP     |    14 |   126 |     2   (0)| 00:00:01 |            
|   3 |    INDEX FULL SCAN           | INX_DEP |    14 |       |     1   (0)| 00:00:01 |            
|*  4 |   SORT JOIN                  |         |     4 |    52 |     4  (25)| 00:00:01 |            
|   5 |    TABLE ACCESS FULL         | DEPT    |     4 |    52 |     3   (0)| 00:00:01 |            
----------------------------------------------------------------------------------------            
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   4 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                          
       filter("T1"."DEPTNO"="T2"."DEPTNO")                                                          


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          0  db block gets                                                                          
         11  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        794  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.deptno, t1.dname, t2.ename
  2      from dept t1
  3      inner join emp t2
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/

    DEPTNO DNAME          ENAME                                                                     
---------- -------------- ----------                                                                
        10 ACCOUNTING     CLARK                                                                     
        10 ACCOUNTING     KING                                                                      
        10 ACCOUNTING     MILLER                                                                    
        20 RESEARCH       SMITH                                                                     
        20 RESEARCH       JONES                                                                     
        20 RESEARCH       SCOTT                                                                     
        20 RESEARCH       ADAMS                                                                     
        20 RESEARCH       FORD                                                                      
        30 SALES          ALLEN                                                                     
        30 SALES          WARD                                                                      
        30 SALES          MARTIN                                                                    

    DEPTNO DNAME          ENAME                                                                     
---------- -------------- ----------                                                                
        30 SALES          BLAKE                                                                     
        30 SALES          TURNER                                                                    
        30 SALES          JAMES                                                                     

已选择14行。


执行计划
----------------------------------------------------------                                          
        713  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          4  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.empno, t1.ename, t1.deptno, t2.dname
  2  	from emp t1
  3  	inner join dept t2
  4* 	on (t1.empno = 7844 and t1.deptno = t2.deptno)
SCOTT@orcl >/

EMPNO ENAME          DEPTNO DNAME                                                                   
----- ---------- ---------- --------------                                                          
 7844 TURNER             30 SALES                                                                   


执行计划
----------------------------------------------------------                                          
Plan hash value: 2385808155                                                                         
                                                                                                    
----------------------------------------------------------------------------------------            
| Id  | Operation                    | Name    | Rows  | Bytes | Cost (%CPU)| Time     |            
----------------------------------------------------------------------------------------            
|   0 | SELECT STATEMENT             |         |     1 |    26 |     2   (0)| 00:00:01 |            
|   1 |  NESTED LOOPS                |         |     1 |    26 |     2   (0)| 00:00:01 |            
|   2 |   TABLE ACCESS BY INDEX ROWID| EMP     |     1 |    13 |     1   (0)| 00:00:01 |            
|*  3 |    INDEX UNIQUE SCAN         | PK_EMP  |     1 |       |     0   (0)| 00:00:01 |            
|   4 |   TABLE ACCESS BY INDEX ROWID| DEPT    |     4 |    52 |     1   (0)| 00:00:01 |            
|*  5 |    INDEX UNIQUE SCAN         | PK_DEPT |     1 |       |     0   (0)| 00:00:01 |            
----------------------------------------------------------------------------------------            
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   3 - access("T1"."EMPNO"=7844)                                                                    
   5 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                          


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          0  db block gets                                                                          
          4  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        615  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.empno, t1.ename, t1.deptno, t2.dname
  2  	from emp t1
  3  	inner join dept t2
  4  	-- on (t1.empno = 7844 and t1.deptno = t2.deptno)
  5* 	on (t1.empno = 7844 )
SCOTT@orcl > select t1.empno, t1.ename, t2.dname
  2   	from emp t1
  3   	inner join dept t2
  4   	on ( t1.deptno = t2.deptno or t2.deptno = 20)
  5  
SCOTT@orcl >/

EMPNO ENAME      DNAME                                                                              
----- ---------- --------------                                                                     
 7369 SMITH      RESEARCH                                                                           
 7499 ALLEN      RESEARCH                                                                           
 7521 WARD       RESEARCH                                                                           
 7566 JONES      RESEARCH                                                                           
 7654 MARTIN     RESEARCH                                                                           
 7698 BLAKE      RESEARCH                                                                           
 7782 CLARK      RESEARCH                                                                           
 7788 SCOTT      RESEARCH                                                                           
 7839 KING       RESEARCH                                                                           
 7844 TURNER     RESEARCH                                                                           
 7876 ADAMS      RESEARCH                                                                           

EMPNO ENAME      DNAME                                                                              
----- ---------- --------------                                                                     
 7900 JAMES      RESEARCH                                                                           
 7902 FORD       RESEARCH                                                                           
 7934 MILLER     RESEARCH                                                                           
 7782 CLARK      ACCOUNTING                                                                         
 7839 KING       ACCOUNTING                                                                         
 7934 MILLER     ACCOUNTING                                                                         
 7521 WARD       SALES                                                                              
 7844 TURNER     SALES                                                                              
 7499 ALLEN      SALES                                                                              
 7900 JAMES      SALES                                                                              
 7698 BLAKE      SALES                                                                              

EMPNO ENAME      DNAME                                                                              
----- ---------- --------------                                                                     
 7654 MARTIN     SALES                                                                              

已选择23行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 1487924614                                                                         
                                                                                                    
-----------------------------------------------------------------------------------------           
| Id  | Operation                     | Name    | Rows  | Bytes | Cost (%CPU)| Time     |           
-----------------------------------------------------------------------------------------           
|   0 | SELECT STATEMENT              |         |    28 |   728 |    10  (10)| 00:00:01 |           
|   1 |  CONCATENATION                |         |       |       |            |          |           
|   2 |   NESTED LOOPS                |         |    14 |   364 |     4   (0)| 00:00:01 |           
|   3 |    TABLE ACCESS BY INDEX ROWID| DEPT    |     1 |    13 |     1   (0)| 00:00:01 |           
|*  4 |     INDEX UNIQUE SCAN         | PK_DEPT |     1 |       |     0   (0)| 00:00:01 |           
|   5 |    TABLE ACCESS FULL          | EMP     |    14 |   182 |     3   (0)| 00:00:01 |           
|   6 |   MERGE JOIN                  |         |    14 |   364 |     6  (17)| 00:00:01 |           
|   7 |    TABLE ACCESS BY INDEX ROWID| DEPT    |     3 |    39 |     2   (0)| 00:00:01 |           
|*  8 |     INDEX FULL SCAN           | PK_DEPT |     4 |       |     1   (0)| 00:00:01 |           
|*  9 |    SORT JOIN                  |         |    14 |   182 |     4  (25)| 00:00:01 |           
|  10 |     TABLE ACCESS FULL         | EMP     |    14 |   182 |     3   (0)| 00:00:01 |           
-----------------------------------------------------------------------------------------           
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   4 - access("T2"."DEPTNO"=20)                                                                     
   8 - filter(LNNVL("T2"."DEPTNO"=20))                                                              
   9 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                          
       filter("T1"."DEPTNO"="T2"."DEPTNO")                                                          


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          0  db block gets                                                                          
         21  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
       1066  bytes sent via SQL*Net to client                                                       
        426  bytes received via SQL*Net from client                                                 
          3  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         23  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1   select t1.empno, t1.ename, t2.dname
  2   	from emp t1
  3   	inner join dept t2
  4*  	on ( t1.deptno = t2.deptno or t2.deptno = 20)
SCOTT@orcl >/

EMPNO ENAME      DNAME                                                                              
----- ---------- --------------                                                                     
 7369 SMITH      RESEARCH                                                                           
 7499 ALLEN      RESEARCH                                                                           
 7521 WARD       RESEARCH                                                                           
 7566 JONES      RESEARCH                                                                           
 7654 MARTIN     RESEARCH                                                                           
 7698 BLAKE      RESEARCH                                                                           
 7782 CLARK      RESEARCH                                                                           
 7788 SCOTT      RESEARCH                                                                           
 7839 KING       RESEARCH                                                                           
 7844 TURNER     RESEARCH                                                                           
 7876 ADAMS      RESEARCH                                                                           

EMPNO ENAME      DNAME                                                                              
----- ---------- --------------                                                                     
 7900 JAMES      RESEARCH                                                                           
 7902 FORD       RESEARCH                                                                           
 7934 MILLER     RESEARCH                                                                           
 7782 CLARK      ACCOUNTING                                                                         
 7839 KING       ACCOUNTING                                                                         
 7934 MILLER     ACCOUNTING                                                                         
 7521 WARD       SALES                                                                              
 7844 TURNER     SALES                                                                              
 7499 ALLEN      SALES                                                                              
 7900 JAMES      SALES                                                                              
 7698 BLAKE      SALES                                                                              

EMPNO ENAME      DNAME                                                                              
----- ---------- --------------                                                                     
 7654 MARTIN     SALES                                                                              

已选择23行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 1487924614                                                                         
                                                                                                    
-----------------------------------------------------------------------------------------           
| Id  | Operation                     | Name    | Rows  | Bytes | Cost (%CPU)| Time     |           
-----------------------------------------------------------------------------------------           
|   0 | SELECT STATEMENT              |         |    28 |   728 |    10  (10)| 00:00:01 |           
|   1 |  CONCATENATION                |         |       |       |            |          |           
|   2 |   NESTED LOOPS                |         |    14 |   364 |     4   (0)| 00:00:01 |           
|   3 |    TABLE ACCESS BY INDEX ROWID| DEPT    |     1 |    13 |     1   (0)| 00:00:01 |           
|*  4 |     INDEX UNIQUE SCAN         | PK_DEPT |     1 |       |     0   (0)| 00:00:01 |           
|   5 |    TABLE ACCESS FULL          | EMP     |    14 |   182 |     3   (0)| 00:00:01 |           
|   6 |   MERGE JOIN                  |         |    14 |   364 |     6  (17)| 00:00:01 |           
|   7 |    TABLE ACCESS BY INDEX ROWID| DEPT    |     3 |    39 |     2   (0)| 00:00:01 |           
|*  8 |     INDEX FULL SCAN           | PK_DEPT |     4 |       |     1   (0)| 00:00:01 |           
|*  9 |    SORT JOIN                  |         |    14 |   182 |     4  (25)| 00:00:01 |           
|  10 |     TABLE ACCESS FULL         | EMP     |    14 |   182 |     3   (0)| 00:00:01 |           
-----------------------------------------------------------------------------------------           
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   4 - access("T2"."DEPTNO"=20)                                                                     
   8 - filter(LNNVL("T2"."DEPTNO"=20))                                                              
   9 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                          
       filter("T1"."DEPTNO"="T2"."DEPTNO")                                                          


统计信息
----------------------------------------------------------                                          
        310  recursive calls                                                                        
          0  db block gets                                                                          
         89  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
       1066  bytes sent via SQL*Net to client                                                       
        426  bytes received via SQL*Net from client                                                 
          3  SQL*Net roundtrips to/from client                                                      
         13  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         23  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1   select t1.empno, t1.ename, t2.dname
  2   	from emp t1
  3   	inner join dept t2
  4*  	on ( t1.deptno = t2.deptno or t2.deptno = 20)
SCOTT@orcl >/

EMPNO ENAME      DNAME                                                                              
----- ---------- --------------                                                                     
 7369 SMITH      RESEARCH                                                                           
 7499 ALLEN      RESEARCH                                                                           
 7521 WARD       RESEARCH                                                                           
 7566 JONES      RESEARCH                                                                           
 7654 MARTIN     RESEARCH                                                                           
 7698 BLAKE      RESEARCH                                                                           
 7782 CLARK      RESEARCH                                                                           
 7788 SCOTT      RESEARCH                                                                           
 7839 KING       RESEARCH                                                                           
 7844 TURNER     RESEARCH                                                                           
 7876 ADAMS      RESEARCH                                                                           

EMPNO ENAME      DNAME                                                                              
----- ---------- --------------                                                                     
 7900 JAMES      RESEARCH                                                                           
 7902 FORD       RESEARCH                                                                           
 7934 MILLER     RESEARCH                                                                           
 7782 CLARK      ACCOUNTING                                                                         
 7839 KING       ACCOUNTING                                                                         
 7934 MILLER     ACCOUNTING                                                                         
 7521 WARD       SALES                                                                              
 7844 TURNER     SALES                                                                              
 7499 ALLEN      SALES                                                                              
 7900 JAMES      SALES                                                                              
 7698 BLAKE      SALES                                                                              

EMPNO ENAME      DNAME                                                                              
----- ---------- --------------                                                                     
 7654 MARTIN     SALES                                                                              

已选择23行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 1487924614                                                                         
                                                                                                    
-----------------------------------------------------------------------------------------           
| Id  | Operation                     | Name    | Rows  | Bytes | Cost (%CPU)| Time     |           
-----------------------------------------------------------------------------------------           
|   0 | SELECT STATEMENT              |         |    28 |   728 |    10  (10)| 00:00:01 |           
|   1 |  CONCATENATION                |         |       |       |            |          |           
|   2 |   NESTED LOOPS                |         |    14 |   364 |     4   (0)| 00:00:01 |           
|   3 |    TABLE ACCESS BY INDEX ROWID| DEPT    |     1 |    13 |     1   (0)| 00:00:01 |           
|*  4 |     INDEX UNIQUE SCAN         | PK_DEPT |     1 |       |     0   (0)| 00:00:01 |           
|   5 |    TABLE ACCESS FULL          | EMP     |    14 |   182 |     3   (0)| 00:00:01 |           
|   6 |   MERGE JOIN                  |         |    14 |   364 |     6  (17)| 00:00:01 |           
|   7 |    TABLE ACCESS BY INDEX ROWID| DEPT    |     3 |    39 |     2   (0)| 00:00:01 |           
|*  8 |     INDEX FULL SCAN           | PK_DEPT |     4 |       |     1   (0)| 00:00:01 |           
|*  9 |    SORT JOIN                  |         |    14 |   182 |     4  (25)| 00:00:01 |           
|  10 |     TABLE ACCESS FULL         | EMP     |    14 |   182 |     3   (0)| 00:00:01 |           
-----------------------------------------------------------------------------------------           
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   4 - access("T2"."DEPTNO"=20)                                                                     
   8 - filter(LNNVL("T2"."DEPTNO"=20))                                                              
   9 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                          
       filter("T1"."DEPTNO"="T2"."DEPTNO")                                                          


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
         21  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
       1066  bytes sent via SQL*Net to client                                                       
        426  bytes received via SQL*Net from client                                                 
          3  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         23  rows processed                                                                         

SCOTT@orcl >
SCOTT@orcl >
SCOTT@orcl >
SCOTT@orcl >
SCOTT@orcl >
SCOTT@orcl >quit
@ >conn /as sysdba
已连接。
SCOTT@orcl >show user
USER 为 "SCOTT"
SCOTT@orcl >select empno from emp;

EMPNO                                                                                               
-----                                                                                               
 7369                                                                                               
 7499                                                                                               
 7521                                                                                               
 7566                                                                                               
 7654                                                                                               
 7698                                                                                               
 7782                                                                                               
 7788                                                                                               
 7839                                                                                               
 7844                                                                                               
 7876                                                                                               

EMPNO                                                                                               
-----                                                                                               
 7900                                                                                               
 7902                                                                                               
 7934                                                                                               

已选择14行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 179099197                                                                          
                                                                                                    
---------------------------------------------------------------------------                         
| Id  | Operation        | Name   | Rows  | Bytes | Cost (%CPU)| Time     |                         
---------------------------------------------------------------------------                         
|   0 | SELECT STATEMENT |        |    14 |    56 |     1   (0)| 00:00:01 |                         
|   1 |  INDEX FULL SCAN | PK_EMP |    14 |    56 |     1   (0)| 00:00:01 |                         
---------------------------------------------------------------------------                         


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          0  db block gets                                                                          
          2  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        567  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1* select empno, ename from emp
SCOTT@orcl >/

EMPNO ENAME                                                                                         
----- ----------                                                                                    
 7369 SMITH                                                                                         
 7499 ALLEN                                                                                         
 7521 WARD                                                                                          
 7566 JONES                                                                                         
 7654 MARTIN                                                                                        
 7698 BLAKE                                                                                         
 7782 CLARK                                                                                         
 7788 SCOTT                                                                                         
 7839 KING                                                                                          
 7844 TURNER                                                                                        
 7876 ADAMS                                                                                         

EMPNO ENAME                                                                                         
----- ----------                                                                                    
 7900 JAMES                                                                                         
 7902 FORD                                                                                          
 7934 MILLER                                                                                        

已选择14行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 3956160932                                                                         
                                                                                                    
--------------------------------------------------------------------------                          
| Id  | Operation         | Name | Rows  | Bytes | Cost (%CPU)| Time     |                          
--------------------------------------------------------------------------                          
|   0 | SELECT STATEMENT  |      |    14 |   140 |     3   (0)| 00:00:01 |                          
|   1 |  TABLE ACCESS FULL| EMP  |    14 |   140 |     3   (0)| 00:00:01 |                          
--------------------------------------------------------------------------                          


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          0  db block gets                                                                          
          8  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        710  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1* select empno, ename from emp
SCOTT@orcl >/

EMPNO ENAME                                                                                         
----- ----------                                                                                    
 7369 SMITH                                                                                         
 7499 ALLEN                                                                                         
 7521 WARD                                                                                          
 7566 JONES                                                                                         
 7654 MARTIN                                                                                        
 7698 BLAKE                                                                                         
 7782 CLARK                                                                                         
 7788 SCOTT                                                                                         
 7839 KING                                                                                          
 7844 TURNER                                                                                        
 7876 ADAMS                                                                                         

EMPNO ENAME                                                                                         
----- ----------                                                                                    
 7900 JAMES                                                                                         
 7902 FORD                                                                                          
 7934 MILLER                                                                                        

已选择14行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 3956160932                                                                         
                                                                                                    
--------------------------------------------------------------------------                          
| Id  | Operation         | Name | Rows  | Bytes | Cost (%CPU)| Time     |                          
--------------------------------------------------------------------------                          
|   0 | SELECT STATEMENT  |      |    14 |   140 |     3   (0)| 00:00:01 |                          
|   1 |  TABLE ACCESS FULL| EMP  |    14 |   140 |     3   (0)| 00:00:01 |                          
--------------------------------------------------------------------------                          


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
          8  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        710  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1* select empno from emp
SCOTT@orcl >/

EMPNO                                                                                               
-----                                                                                               
 7369                                                                                               
 7499                                                                                               
 7521                                                                                               
 7566                                                                                               
 7654                                                                                               
 7698                                                                                               
 7782                                                                                               
 7788                                                                                               
 7839                                                                                               
 7844                                                                                               
 7876                                                                                               

EMPNO                                                                                               
-----                                                                                               
 7900                                                                                               
 7902                                                                                               
 7934                                                                                               

已选择14行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 179099197                                                                          
                                                                                                    
---------------------------------------------------------------------------                         
| Id  | Operation        | Name   | Rows  | Bytes | Cost (%CPU)| Time     |                         
---------------------------------------------------------------------------                         
|   0 | SELECT STATEMENT |        |    14 |    56 |     1   (0)| 00:00:01 |                         
|   1 |  INDEX FULL SCAN | PK_EMP |    14 |    56 |     1   (0)| 00:00:01 |                         
---------------------------------------------------------------------------                         


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
          2  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        567  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select empno from emp
  2* 	where empno = 7844
SCOTT@orcl >/

EMPNO                                                                                               
-----                                                                                               
 7844                                                                                               


执行计划
----------------------------------------------------------                                          
Plan hash value: 56244932                                                                           
                                                                                                    
----------------------------------------------------------------------------                        
| Id  | Operation         | Name   | Rows  | Bytes | Cost (%CPU)| Time     |                        
----------------------------------------------------------------------------                        
|   0 | SELECT STATEMENT  |        |     1 |     4 |     0   (0)| 00:00:01 |                        
|*  1 |  INDEX UNIQUE SCAN| PK_EMP |     1 |     4 |     0   (0)| 00:00:01 |                        
----------------------------------------------------------------------------                        
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   1 - access("EMPNO"=7844)                                                                         


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          0  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        421  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select empno from emp
  2* 	where empno = 7844
SCOTT@orcl >/

EMPNO                                                                                               
-----                                                                                               
 7844                                                                                               


执行计划
----------------------------------------------------------                                          
Plan hash value: 56244932                                                                           
                                                                                                    
----------------------------------------------------------------------------                        
| Id  | Operation         | Name   | Rows  | Bytes | Cost (%CPU)| Time     |                        
----------------------------------------------------------------------------                        
|   0 | SELECT STATEMENT  |        |     1 |     4 |     0   (0)| 00:00:01 |                        
|*  1 |  INDEX UNIQUE SCAN| PK_EMP |     1 |     4 |     0   (0)| 00:00:01 |                        
----------------------------------------------------------------------------                        
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   1 - access("EMPNO"=7844)                                                                         


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
          1  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        421  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select empno, ename from emp
  2* 	where empno = 7844
SCOTT@orcl >/

EMPNO ENAME                                                                                         
----- ----------                                                                                    
 7844 TURNER                                                                                        


执行计划
----------------------------------------------------------                                          
Plan hash value: 2949544139                                                                         
                                                                                                    
--------------------------------------------------------------------------------------              
| Id  | Operation                   | Name   | Rows  | Bytes | Cost (%CPU)| Time     |              
--------------------------------------------------------------------------------------              
|   0 | SELECT STATEMENT            |        |     1 |    10 |     1   (0)| 00:00:01 |              
|   1 |  TABLE ACCESS BY INDEX ROWID| EMP    |     1 |    10 |     1   (0)| 00:00:01 |              
|*  2 |   INDEX UNIQUE SCAN         | PK_EMP |     1 |       |     0   (0)| 00:00:01 |              
--------------------------------------------------------------------------------------              
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   2 - access("EMPNO"=7844)                                                                         


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          0  db block gets                                                                          
          2  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        487  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select empno, ename from emp
  2* 	where empno = 7844
SCOTT@orcl >get D:\git\db\sqlOptimize\index_scan_table_scan.sql
  1  select empno, ename from emp
  2* 	where empno = 7844
  3  
SCOTT@orcl >/

EMPNO ENAME                                                                                         
----- ----------                                                                                    
 7844 TURNER                                                                                        


执行计划
----------------------------------------------------------                                          
Plan hash value: 2949544139                                                                         
                                                                                                    
--------------------------------------------------------------------------------------              
| Id  | Operation                   | Name   | Rows  | Bytes | Cost (%CPU)| Time     |              
--------------------------------------------------------------------------------------              
|   0 | SELECT STATEMENT            |        |     1 |    10 |     1   (0)| 00:00:01 |              
|   1 |  TABLE ACCESS BY INDEX ROWID| EMP    |     1 |    10 |     1   (0)| 00:00:01 |              
|*  2 |   INDEX UNIQUE SCAN         | PK_EMP |     1 |       |     0   (0)| 00:00:01 |              
--------------------------------------------------------------------------------------              
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   2 - access("EMPNO"=7844)                                                                         


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
          2  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        487  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select empno, ename from emp
  2* 	where empno = 7844
SCOTT@orcl >get D:\git\db\sqlOptimize\index_scan_table_scan.sql
  1  select t1.empno, t1.ename, t1.deptno, t2.dname
  2  	from emp t1
  3  	inner join t2
  4* 	on (t1.empno = 7844 )
  5  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.empno, t1.ename, t1.deptno, t2.dname
  2  	from emp t1
  3  	inner join t2
  4* 	on (t1.empno = 7844 )
SCOTT@orcl >/
select t1.empno, t1.ename, t1.deptno, t2.dname
                                      *
第 1 行出现错误: 
ORA-00904: "T2"."DNAME": 标识符无效 


SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.empno, t1.ename, t1.deptno, t2.dname
  2  	from emp t1
  3  	inner join dept t2
  4* 	on (t1.empno = 7844 )
SCOTT@orcl >/

EMPNO ENAME          DEPTNO DNAME                                                                   
----- ---------- ---------- --------------                                                          
 7844 TURNER             30 ACCOUNTING                                                              
 7844 TURNER             30 RESEARCH                                                                
 7844 TURNER             30 SALES                                                                   
 7844 TURNER             30 OPERATIONS                                                              


执行计划
----------------------------------------------------------                                          
Plan hash value: 2040012094                                                                         
                                                                                                    
---------------------------------------------------------------------------------------             
| Id  | Operation                    | Name   | Rows  | Bytes | Cost (%CPU)| Time     |             
---------------------------------------------------------------------------------------             
|   0 | SELECT STATEMENT             |        |     4 |    92 |     4   (0)| 00:00:01 |             
|   1 |  NESTED LOOPS                |        |     4 |    92 |     4   (0)| 00:00:01 |             
|   2 |   TABLE ACCESS BY INDEX ROWID| EMP    |     1 |    13 |     1   (0)| 00:00:01 |             
|*  3 |    INDEX UNIQUE SCAN         | PK_EMP |     1 |       |     0   (0)| 00:00:01 |             
|   4 |   TABLE ACCESS FULL          | DEPT   |     4 |    40 |     3   (0)| 00:00:01 |             
---------------------------------------------------------------------------------------             
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   3 - access("T1"."EMPNO"=7844)                                                                    


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          0  db block gets                                                                          
         10  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        713  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          4  rows processed                                                                         

SCOTT@orcl >/

EMPNO ENAME          DEPTNO DNAME                                                                   
----- ---------- ---------- --------------                                                          
 7844 TURNER             30 ACCOUNTING                                                              
 7844 TURNER             30 RESEARCH                                                                
 7844 TURNER             30 SALES                                                                   
 7844 TURNER             30 OPERATIONS                                                              


执行计划
----------------------------------------------------------                                          
Plan hash value: 2040012094                                                                         
                                                                                                    
---------------------------------------------------------------------------------------             
| Id  | Operation                    | Name   | Rows  | Bytes | Cost (%CPU)| Time     |             
---------------------------------------------------------------------------------------             
|   0 | SELECT STATEMENT             |        |     4 |    92 |     4   (0)| 00:00:01 |             
|   1 |  NESTED LOOPS                |        |     4 |    92 |     4   (0)| 00:00:01 |             
|   2 |   TABLE ACCESS BY INDEX ROWID| EMP    |     1 |    13 |     1   (0)| 00:00:01 |             
|*  3 |    INDEX UNIQUE SCAN         | PK_EMP |     1 |       |     0   (0)| 00:00:01 |             
|   4 |   TABLE ACCESS FULL          | DEPT   |     4 |    40 |     3   (0)| 00:00:01 |             
---------------------------------------------------------------------------------------             
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   3 - access("T1"."EMPNO"=7844)                                                                    


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
         10  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        713  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          4  rows processed                                                                         

SCOTT@orcl >get D:\git\db\sqlOptimize\index_scan_table_scan.sql
  1  select t1.empno, t1.ename, t1.deptno, t2.dname
  2  	from emp t1
  3  	inner join dept t2
  4* 	on (t1.empno = 7844 )
  5  
SCOTT@orcl >/

EMPNO ENAME          DEPTNO DNAME                                                                   
----- ---------- ---------- --------------                                                          
 7844 TURNER             30 ACCOUNTING                                                              
 7844 TURNER             30 RESEARCH                                                                
 7844 TURNER             30 SALES                                                                   
 7844 TURNER             30 OPERATIONS                                                              


执行计划
----------------------------------------------------------                                          
Plan hash value: 2040012094                                                                         
                                                                                                    
---------------------------------------------------------------------------------------             
| Id  | Operation                    | Name   | Rows  | Bytes | Cost (%CPU)| Time     |             
---------------------------------------------------------------------------------------             
|   0 | SELECT STATEMENT             |        |     4 |    92 |     4   (0)| 00:00:01 |             
|   1 |  NESTED LOOPS                |        |     4 |    92 |     4   (0)| 00:00:01 |             
|   2 |   TABLE ACCESS BY INDEX ROWID| EMP    |     1 |    13 |     1   (0)| 00:00:01 |             
|*  3 |    INDEX UNIQUE SCAN         | PK_EMP |     1 |       |     0   (0)| 00:00:01 |             
|   4 |   TABLE ACCESS FULL          | DEPT   |     4 |    40 |     3   (0)| 00:00:01 |             
---------------------------------------------------------------------------------------             
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   3 - access("T1"."EMPNO"=7844)                                                                    


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
         10  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        713  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          4  rows processed                                                                         

SCOTT@orcl >get D:\git\db\sqlOptimize\index_scan_table_scan.sql
  1  select t1.empno, t1.ename, t1.deptno
  2  	from emp t1
  3  	inner join dept t2
  4  	on (t1.empno = 7844 )
  5  select t1.empno, t1.ename, t1.deptno, t2.dname
  6  	from emp t1
  7  	inner join dept t2
  8* 	on (t1.empno = 7844 )
  9  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.empno, t1.ename, t1.deptno
  2  	from emp t1
  3  	inner join dept t2
  4* 	on (t1.empno = 7844 )
SCOTT@orcl >/

EMPNO ENAME          DEPTNO                                                                         
----- ---------- ----------                                                                         
 7844 TURNER             30                                                                         
 7844 TURNER             30                                                                         
 7844 TURNER             30                                                                         
 7844 TURNER             30                                                                         


执行计划
----------------------------------------------------------                                          
Plan hash value: 3130974174                                                                         
                                                                                                    
----------------------------------------------------------------------------------------            
| Id  | Operation                    | Name    | Rows  | Bytes | Cost (%CPU)| Time     |            
----------------------------------------------------------------------------------------            
|   0 | SELECT STATEMENT             |         |     4 |    52 |     2   (0)| 00:00:01 |            
|   1 |  NESTED LOOPS                |         |     4 |    52 |     2   (0)| 00:00:01 |            
|   2 |   TABLE ACCESS BY INDEX ROWID| EMP     |     1 |    13 |     1   (0)| 00:00:01 |            
|*  3 |    INDEX UNIQUE SCAN         | PK_EMP  |     1 |       |     0   (0)| 00:00:01 |            
|   4 |   INDEX FULL SCAN            | PK_DEPT |     4 |       |     1   (0)| 00:00:01 |            
----------------------------------------------------------------------------------------            
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   3 - access("T1"."EMPNO"=7844)                                                                    


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          0  db block gets                                                                          
          4  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        617  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          4  rows processed                                                                         

SCOTT@orcl >conn /as sys dba
SP2-0306: 选项无效。
用法: CONN[ECT] [{logon|/|proxy} [AS {SYSDBA|SYSOPER|SYSASM}] [edition=value]]
其中 <logon> ::= <username>[/<password>][@<connect_identifier>]
      <proxy> ::= <proxyuser>[<username>][/<password>][@<connect_identifier>]
SCOTT@orcl >conn /as sysdba
已连接。
Plan hash value: 2528716167                                                                         
                                                                                                    
----------------------------------------------------------------------------------------            
| Id  | Operation                    | Name    | Rows  | Bytes | Cost (%CPU)| Time     |            
----------------------------------------------------------------------------------------            
|   0 | SELECT STATEMENT             |         |    14 |   308 |     6  (17)| 00:00:01 |            
|   1 |  MERGE JOIN                  |         |    14 |   308 |     6  (17)| 00:00:01 |            
|   2 |   TABLE ACCESS BY INDEX ROWID| EMP     |    14 |   126 |     2   (0)| 00:00:01 |            
|   3 |    INDEX FULL SCAN           | INX_DEP |    14 |       |     1   (0)| 00:00:01 |            
|*  4 |   SORT JOIN                  |         |     4 |    52 |     4  (25)| 00:00:01 |            
|   5 |    TABLE ACCESS FULL         | DEPT    |     4 |    52 |     3   (0)| 00:00:01 |            
----------------------------------------------------------------------------------------            
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   4 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                          
       filter("T1"."DEPTNO"="T2"."DEPTNO")                                                          


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
         11  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        794  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >commit
  2  /

提交完成。

SCOTT@orcl >/

提交完成。

SCOTT@orcl >ed
已写入 file afiedt.buf

  1* commit
SCOTT@orcl >get D:\git\db\sqlOptimize\index_scan_table_scan.sql
  1  select t1.empno, t1.ename, t1.deptno
  2  	from emp t1
  3  	inner join dept t2
  4  	on (t1.empno = 7844 )
  5  select t1.empno, t1.ename, t1.deptno, t2.dname
  6  	from emp t1
  7  	inner join dept t2
  8  	on (t1.empno = 7844 )
  9  select t1.empno, t1.ename, t2.dname
 10   	from emp t1
 11   	inner join dept t2
 12   	on ( t1.deptno = t2.deptno or t2.deptno = 20)
 13  select t1.empno, t1.ename, t1.deptno, t2.dname
 14  	from emp t1
 15  	inner join dept t2
 16  	-- on (t1.empno = 7844 and t1.deptno = t2.deptno)
 17  	on (t1.empno = 7844 )
 18  -------------- why table access full
 19  select t1.ename, t1.deptno, t2.dname
 20      from emp t1
 21      inner join dept t2
 22      on t1.deptno = t2.deptno
 23  select t1.empno, t1.ename, t1.deptno, t2.dname
 24      from emp t1
 25      inner join dept t2
 26      on t1.deptno = t2.deptno
 27  select t1.empno, t1.ename, t1.deptno
 28      from emp t1
 29      inner join dept t2
 30      on t1.deptno = t2.deptno
 31  select t2.deptno, t1.empno, t1.ename
 32      from dept t2
 33      inner join emp t1
 34      on t1.deptno = t2.deptno
 35  select t1.empno, t1.ename, t1.deptno, t2.dname
 36      from emp t1
 37      inner join dept t2
 38      on ( t1.deptno = t2.deptno and t1.empno = 7900 )
 39* -------------
 40  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t2.deptno, t1.empno, t1.ename
  2      from dept t2
  3      inner join emp t1
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/

    DEPTNO EMPNO ENAME                                                                              
---------- ----- ----------                                                                         
        10  7782 CLARK                                                                              
        10  7839 KING                                                                               
        10  7934 MILLER                                                                             
        20  7369 SMITH                                                                              
        20  7566 JONES                                                                              
        20  7788 SCOTT                                                                              
        20  7876 ADAMS                                                                              
        20  7902 FORD                                                                               
        30  7499 ALLEN                                                                              
        30  7521 WARD                                                                               
        30  7654 MARTIN                                                                             

    DEPTNO EMPNO ENAME                                                                              
---------- ----- ----------                                                                         
        30  7698 BLAKE                                                                              
        30  7844 TURNER                                                                             
        30  7900 JAMES                                                                              

已选择14行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 4287482794                                                                         
                                                                                                    
---------------------------------------------------------------------------------------             
| Id  | Operation                   | Name    | Rows  | Bytes | Cost (%CPU)| Time     |             
---------------------------------------------------------------------------------------             
|   0 | SELECT STATEMENT            |         |    14 |   182 |     2   (0)| 00:00:01 |             
|   1 |  TABLE ACCESS BY INDEX ROWID| EMP     |    14 |   182 |     2   (0)| 00:00:01 |             
|*  2 |   INDEX FULL SCAN           | INX_DEP |    14 |       |     1   (0)| 00:00:01 |             
---------------------------------------------------------------------------------------             
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   2 - filter("T1"."DEPTNO" IS NOT NULL)                                                            


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
          4  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        812  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t2.deptno, t1.empno, t1.ename
  2      from dept t2
  3      inner join emp t1
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/

    DEPTNO EMPNO ENAME                                                                              
---------- ----- ----------                                                                         
        10  7782 CLARK                                                                              
        10  7839 KING                                                                               
        10  7934 MILLER                                                                             
        20  7369 SMITH                                                                              
        20  7566 JONES                                                                              
        20  7788 SCOTT                                                                              
        20  7876 ADAMS                                                                              
        20  7902 FORD                                                                               
        30  7499 ALLEN                                                                              
        30  7521 WARD                                                                               
        30  7654 MARTIN                                                                             

    DEPTNO EMPNO ENAME                                                                              
---------- ----- ----------                                                                         
        30  7698 BLAKE                                                                              
        30  7844 TURNER                                                                             
        30  7900 JAMES                                                                              

已选择14行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 4287482794                                                                         
                                                                                                    
---------------------------------------------------------------------------------------             
| Id  | Operation                   | Name    | Rows  | Bytes | Cost (%CPU)| Time     |             
---------------------------------------------------------------------------------------             
|   0 | SELECT STATEMENT            |         |    14 |   182 |     2   (0)| 00:00:01 |             
|   1 |  TABLE ACCESS BY INDEX ROWID| EMP     |    14 |   182 |     2   (0)| 00:00:01 |             
|*  2 |   INDEX FULL SCAN           | INX_DEP |    14 |       |     1   (0)| 00:00:01 |             
---------------------------------------------------------------------------------------             
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   2 - filter("T1"."DEPTNO" IS NOT NULL)                                                            


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
          4  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        812  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >
SCOTT@orcl >get D:\git\db\sqlOptimize\index_scan_table_scan.sql
  1  select t1.empno, t1.ename, t1.deptno
  2  	from emp t1
  3  	inner join dept t2
  4  	on (t1.empno = 7844 )
  5  select t1.empno, t1.ename, t1.deptno, t2.dname
  6  	from emp t1
  7  	inner join dept t2
  8  	on (t1.empno = 7844 )
  9  select t1.empno, t1.ename, t2.dname
 10   	from emp t1
 11   	inner join dept t2
 12   	on ( t1.deptno = t2.deptno or t2.deptno = 20)
 13  select t1.empno, t1.ename, t1.deptno, t2.dname
 14  	from emp t1
 15  	inner join dept t2
 16  	-- on (t1.empno = 7844 and t1.deptno = t2.deptno)
 17  	on (t1.empno = 7844 )
 18  -------------- why table access full
 19  select t1.ename, t1.deptno, t2.dname
 20      from emp t1
 21      inner join dept t2
 22      on t1.deptno = t2.deptno
 23  select t1.empno, t1.ename, t1.deptno, t2.dname
 24      from emp t1
 25      inner join dept t2
 26      on t1.deptno = t2.deptno
 27  select t1.empno, t1.ename, t1.deptno
 28      from emp t1
 29      inner join dept t2
 30      on t1.deptno = t2.deptno
 31  select t2.deptno, t1.empno, t1.ename
 32      from dept t2
 33      inner join emp t1
 34      on t1.deptno = t2.deptno
 35  select t1.empno, t1.ename, t1.deptno, t2.dname
 36      from emp t1
 37      inner join dept t2
 38      on ( t1.deptno = t2.deptno and t1.empno = 7900 )
 39* -------------
 40  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.ename, t1.deptno, t2.dname
  2      from emp t1
  3      inner join dept t2
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/

ENAME          DEPTNO DNAME                                                                         
---------- ---------- --------------                                                                
CLARK              10 ACCOUNTING                                                                    
KING               10 ACCOUNTING                                                                    
MILLER             10 ACCOUNTING                                                                    
SMITH              20 RESEARCH                                                                      
JONES              20 RESEARCH                                                                      
SCOTT              20 RESEARCH                                                                      
ADAMS              20 RESEARCH                                                                      
FORD               20 RESEARCH                                                                      
ALLEN              30 SALES                                                                         
WARD               30 SALES                                                                         
MARTIN             30 SALES                                                                         

ENAME          DEPTNO DNAME                                                                         
---------- ---------- --------------                                                                
BLAKE              30 SALES                                                                         
TURNER             30 SALES                                                                         
JAMES              30 SALES                                                                         

已选择14行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 2528716167                                                                         
                                                                                                    
----------------------------------------------------------------------------------------            
| Id  | Operation                    | Name    | Rows  | Bytes | Cost (%CPU)| Time     |            
----------------------------------------------------------------------------------------            
|   0 | SELECT STATEMENT             |         |    14 |   308 |     6  (17)| 00:00:01 |            
|   1 |  MERGE JOIN                  |         |    14 |   308 |     6  (17)| 00:00:01 |            
|   2 |   TABLE ACCESS BY INDEX ROWID| EMP     |    14 |   126 |     2   (0)| 00:00:01 |            
|   3 |    INDEX FULL SCAN           | INX_DEP |    14 |       |     1   (0)| 00:00:01 |            
|*  4 |   SORT JOIN                  |         |     4 |    52 |     4  (25)| 00:00:01 |            
|   5 |    TABLE ACCESS FULL         | DEPT    |     4 |    52 |     3   (0)| 00:00:01 |            
----------------------------------------------------------------------------------------            
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   4 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                          
       filter("T1"."DEPTNO"="T2"."DEPTNO")                                                          


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
         11  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        794  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.ename, t1.deptno, t2.dname
  2      from emp t1
  3      inner join dept t2
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >get D:\git\db\sqlOptimize\index_scan_table_scan.sql
  1  select t1.empno, t1.ename, t1.deptno
  2  	from emp t1
  3  	inner join dept t2
  4  	on (t1.empno = 7844 )
  5  select t1.empno, t1.ename, t1.deptno, t2.dname
  6  	from emp t1
  7  	inner join dept t2
  8  	on (t1.empno = 7844 )
  9  select t1.empno, t1.ename, t2.dname
 10   	from emp t1
 11   	inner join dept t2
 12   	on ( t1.deptno = t2.deptno or t2.deptno = 20)
 13  select t1.empno, t1.ename, t1.deptno, t2.dname
 14  	from emp t1
 15  	inner join dept t2
 16  	-- on (t1.empno = 7844 and t1.deptno = t2.deptno)
 17  	on (t1.empno = 7844 )
 18  -------------- why table access full
 19  select t1.ename, t1.deptno, t2.dname
 20      from emp t1
 21      inner join dept t2
 22      on t1.deptno = t2.deptno
 23  select t1.empno, t1.ename, t1.deptno, t2.dname
 24      from emp t1
 25      inner join dept t2
 26      on t1.deptno = t2.deptno
 27  select t1.empno, t1.ename, t1.deptno
 28      from emp t1
 29      inner join dept t2
 30      on t1.deptno = t2.deptno
 31  select t2.dname, t2.deptno, t1.ename
 32      from dept t1
 33      inner join emp t2
 34      on t1.deptno = t2.deptno
 35  select t1.empno, t1.ename, t1.deptno, t2.dname
 36      from emp t1
 37      inner join dept t2
 38      on ( t1.deptno = t2.deptno and t1.empno = 7900 )
 39* -------------
 40  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t2.dname, t2.deptno, t1.ename
  2      from dept t1
  3      inner join emp t2
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/
select t2.dname, t2.deptno, t1.ename
                            *
第 1 行出现错误: 
ORA-00904: "T1"."ENAME": 标识符无效 


SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t2.dname, t2.deptno, t1.ename
  2      from dept t2
  3      inner join emp t1
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/

DNAME              DEPTNO ENAME                                                                     
-------------- ---------- ----------                                                                
ACCOUNTING             10 CLARK                                                                     
ACCOUNTING             10 KING                                                                      
ACCOUNTING             10 MILLER                                                                    
RESEARCH               20 SMITH                                                                     
RESEARCH               20 JONES                                                                     
RESEARCH               20 SCOTT                                                                     
RESEARCH               20 ADAMS                                                                     
RESEARCH               20 FORD                                                                      
SALES                  30 ALLEN                                                                     
SALES                  30 WARD                                                                      
SALES                  30 MARTIN                                                                    

DNAME              DEPTNO ENAME                                                                     
-------------- ---------- ----------                                                                
SALES                  30 BLAKE                                                                     
SALES                  30 TURNER                                                                    
SALES                  30 JAMES                                                                     

已选择14行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 2528716167                                                                         
                                                                                                    
----------------------------------------------------------------------------------------            
| Id  | Operation                    | Name    | Rows  | Bytes | Cost (%CPU)| Time     |            
----------------------------------------------------------------------------------------            
|   0 | SELECT STATEMENT             |         |    14 |   308 |     6  (17)| 00:00:01 |            
|   1 |  MERGE JOIN                  |         |    14 |   308 |     6  (17)| 00:00:01 |            
|   2 |   TABLE ACCESS BY INDEX ROWID| EMP     |    14 |   126 |     2   (0)| 00:00:01 |            
|   3 |    INDEX FULL SCAN           | INX_DEP |    14 |       |     1   (0)| 00:00:01 |            
|*  4 |   SORT JOIN                  |         |     4 |    52 |     4  (25)| 00:00:01 |            
|   5 |    TABLE ACCESS FULL         | DEPT    |     4 |    52 |     3   (0)| 00:00:01 |            
----------------------------------------------------------------------------------------            
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   4 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                          
       filter("T1"."DEPTNO"="T2"."DEPTNO")                                                          


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          0  db block gets                                                                          
         11  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        794  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >get D:\git\db\sqlOptimize\index_scan_table_scan.sql
  1  select t1.empno, t1.ename, t1.deptno
  2  	from emp t1
  3  	inner join dept t2
  4  	on (t1.empno = 7844 )
  5  select t1.empno, t1.ename, t1.deptno, t2.dname
  6  	from emp t1
  7  	inner join dept t2
  8  	on (t1.empno = 7844 )
  9  select t1.empno, t1.ename, t2.dname
 10   	from emp t1
 11   	inner join dept t2
 12   	on ( t1.deptno = t2.deptno or t2.deptno = 20)
 13  select t1.empno, t1.ename, t1.deptno, t2.dname
 14  	from emp t1
 15  	inner join dept t2
 16  	-- on (t1.empno = 7844 and t1.deptno = t2.deptno)
 17  	on (t1.empno = 7844 )
 18  -------------- why table access full
 19  select t1.ename, t1.deptno, t2.dname
 20      from emp t1
 21      inner join dept t2
 22      on t1.deptno = t2.deptno
 23  select t1.empno, t1.ename, t1.deptno, t2.dname
 24      from emp t1
 25      inner join dept t2
 26      on t1.deptno = t2.deptno
 27  select t1.empno, t1.ename, t1.deptno
 28      from emp t1
 29      inner join dept t2
 30      on t1.deptno = t2.deptno
 31  select t1.dname, t1.deptno, t2.ename
 32      from dept t1
 33      inner join emp t2
 34      on t1.deptno = t2.deptno
 35  select t1.empno, t1.ename, t1.deptno, t2.dname
 36      from emp t1
 37      inner join dept t2
 38      on ( t1.deptno = t2.deptno and t1.empno = 7900 )
 39* -------------
 40  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.dname, t1.deptno, t2.ename
  2      from dept t1
  3      inner join emp t2
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/

DNAME              DEPTNO ENAME                                                                     
-------------- ---------- ----------                                                                
ACCOUNTING             10 CLARK                                                                     
ACCOUNTING             10 KING                                                                      
ACCOUNTING             10 MILLER                                                                    
RESEARCH               20 SMITH                                                                     
RESEARCH               20 JONES                                                                     
RESEARCH               20 SCOTT                                                                     
RESEARCH               20 ADAMS                                                                     
RESEARCH               20 FORD                                                                      
SALES                  30 ALLEN                                                                     
SALES                  30 WARD                                                                      
SALES                  30 MARTIN                                                                    

DNAME              DEPTNO ENAME                                                                     
-------------- ---------- ----------                                                                
SALES                  30 BLAKE                                                                     
SALES                  30 TURNER                                                                    
SALES                  30 JAMES                                                                     

已选择14行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 2528716167                                                                         
                                                                                                    
----------------------------------------------------------------------------------------            
| Id  | Operation                    | Name    | Rows  | Bytes | Cost (%CPU)| Time     |            
----------------------------------------------------------------------------------------            
|   0 | SELECT STATEMENT             |         |    14 |   308 |     6  (17)| 00:00:01 |            
|   1 |  MERGE JOIN                  |         |    14 |   308 |     6  (17)| 00:00:01 |            
|   2 |   TABLE ACCESS BY INDEX ROWID| EMP     |    14 |   126 |     2   (0)| 00:00:01 |            
|   3 |    INDEX FULL SCAN           | INX_DEP |    14 |       |     1   (0)| 00:00:01 |            
|*  4 |   SORT JOIN                  |         |     4 |    52 |     4  (25)| 00:00:01 |            
|   5 |    TABLE ACCESS FULL         | DEPT    |     4 |    52 |     3   (0)| 00:00:01 |            
----------------------------------------------------------------------------------------            
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   4 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                          
       filter("T1"."DEPTNO"="T2"."DEPTNO")                                                          


统计信息
----------------------------------------------------------                                          
          1  recursive calls                                                                        
          0  db block gets                                                                          
         11  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        794  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.dname, t1.deptno, t2.ename
  2      from dept t1
  3      inner join emp t2
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >create or replace procedure ctab as
  2  
  3    i number;
  4  
  5  begin
  6  
  7      execute immediate 'create table dd as
  8  
  9      select * from dept';
 10  
 11      execute immediate 'alter table dd add constraint pk_dd primary key(deptno)';
 12  
 13  
 14  
 15  end;
 16  
 17  
 18  /

过程已创建。

SCOTT@orcl >exec ctab;
BEGIN ctab; END;

*
第 1 行出现错误: 
ORA-01031: 权限不足
ORA-06512: 在 "SCOTT.CTAB", line 7
ORA-06512: 在 line 1 


SCOTT@orcl >exec ctab;

PL/SQL 过程已成功完成。

SCOTT@orcl >create or replace procedure itab
  2  
  3  as
  4  
  5  begin
  6  
  7    for i in 100 .. 900 loop
  8  
  9        insert into dd values (i, 'TEST', 'BEIJING');
 10  
 11      end loop;
 12  
 13      comm
 14  
 15  /

警告: 创建的过程带有编译错误。

SCOTT@orcl >ed
已写入 file afiedt.buf

  1  create or replace procedure itab
  2  as
  3  begin
  4    for i in 100 .. 10000 loop
  5        insert into dd values (i, 'TEST', 'BEIJING');
  6      end loop;
  7*     comm
SCOTT@orcl >/

警告: 创建的过程带有编译错误。

SCOTT@orcl >show error
PROCEDURE ITAB 出现错误: 

LINE/COL ERROR                                                                                      
-------- -----------------------------------------------------------------                          
7/8      PLS-00103: 出现符号 "end-of-file"在需要下列之一时：                                        
         := . ( @ % ;                                                                               
                                                                                                    
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  create or replace procedure itab
  2  as
  3  begin
  4    for i in 100 .. 10000 loop
  5        insert into dd values (i, 'TEST', 'BEIJING');
  6      end loop;
  7      commit;
  8*     end
SCOTT@orcl >/

警告: 创建的过程带有编译错误。

SCOTT@orcl >
SCOTT@orcl >show error
PROCEDURE ITAB 出现错误: 

LINE/COL ERROR                                                                                      
-------- -----------------------------------------------------------------                          
8/7      PLS-00103: 出现符号 "end-of-file"在需要下列之一时：                                        
         ; <an identifier>                                                                          
         <a double-quoted delimited-identifier> current delete exists                               
         prior <a single-quoted SQL string>                                                         
         符号 ";" 被替换为 "end-of-file" 后继续。                                                   
                                                                                                    
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  create or replace procedure itab
  2  as
  3  begin
  4    for i in 100 .. 10000 loop
  5        insert into dd values (i, 'TEST', 'BEIJING');
  6      end loop;
  7      commit;
  8*     end;
SCOTT@orcl >/

过程已创建。

SCOTT@orcl >exec itab
BEGIN itab; END;

*
第 1 行出现错误: 
ORA-01438: 值大于为此列指定的允许精度
ORA-06512: 在 "SCOTT.ITAB", line 5
ORA-06512: 在 line 1 


SCOTT@orcl >alter table dd modify deptno number(10);

表已更改。

SCOTT@orcl >exec itab

PL/SQL 过程已成功完成。

SCOTT@orcl >select count(*) from dd
  2  
SCOTT@orcl >/

  COUNT(*)                                                                                          
----------                                                                                          
      9905                                                                                          


执行计划
----------------------------------------------------------                                          
Plan hash value: 292567942                                                                          
                                                                                                    
-----------------------------------------------------------------------                             
| Id  | Operation             | Name  | Rows  | Cost (%CPU)| Time     |                             
-----------------------------------------------------------------------                             
|   0 | SELECT STATEMENT      |       |     1 |     7   (0)| 00:00:01 |                             
|   1 |  SORT AGGREGATE       |       |     1 |            |          |                             
|   2 |   INDEX FAST FULL SCAN| PK_DD |  9905 |     7   (0)| 00:00:01 |                             
-----------------------------------------------------------------------                             
                                                                                                    
Note                                                                                                
-----                                                                                               
   - dynamic sampling used for this statement (level=2)                                             


统计信息
----------------------------------------------------------                                          
          5  recursive calls                                                                        
          0  db block gets                                                                          
         67  consistent gets                                                                        
          0  physical reads                                                                         
        124  redo size                                                                              
        424  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
          1  rows processed                                                                         

SCOTT@orcl >get D:\git\db\sqlOptimize\index_scan_table_scan.sql
  1  select t1.empno, t1.ename, t1.deptno
  2  	from emp t1
  3  	inner join dept t2
  4  	on (t1.empno = 7844 )
  5  select t1.empno, t1.ename, t1.deptno, t2.dname
  6  	from emp t1
  7  	inner join dept t2
  8  	on (t1.empno = 7844 )
  9  select t1.empno, t1.ename, t2.dname
 10   	from emp t1
 11   	inner join dept t2
 12   	on ( t1.deptno = t2.deptno or t2.deptno = 20)
 13  select t1.empno, t1.ename, t1.deptno, t2.dname
 14  	from emp t1
 15  	inner join dept t2
 16  	-- on (t1.empno = 7844 and t1.deptno = t2.deptno)
 17  	on (t1.empno = 7844 )
 18  -------------- why table access full
 19  select t1.ename, t1.deptno, t2.dname
 20      from emp t1
 21      inner join dept t2
 22      on t1.deptno = t2.deptno
 23  select t1.empno, t1.ename, t1.deptno, t2.dname
 24      from emp t1
 25      inner join dept t2
 26      on t1.deptno = t2.deptno
 27  select t1.empno, t1.ename, t1.deptno
 28      from emp t1
 29      inner join dept t2
 30      on t1.deptno = t2.deptno
 31  select t1.dname, t1.deptno, t2.ename
 32      from dept t1
 33      inner join emp t2
 34      on t1.deptno = t2.deptno
 35  select t1.empno, t1.ename, t1.deptno, t2.dname
 36      from emp t1
 37      inner join dept t2
 38      on ( t1.deptno = t2.deptno and t1.empno = 7900 )
 39* -------------
 40  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.ename, t1.deptno, t2.dname
  2      from emp t1
  3      inner join dept t2
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/

ENAME          DEPTNO DNAME                                                                         
---------- ---------- --------------                                                                
CLARK              10 ACCOUNTING                                                                    
KING               10 ACCOUNTING                                                                    
MILLER             10 ACCOUNTING                                                                    
SMITH              20 RESEARCH                                                                      
JONES              20 RESEARCH                                                                      
SCOTT              20 RESEARCH                                                                      
ADAMS              20 RESEARCH                                                                      
FORD               20 RESEARCH                                                                      
ALLEN              30 SALES                                                                         
WARD               30 SALES                                                                         
MARTIN             30 SALES                                                                         

ENAME          DEPTNO DNAME                                                                         
---------- ---------- --------------                                                                
BLAKE              30 SALES                                                                         
TURNER             30 SALES                                                                         
JAMES              30 SALES                                                                         

已选择14行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 2528716167                                                                         
                                                                                                    
----------------------------------------------------------------------------------------            
| Id  | Operation                    | Name    | Rows  | Bytes | Cost (%CPU)| Time     |            
----------------------------------------------------------------------------------------            
|   0 | SELECT STATEMENT             |         |    14 |   308 |     6  (17)| 00:00:01 |            
|   1 |  MERGE JOIN                  |         |    14 |   308 |     6  (17)| 00:00:01 |            
|   2 |   TABLE ACCESS BY INDEX ROWID| EMP     |    14 |   126 |     2   (0)| 00:00:01 |            
|   3 |    INDEX FULL SCAN           | INX_DEP |    14 |       |     1   (0)| 00:00:01 |            
|*  4 |   SORT JOIN                  |         |     4 |    52 |     4  (25)| 00:00:01 |            
|   5 |    TABLE ACCESS FULL         | DEPT    |     4 |    52 |     3   (0)| 00:00:01 |            
----------------------------------------------------------------------------------------            
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   4 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                          
       filter("T1"."DEPTNO"="T2"."DEPTNO")                                                          


统计信息
----------------------------------------------------------                                          
          0  recursive calls                                                                        
          0  db block gets                                                                          
         11  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        794  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          1  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.ename, t1.deptno, t2.dname
  2      from emp t1
  3      inner join dd t2
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/

ENAME          DEPTNO DNAME                                                                         
---------- ---------- --------------                                                                
MILLER             10 ACCOUNTING                                                                    
KING               10 ACCOUNTING                                                                    
CLARK              10 ACCOUNTING                                                                    
FORD               20 RESEARCH                                                                      
ADAMS              20 RESEARCH                                                                      
SCOTT              20 RESEARCH                                                                      
JONES              20 RESEARCH                                                                      
SMITH              20 RESEARCH                                                                      
JAMES              30 SALES                                                                         
TURNER             30 SALES                                                                         
BLAKE              30 SALES                                                                         

ENAME          DEPTNO DNAME                                                                         
---------- ---------- --------------                                                                
MARTIN             30 SALES                                                                         
WARD               30 SALES                                                                         
ALLEN              30 SALES                                                                         

已选择14行。


执行计划
----------------------------------------------------------                                          
Plan hash value: 2370737155                                                                         
                                                                                                    
---------------------------------------------------------------------------                         
| Id  | Operation          | Name | Rows  | Bytes | Cost (%CPU)| Time     |                         
---------------------------------------------------------------------------                         
|   0 | SELECT STATEMENT   |      |    14 |   434 |    16   (7)| 00:00:01 |                         
|*  1 |  HASH JOIN         |      |    14 |   434 |    16   (7)| 00:00:01 |                         
|   2 |   TABLE ACCESS FULL| EMP  |    14 |   126 |     3   (0)| 00:00:01 |                         
|   3 |   TABLE ACCESS FULL| DD   |  9905 |   212K|    12   (0)| 00:00:01 |                         
---------------------------------------------------------------------------                         
                                                                                                    
Predicate Information (identified by operation id):                                                 
---------------------------------------------------                                                 
                                                                                                    
   1 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                          
                                                                                                    
Note                                                                                                
-----                                                                                               
   - dynamic sampling used for this statement (level=2)                                             


统计信息
----------------------------------------------------------                                          
         28  recursive calls                                                                        
          0  db block gets                                                                          
         88  consistent gets                                                                        
          0  physical reads                                                                         
          0  redo size                                                                              
        794  bytes sent via SQL*Net to client                                                       
        415  bytes received via SQL*Net from client                                                 
          2  SQL*Net roundtrips to/from client                                                      
          0  sorts (memory)                                                                         
          0  sorts (disk)                                                                           
         14  rows processed                                                                         

SCOTT@orcl >alter system set _hash_join_enabled = false;
alter system set _hash_join_enabled = false
                 *
第 1 行出现错误: 
ORA-00911: 无效字符 


SCOTT@orcl >alter system set '_hash_join_enabled' = false;
alter system set '_hash_join_enabled' = false
                 *
第 1 行出现错误: 
ORA-00922: 选项缺失或无效 


SCOTT@orcl >alter system set "_hash_join_enabled" = false;
alter system set "_hash_join_enabled" = false
                 *
第 1 行出现错误: 
ORA-02096: 此选项的指定初始化参数不可修改 


SCOTT@orcl >alter system set "_hash_join_enabled" = false scope = spfile;

系统已更改。

SCOTT@orcl >show parameter _hash_join_enabled
SCOTT@orcl >show parameter _hash
SCOTT@orcl >shutdown immediate
ORA-01031: 权限不足
SCOTT@orcl >show parameter _hash
ORA-03113: 通信通道的文件结尾
进程 ID: 2484
会话 ID: 58 序列号: 967 


SCOTT@orcl >show user
USER 为 "SCOTT"
SCOTT@orcl >select * from emp
  2  /
搜集统计信息时出错 ORA-3114
SP2-0612: 生成 AUTOTRACE 报告时出错
ERROR:
ORA-03114: 未连接到 ORACLE 


ERROR:
ORA-03114: 未连接到 ORACLE 


SCOTT@orcl >quit
SCOTT@orcl >get D:\git\db\sqlOptimize\index_scan_table_scan.sql
  1  select t1.empno, t1.ename, t1.deptno
  2  	from emp t1
  3  	inner join dept t2
  4  	on (t1.empno = 7844 )
  5  select t1.empno, t1.ename, t1.deptno, t2.dname
  6  	from emp t1
  7  	inner join dept t2
  8  	on (t1.empno = 7844 )
  9  select t1.empno, t1.ename, t2.dname
 10   	from emp t1
 11   	inner join dept t2
 12   	on ( t1.deptno = t2.deptno or t2.deptno = 20)
 13  select t1.empno, t1.ename, t1.deptno, t2.dname
 14  	from emp t1
 15  	inner join dept t2
 16  	-- on (t1.empno = 7844 and t1.deptno = t2.deptno)
 17  	on (t1.empno = 7844 )
 18  -------------- why table access full
 19  select t1.ename, t1.deptno, t2.dname
 20      from emp t1
 21      inner join dept t2
 22      on t1.deptno = t2.deptno
 23  select t1.empno, t1.ename, t1.deptno, t2.dname
 24      from emp t1
 25      inner join dept t2
 26      on t1.deptno = t2.deptno
 27  select t1.empno, t1.ename, t1.deptno
 28      from emp t1
 29      inner join dept t2
 30      on t1.deptno = t2.deptno
 31  select t1.dname, t1.deptno, t2.ename
 32      from dept t1
 33      inner join emp t2
 34      on t1.deptno = t2.deptno
 35  select t1.empno, t1.ename, t1.deptno, t2.dname
 36      from emp t1
 37      inner join dept t2
 38      on ( t1.deptno = t2.deptno and t1.empno = 7900 )
 39* -------------
 40  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.empno, t1.ename, t1.deptno
  2      from emp t1
  3      inner join dept t2
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/

EMPNO ENAME          DEPTNO                                                                                                                           
----- ---------- ----------                                                                                                                           
 7782 CLARK              10                                                                                                                           
 7839 KING               10                                                                                                                           
 7934 MILLER             10                                                                                                                           
 7369 SMITH              20                                                                                                                           
 7566 JONES              20                                                                                                                           
 7788 SCOTT              20                                                                                                                           
 7876 ADAMS              20                                                                                                                           
 7902 FORD               20                                                                                                                           
 7499 ALLEN              30                                                                                                                           
 7521 WARD               30                                                                                                                           
 7654 MARTIN             30                                                                                                                           

EMPNO ENAME          DEPTNO                                                                                                                           
----- ---------- ----------                                                                                                                           
 7698 BLAKE              30                                                                                                                           
 7844 TURNER             30                                                                                                                           
 7900 JAMES              30                                                                                                                           

已选择14行。


执行计划
----------------------------------------------------------                                                                                            
Plan hash value: 4287482794                                                                                                                           
                                                                                                                                                      
---------------------------------------------------------------------------------------                                                               
| Id  | Operation                   | Name    | Rows  | Bytes | Cost (%CPU)| Time     |                                                               
---------------------------------------------------------------------------------------                                                               
|   0 | SELECT STATEMENT            |         |    14 |   182 |     2   (0)| 00:00:01 |                                                               
|   1 |  TABLE ACCESS BY INDEX ROWID| EMP     |    14 |   182 |     2   (0)| 00:00:01 |                                                               
|*  2 |   INDEX FULL SCAN           | INX_DEP |    14 |       |     1   (0)| 00:00:01 |                                                               
---------------------------------------------------------------------------------------                                                               
                                                                                                                                                      
Predicate Information (identified by operation id):                                                                                                   
---------------------------------------------------                                                                                                   
                                                                                                                                                      
   2 - filter("T1"."DEPTNO" IS NOT NULL)                                                                                                              


统计信息
----------------------------------------------------------                                                                                            
        689  recursive calls                                                                                                                          
          0  db block gets                                                                                                                            
        135  consistent gets                                                                                                                          
          8  physical reads                                                                                                                           
          0  redo size                                                                                                                                
        812  bytes sent via SQL*Net to client                                                                                                         
        415  bytes received via SQL*Net from client                                                                                                   
          2  SQL*Net roundtrips to/from client                                                                                                        
         12  sorts (memory)                                                                                                                           
          0  sorts (disk)                                                                                                                             
         14  rows processed                                                                                                                           

SCOTT@orcl >
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.empno, t1.ename, t1.deptno, t2.dname
  2      from emp t1
  3      inner join dept t2
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/

EMPNO ENAME          DEPTNO DNAME                                                                                                                     
----- ---------- ---------- --------------                                                                                                            
 7782 CLARK              10 ACCOUNTING                                                                                                                
 7839 KING               10 ACCOUNTING                                                                                                                
 7934 MILLER             10 ACCOUNTING                                                                                                                
 7369 SMITH              20 RESEARCH                                                                                                                  
 7566 JONES              20 RESEARCH                                                                                                                  
 7788 SCOTT              20 RESEARCH                                                                                                                  
 7876 ADAMS              20 RESEARCH                                                                                                                  
 7902 FORD               20 RESEARCH                                                                                                                  
 7499 ALLEN              30 SALES                                                                                                                     
 7521 WARD               30 SALES                                                                                                                     
 7654 MARTIN             30 SALES                                                                                                                     

EMPNO ENAME          DEPTNO DNAME                                                                                                                     
----- ---------- ---------- --------------                                                                                                            
 7698 BLAKE              30 SALES                                                                                                                     
 7844 TURNER             30 SALES                                                                                                                     
 7900 JAMES              30 SALES                                                                                                                     

已选择14行。


执行计划
----------------------------------------------------------                                                                                            
Plan hash value: 2528716167                                                                                                                           
                                                                                                                                                      
----------------------------------------------------------------------------------------                                                              
| Id  | Operation                    | Name    | Rows  | Bytes | Cost (%CPU)| Time     |                                                              
----------------------------------------------------------------------------------------                                                              
|   0 | SELECT STATEMENT             |         |    14 |   364 |     6  (17)| 00:00:01 |                                                              
|   1 |  MERGE JOIN                  |         |    14 |   364 |     6  (17)| 00:00:01 |                                                              
|   2 |   TABLE ACCESS BY INDEX ROWID| EMP     |    14 |   182 |     2   (0)| 00:00:01 |                                                              
|   3 |    INDEX FULL SCAN           | INX_DEP |    14 |       |     1   (0)| 00:00:01 |                                                              
|*  4 |   SORT JOIN                  |         |     4 |    52 |     4  (25)| 00:00:01 |                                                              
|   5 |    TABLE ACCESS FULL         | DEPT    |     4 |    52 |     3   (0)| 00:00:01 |                                                              
----------------------------------------------------------------------------------------                                                              
                                                                                                                                                      
Predicate Information (identified by operation id):                                                                                                   
---------------------------------------------------                                                                                                   
                                                                                                                                                      
   4 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                                                                            
       filter("T1"."DEPTNO"="T2"."DEPTNO")                                                                                                            


统计信息
----------------------------------------------------------                                                                                            
         44  recursive calls                                                                                                                          
          0  db block gets                                                                                                                            
         17  consistent gets                                                                                                                          
          6  physical reads                                                                                                                           
          0  redo size                                                                                                                                
        908  bytes sent via SQL*Net to client                                                                                                         
        415  bytes received via SQL*Net from client                                                                                                   
          2  SQL*Net roundtrips to/from client                                                                                                        
          1  sorts (memory)                                                                                                                           
          0  sorts (disk)                                                                                                                             
         14  rows processed                                                                                                                           

SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.empno, t1.ename, t1.deptno, t2.dname
  2      from emp t1
  3      inner join dd t2
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/

EMPNO ENAME          DEPTNO DNAME                                                                                                                     
----- ---------- ---------- --------------                                                                                                            
 7782 CLARK              10 ACCOUNTING                                                                                                                
 7839 KING               10 ACCOUNTING                                                                                                                
 7934 MILLER             10 ACCOUNTING                                                                                                                
 7369 SMITH              20 RESEARCH                                                                                                                  
 7566 JONES              20 RESEARCH                                                                                                                  
 7788 SCOTT              20 RESEARCH                                                                                                                  
 7876 ADAMS              20 RESEARCH                                                                                                                  
 7902 FORD               20 RESEARCH                                                                                                                  
 7499 ALLEN              30 SALES                                                                                                                     
 7521 WARD               30 SALES                                                                                                                     
 7654 MARTIN             30 SALES                                                                                                                     

EMPNO ENAME          DEPTNO DNAME                                                                                                                     
----- ---------- ---------- --------------                                                                                                            
 7698 BLAKE              30 SALES                                                                                                                     
 7844 TURNER             30 SALES                                                                                                                     
 7900 JAMES              30 SALES                                                                                                                     

已选择14行。


执行计划
----------------------------------------------------------                                                                                            
Plan hash value: 1749740217                                                                                                                           
                                                                                                                                                      
----------------------------------------------------------------------------------------                                                              
| Id  | Operation                    | Name    | Rows  | Bytes | Cost (%CPU)| Time     |                                                              
----------------------------------------------------------------------------------------                                                              
|   0 | SELECT STATEMENT             |         |    14 |   322 |    16   (7)| 00:00:01 |                                                              
|   1 |  NESTED LOOPS                |         |       |       |            |          |                                                              
|   2 |   NESTED LOOPS               |         |    14 |   322 |    16   (7)| 00:00:01 |                                                              
|   3 |    TABLE ACCESS FULL         | DD      |  9905 | 99050 |    12   (0)| 00:00:01 |                                                              
|*  4 |    INDEX RANGE SCAN          | INX_DEP |     5 |       |     0   (0)| 00:00:01 |                                                              
|   5 |   TABLE ACCESS BY INDEX ROWID| EMP     |     1 |    13 |     1   (0)| 00:00:01 |                                                              
----------------------------------------------------------------------------------------                                                              
                                                                                                                                                      
Predicate Information (identified by operation id):                                                                                                   
---------------------------------------------------                                                                                                   
                                                                                                                                                      
   4 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                                                                            


统计信息
----------------------------------------------------------                                                                                            
        334  recursive calls                                                                                                                          
          0  db block gets                                                                                                                            
         99  consistent gets                                                                                                                          
         39  physical reads                                                                                                                           
          0  redo size                                                                                                                                
        908  bytes sent via SQL*Net to client                                                                                                         
        415  bytes received via SQL*Net from client                                                                                                   
          2  SQL*Net roundtrips to/from client                                                                                                        
          6  sorts (memory)                                                                                                                           
          0  sorts (disk)                                                                                                                             
         14  rows processed                                                                                                                           

SCOTT@orcl >show parameter _hash
ORA-03113: 通信通道的文件结尾
进程 ID: 1968
会话 ID: 29 序列号: 10 


SCOTT@orcl >
SCOTT@orcl >quit
SYS@orcl >grant crate any table to scott;
grant crate any table to scott
      *
第 1 行出现错误: 
ORA-00990: 权限缺失或无效 


SYS@orcl >grant create any table to scott;

授权成功。

SYS@orcl >quit
SCOTT@orcl >get D:\git\db\sqlOptimize\1_2_4.sql
  1  create table t1( col1 number, col2 varchar2( 1 ) )
  2  create table t2( col2 varchar2( 1 ), col3 varchar2( 2 ) )
  3  insert into t1 values( 1, 'A' )
  4  insert into t1 values( 2, 'B' )
  5  insert into t1 values( 3, 'C' )
  6  insert into t2 values( 'A', 'A2' )
  7  insert into t2 values( 'B', 'B2' )
  8  insert into t2 values( 'D', 'D2' )
  9  -- inner join
 10  select t1.col1, t1.col2, t2.col3
 11  	from t1, t2
 12  	where t1.col2 = t2.col2
 13  select t1.col1, t1.col2, t2.col3
 14  	from t1
 15  	inner join t2
 16  	on ( t1.col2 = t2.col3 )
 17  -- left outer join
 18  select t1.col1, t1.col2, t2.col3
 19  	from t1
 20  	left outer join t2
 21  	on ( t1.col2 = t2.col2 )
 22  -- right outer join
 23  select t1.col1, t1.col2, t2.col3
 24  	from t1
 25  	right outer join t2
 26  	on ( t1.col2 = t2.col2 )
 27  -- full outer join
 28  select t1.col1, t1.col2, t2.col3
 29  	from t1
 30  	full outer join t2
 31* 	on ( t1.col2 = t2.col2 )
 32  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  create table t1( col1 number, col2 varchar2( 1 ) )
  2  create table t2( col2 varchar2( 1 ), col3 varchar2( 2 ) )
  3  insert into t1 values( 1, 'A' )
  4  insert into t1 values( 2, 'B' )
  5  insert into t1 values( 3, 'C' )
  6  insert into t2 values( 'A', 'A2' )
  7  insert into t2 values( 'B', 'B2' )
  8  insert into t2 values( 'D', 'D2' )
  9  -- inner join
 10  select t1.col1, t1.col2, t2.col3
 11  	from t1, t2
 12  	where t1.col2 = t2.col2
 13  select t1.col1, t1.col2, t2.col3
 14  	from t1
 15  	inner join t2
 16  	on ( t1.col2 = t2.col3 )
 17  -- left outer join
 18  select t1.col1, t1.col2, t2.col3
 19  	from t1
 20  	left outer join t2
 21  	on ( t1.col2 = t2.col2 )
 22  -- right outer join
 23  select t1.col1, t1.col2, t2.col3
 24  	from t1
 25  	right outer join t2
 26  	on ( t1.col2 = t2.col2 )
 27  -- full outer join
 28  select t1.col1, t1.col2, t2.col3
 29  	from t1
 30  	full outer join t2
 31* 	on ( t1.col2 = t2.col2 )
SCOTT@orcl >get D:\git\db\sqlOptimize\index_scan_table_scan.sql
  1  select t1.empno, t1.ename, t1.deptno
  2  	from emp t1
  3  	inner join dept t2
  4  	on (t1.empno = 7844 )
  5  select t1.empno, t1.ename, t1.deptno, t2.dname
  6  	from emp t1
  7  	inner join dept t2
  8  	on (t1.empno = 7844 )
  9  select t1.empno, t1.ename, t2.dname
 10   	from emp t1
 11   	inner join dept t2
 12   	on ( t1.deptno = t2.deptno or t2.deptno = 20)
 13  select t1.empno, t1.ename, t1.deptno, t2.dname
 14  	from emp t1
 15  	inner join dept t2
 16  	-- on (t1.empno = 7844 and t1.deptno = t2.deptno)
 17  	on (t1.empno = 7844 )
 18  -------------- why table access full
 19  select t1.ename, t1.deptno, t2.dname
 20      from emp t1
 21      inner join dept t2
 22      on t1.deptno = t2.deptno
 23  select t1.empno, t1.ename, t1.deptno, t2.dname
 24      from emp t1
 25      inner join dept t2
 26      on t1.deptno = t2.deptno
 27  select t1.empno, t1.ename, t1.deptno
 28      from emp t1
 29      inner join dept t2
 30      on t1.deptno = t2.deptno
 31  select t1.dname, t1.deptno, t2.ename
 32      from dept t1
 33      inner join emp t2
 34      on t1.deptno = t2.deptno
 35  select t1.empno, t1.ename, t1.deptno, t2.dname
 36      from emp t1
 37      inner join dept t2
 38      on ( t1.deptno = t2.deptno and t1.empno = 7900 )
 39  -- force using access full scan
 40* select deptno from dept
 41  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.ename, t1.deptno, t2.dname
  2      from emp t1
  3      inner join dept t2
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/

ENAME          DEPTNO DNAME                                                                                                                           
---------- ---------- --------------                                                                                                                  
CLARK              10 ACCOUNTING                                                                                                                      
KING               10 ACCOUNTING                                                                                                                      
MILLER             10 ACCOUNTING                                                                                                                      
SMITH              20 RESEARCH                                                                                                                        
JONES              20 RESEARCH                                                                                                                        
SCOTT              20 RESEARCH                                                                                                                        
ADAMS              20 RESEARCH                                                                                                                        
FORD               20 RESEARCH                                                                                                                        
ALLEN              30 SALES                                                                                                                           
WARD               30 SALES                                                                                                                           
MARTIN             30 SALES                                                                                                                           

ENAME          DEPTNO DNAME                                                                                                                           
---------- ---------- --------------                                                                                                                  
BLAKE              30 SALES                                                                                                                           
TURNER             30 SALES                                                                                                                           
JAMES              30 SALES                                                                                                                           

已选择14行。


执行计划
----------------------------------------------------------                                                                                            
Plan hash value: 2528716167                                                                                                                           
                                                                                                                                                      
----------------------------------------------------------------------------------------                                                              
| Id  | Operation                    | Name    | Rows  | Bytes | Cost (%CPU)| Time     |                                                              
----------------------------------------------------------------------------------------                                                              
|   0 | SELECT STATEMENT             |         |    14 |   308 |     6  (17)| 00:00:01 |                                                              
|   1 |  MERGE JOIN                  |         |    14 |   308 |     6  (17)| 00:00:01 |                                                              
|   2 |   TABLE ACCESS BY INDEX ROWID| EMP     |    14 |   126 |     2   (0)| 00:00:01 |                                                              
|   3 |    INDEX FULL SCAN           | INX_DEP |    14 |       |     1   (0)| 00:00:01 |                                                              
|*  4 |   SORT JOIN                  |         |     4 |    52 |     4  (25)| 00:00:01 |                                                              
|   5 |    TABLE ACCESS FULL         | DEPT    |     4 |    52 |     3   (0)| 00:00:01 |                                                              
----------------------------------------------------------------------------------------                                                              
                                                                                                                                                      
Predicate Information (identified by operation id):                                                                                                   
---------------------------------------------------                                                                                                   
                                                                                                                                                      
   4 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                                                                            
       filter("T1"."DEPTNO"="T2"."DEPTNO")                                                                                                            


统计信息
----------------------------------------------------------                                                                                            
          0  recursive calls                                                                                                                          
          0  db block gets                                                                                                                            
         11  consistent gets                                                                                                                          
          0  physical reads                                                                                                                           
          0  redo size                                                                                                                                
        794  bytes sent via SQL*Net to client                                                                                                         
        415  bytes received via SQL*Net from client                                                                                                   
          2  SQL*Net roundtrips to/from client                                                                                                        
          1  sorts (memory)                                                                                                                           
          0  sorts (disk)                                                                                                                             
         14  rows processed                                                                                                                           

SCOTT@orcl >get D:\git\db\sqlOptimize\index_scan_table_scan.sql
  1  select t1.empno, t1.ename, t1.deptno
  2  	from emp t1
  3  	inner join dept t2
  4  	on (t1.empno = 7844 )
  5  select t1.empno, t1.ename, t1.deptno, t2.dname
  6  	from emp t1
  7  	inner join dept t2
  8  	on (t1.empno = 7844 )
  9  select t1.empno, t1.ename, t2.dname
 10   	from emp t1
 11   	inner join dept t2
 12   	on ( t1.deptno = t2.deptno or t2.deptno = 20)
 13  select t1.empno, t1.ename, t1.deptno, t2.dname
 14  	from emp t1
 15  	inner join dept t2
 16  	-- on (t1.empno = 7844 and t1.deptno = t2.deptno)
 17  	on (t1.empno = 7844 )
 18  -------------- why table access full
 19  select t1.ename, t1.deptno, t2.dname
 20      from emp t1
 21      inner join dept t2
 22      on t1.deptno = t2.deptno
 23  -- force using index
 24  select /*+ index(t2 pk_dept ) */ t1.ename, t1.deptno, t2.dname
 25      from emp t1
 26      inner join dept t2
 27      on t1.deptno = t2.deptno
 28  select t1.empno, t1.ename, t1.deptno, t2.dname
 29      from emp t1
 30      inner join dept t2
 31      on t1.deptno = t2.deptno
 32  select t1.empno, t1.ename, t1.deptno
 33      from emp t1
 34      inner join dept t2
 35      on t1.deptno = t2.deptno
 36  select t1.dname, t1.deptno, t2.ename
 37      from dept t1
 38      inner join emp t2
 39      on t1.deptno = t2.deptno
 40  select t1.empno, t1.ename, t1.deptno, t2.dname
 41      from emp t1
 42      inner join dept t2
 43      on ( t1.deptno = t2.deptno and t1.empno = 7900 )
 44  -- force using access full scan
 45* select deptno from dept
 46  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select /*+ index(t2 pk_dept ) */ t1.ename, t1.deptno, t2.dname
  2      from emp t1
  3      inner join dept t2
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/

ENAME          DEPTNO DNAME                                                                                                                           
---------- ---------- --------------                                                                                                                  
CLARK              10 ACCOUNTING                                                                                                                      
KING               10 ACCOUNTING                                                                                                                      
MILLER             10 ACCOUNTING                                                                                                                      
SMITH              20 RESEARCH                                                                                                                        
JONES              20 RESEARCH                                                                                                                        
SCOTT              20 RESEARCH                                                                                                                        
ADAMS              20 RESEARCH                                                                                                                        
FORD               20 RESEARCH                                                                                                                        
ALLEN              30 SALES                                                                                                                           
WARD               30 SALES                                                                                                                           
MARTIN             30 SALES                                                                                                                           

ENAME          DEPTNO DNAME                                                                                                                           
---------- ---------- --------------                                                                                                                  
BLAKE              30 SALES                                                                                                                           
TURNER             30 SALES                                                                                                                           
JAMES              30 SALES                                                                                                                           

已选择14行。


执行计划
----------------------------------------------------------                                                                                            
Plan hash value: 1158787846                                                                                                                           
                                                                                                                                                      
-----------------------------------------------------------------------------------------                                                             
| Id  | Operation                     | Name    | Rows  | Bytes | Cost (%CPU)| Time     |                                                             
-----------------------------------------------------------------------------------------                                                             
|   0 | SELECT STATEMENT              |         |    14 |   308 |     5  (20)| 00:00:01 |                                                             
|   1 |  MERGE JOIN                   |         |    14 |   308 |     5  (20)| 00:00:01 |                                                             
|   2 |   TABLE ACCESS BY INDEX ROWID | EMP     |    14 |   126 |     2   (0)| 00:00:01 |                                                             
|   3 |    INDEX FULL SCAN            | INX_DEP |    14 |       |     1   (0)| 00:00:01 |                                                             
|*  4 |   SORT JOIN                   |         |     4 |    52 |     3  (34)| 00:00:01 |                                                             
|   5 |    TABLE ACCESS BY INDEX ROWID| DEPT    |     4 |    52 |     2   (0)| 00:00:01 |                                                             
|   6 |     INDEX FULL SCAN           | PK_DEPT |     4 |       |     1   (0)| 00:00:01 |                                                             
-----------------------------------------------------------------------------------------                                                             
                                                                                                                                                      
Predicate Information (identified by operation id):                                                                                                   
---------------------------------------------------                                                                                                   
                                                                                                                                                      
   4 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                                                                            
       filter("T1"."DEPTNO"="T2"."DEPTNO")                                                                                                            


统计信息
----------------------------------------------------------                                                                                            
          0  recursive calls                                                                                                                          
          0  db block gets                                                                                                                            
          6  consistent gets                                                                                                                          
          0  physical reads                                                                                                                           
          0  redo size                                                                                                                                
        794  bytes sent via SQL*Net to client                                                                                                         
        415  bytes received via SQL*Net from client                                                                                                   
          2  SQL*Net roundtrips to/from client                                                                                                        
          1  sorts (memory)                                                                                                                           
          0  sorts (disk)                                                                                                                             
         14  rows processed                                                                                                                           

SCOTT@orcl >conn /as sysdba;
已连接。
SYS@orcl >show user
USER 为 "SYS"
SYS@orcl >alter system set optimizer_mode = rule;

系统已更改。

SYS@orcl >conn scott/tiger;
已连接。
SCOTT@orcl >desc dept
 名称                                                                                是否为空? 类型
 ----------------------------------------------------------------------------------- -------- --------------------------------------------------------
 DEPTNO                                                                              NOT NULL NUMBER(2)
 DNAME                                                                                        VARCHAR2(14)
 LOC                                                                                          VARCHAR2(13)

SCOTT@orcl >select deptno from dept;

    DEPTNO                                                                                                                                            
----------                                                                                                                                            
        10                                                                                                                                            
        20                                                                                                                                            
        30                                                                                                                                            
        40                                                                                                                                            


执行计划
----------------------------------------------------------                                                                                            
Plan hash value: 2913917002                                                                                                                           
                                                                                                                                                      
----------------------------------------------------------------------------                                                                          
| Id  | Operation        | Name    | Rows  | Bytes | Cost (%CPU)| Time     |                                                                          
----------------------------------------------------------------------------                                                                          
|   0 | SELECT STATEMENT |         |     4 |    12 |     1   (0)| 00:00:01 |                                                                          
|   1 |  INDEX FULL SCAN | PK_DEPT |     4 |    12 |     1   (0)| 00:00:01 |                                                                          
----------------------------------------------------------------------------                                                                          


统计信息
----------------------------------------------------------                                                                                            
        151  recursive calls                                                                                                                          
          0  db block gets                                                                                                                            
         30  consistent gets                                                                                                                          
          2  physical reads                                                                                                                           
          0  redo size                                                                                                                                
        475  bytes sent via SQL*Net to client                                                                                                         
        415  bytes received via SQL*Net from client                                                                                                   
          2  SQL*Net roundtrips to/from client                                                                                                        
          0  sorts (memory)                                                                                                                           
          0  sorts (disk)                                                                                                                             
          4  rows processed                                                                                                                           

SCOTT@orcl >get D:\git\db\sqlOptimize\index_scan_table_scan.sql
  1  select t1.empno, t1.ename, t1.deptno
  2  	from emp t1
  3  	inner join dept t2
  4  	on (t1.empno = 7844 )
  5  select t1.empno, t1.ename, t1.deptno, t2.dname
  6  	from emp t1
  7  	inner join dept t2
  8  	on (t1.empno = 7844 )
  9  select t1.empno, t1.ename, t2.dname
 10   	from emp t1
 11   	inner join dept t2
 12   	on ( t1.deptno = t2.deptno or t2.deptno = 20)
 13  select t1.empno, t1.ename, t1.deptno, t2.dname
 14  	from emp t1
 15  	inner join dept t2
 16  	-- on (t1.empno = 7844 and t1.deptno = t2.deptno)
 17  	on (t1.empno = 7844 )
 18  -------------- why table access full
 19  select t1.ename, t1.deptno, t2.dname
 20      from emp t1
 21      inner join dept t2
 22      on t1.deptno = t2.deptno
 23  select t1.empno, t1.ename, t1.deptno, t2.dname
 24      from emp t1
 25      inner join dept t2
 26      on t1.deptno = t2.deptno
 27  select t1.empno, t1.ename, t1.deptno
 28      from emp t1
 29      inner join dept t2
 30      on t1.deptno = t2.deptno
 31  select t1.dname, t1.deptno, t2.ename
 32      from dept t1
 33      inner join emp t2
 34      on t1.deptno = t2.deptno
 35  select t1.empno, t1.ename, t1.deptno, t2.dname
 36      from emp t1
 37      inner join dept t2
 38      on ( t1.deptno = t2.deptno and t1.empno = 7900 )
 39  -- force using access full scan
 40* select deptno from dept
 41  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.ename, t1.deptno, t2.dname
  2      from emp t1
  3      inner join dept t2
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/

ENAME          DEPTNO DNAME                                                                                                                           
---------- ---------- --------------                                                                                                                  
CLARK              10 ACCOUNTING                                                                                                                      
KING               10 ACCOUNTING                                                                                                                      
MILLER             10 ACCOUNTING                                                                                                                      
SMITH              20 RESEARCH                                                                                                                        
JONES              20 RESEARCH                                                                                                                        
SCOTT              20 RESEARCH                                                                                                                        
ADAMS              20 RESEARCH                                                                                                                        
FORD               20 RESEARCH                                                                                                                        
ALLEN              30 SALES                                                                                                                           
WARD               30 SALES                                                                                                                           
MARTIN             30 SALES                                                                                                                           

ENAME          DEPTNO DNAME                                                                                                                           
---------- ---------- --------------                                                                                                                  
BLAKE              30 SALES                                                                                                                           
TURNER             30 SALES                                                                                                                           
JAMES              30 SALES                                                                                                                           

已选择14行。


执行计划
----------------------------------------------------------                                                                                            
Plan hash value: 2528716167                                                                                                                           
                                                                                                                                                      
----------------------------------------------------------------------------------------                                                              
| Id  | Operation                    | Name    | Rows  | Bytes | Cost (%CPU)| Time     |                                                              
----------------------------------------------------------------------------------------                                                              
|   0 | SELECT STATEMENT             |         |    14 |   308 |     6  (17)| 00:00:01 |                                                              
|   1 |  MERGE JOIN                  |         |    14 |   308 |     6  (17)| 00:00:01 |                                                              
|   2 |   TABLE ACCESS BY INDEX ROWID| EMP     |    14 |   126 |     2   (0)| 00:00:01 |                                                              
|   3 |    INDEX FULL SCAN           | INX_DEP |    14 |       |     1   (0)| 00:00:01 |                                                              
|*  4 |   SORT JOIN                  |         |     4 |    52 |     4  (25)| 00:00:01 |                                                              
|   5 |    TABLE ACCESS FULL         | DEPT    |     4 |    52 |     3   (0)| 00:00:01 |                                                              
----------------------------------------------------------------------------------------                                                              
                                                                                                                                                      
Predicate Information (identified by operation id):                                                                                                   
---------------------------------------------------                                                                                                   
                                                                                                                                                      
   4 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                                                                            
       filter("T1"."DEPTNO"="T2"."DEPTNO")                                                                                                            


统计信息
----------------------------------------------------------                                                                                            
        431  recursive calls                                                                                                                          
          0  db block gets                                                                                                                            
         91  consistent gets                                                                                                                          
          9  physical reads                                                                                                                           
          0  redo size                                                                                                                                
        794  bytes sent via SQL*Net to client                                                                                                         
        415  bytes received via SQL*Net from client                                                                                                   
          2  SQL*Net roundtrips to/from client                                                                                                        
          7  sorts (memory)                                                                                                                           
          0  sorts (disk)                                                                                                                             
         14  rows processed                                                                                                                           

SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select /*+ index(t2 pk_dept ) */ t1.ename, t1.deptno, t2.dname 
  2      from emp t1
  3      inner join dept t2
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/

ENAME          DEPTNO DNAME                                                                                                                           
---------- ---------- --------------                                                                                                                  
CLARK              10 ACCOUNTING                                                                                                                      
KING               10 ACCOUNTING                                                                                                                      
MILLER             10 ACCOUNTING                                                                                                                      
SMITH              20 RESEARCH                                                                                                                        
JONES              20 RESEARCH                                                                                                                        
SCOTT              20 RESEARCH                                                                                                                        
ADAMS              20 RESEARCH                                                                                                                        
FORD               20 RESEARCH                                                                                                                        
ALLEN              30 SALES                                                                                                                           
WARD               30 SALES                                                                                                                           
MARTIN             30 SALES                                                                                                                           

ENAME          DEPTNO DNAME                                                                                                                           
---------- ---------- --------------                                                                                                                  
BLAKE              30 SALES                                                                                                                           
TURNER             30 SALES                                                                                                                           
JAMES              30 SALES                                                                                                                           

已选择14行。


执行计划
----------------------------------------------------------                                                                                            
Plan hash value: 1158787846                                                                                                                           
                                                                                                                                                      
-----------------------------------------------------------------------------------------                                                             
| Id  | Operation                     | Name    | Rows  | Bytes | Cost (%CPU)| Time     |                                                             
-----------------------------------------------------------------------------------------                                                             
|   0 | SELECT STATEMENT              |         |    14 |   308 |     5  (20)| 00:00:01 |                                                             
|   1 |  MERGE JOIN                   |         |    14 |   308 |     5  (20)| 00:00:01 |                                                             
|   2 |   TABLE ACCESS BY INDEX ROWID | EMP     |    14 |   126 |     2   (0)| 00:00:01 |                                                             
|   3 |    INDEX FULL SCAN            | INX_DEP |    14 |       |     1   (0)| 00:00:01 |                                                             
|*  4 |   SORT JOIN                   |         |     4 |    52 |     3  (34)| 00:00:01 |                                                             
|   5 |    TABLE ACCESS BY INDEX ROWID| DEPT    |     4 |    52 |     2   (0)| 00:00:01 |                                                             
|   6 |     INDEX FULL SCAN           | PK_DEPT |     4 |       |     1   (0)| 00:00:01 |                                                             
-----------------------------------------------------------------------------------------                                                             
                                                                                                                                                      
Predicate Information (identified by operation id):                                                                                                   
---------------------------------------------------                                                                                                   
                                                                                                                                                      
   4 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                                                                            
       filter("T1"."DEPTNO"="T2"."DEPTNO")                                                                                                            


统计信息
----------------------------------------------------------                                                                                            
          1  recursive calls                                                                                                                          
          0  db block gets                                                                                                                            
          6  consistent gets                                                                                                                          
          0  physical reads                                                                                                                           
          0  redo size                                                                                                                                
        794  bytes sent via SQL*Net to client                                                                                                         
        415  bytes received via SQL*Net from client                                                                                                   
          2  SQL*Net roundtrips to/from client                                                                                                        
          1  sorts (memory)                                                                                                                           
          0  sorts (disk)                                                                                                                             
         14  rows processed                                                                                                                           

SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select /*+ index(t2 pk_dept ) */ t1.ename, t1.deptno, t2.dname
  2      from emp t1
  3      inner join dept t2
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/

ENAME          DEPTNO DNAME                                                                                                                           
---------- ---------- --------------                                                                                                                  
CLARK              10 ACCOUNTING                                                                                                                      
KING               10 ACCOUNTING                                                                                                                      
MILLER             10 ACCOUNTING                                                                                                                      
SMITH              20 RESEARCH                                                                                                                        
JONES              20 RESEARCH                                                                                                                        
SCOTT              20 RESEARCH                                                                                                                        
ADAMS              20 RESEARCH                                                                                                                        
FORD               20 RESEARCH                                                                                                                        
ALLEN              30 SALES                                                                                                                           
WARD               30 SALES                                                                                                                           
MARTIN             30 SALES                                                                                                                           

ENAME          DEPTNO DNAME                                                                                                                           
---------- ---------- --------------                                                                                                                  
BLAKE              30 SALES                                                                                                                           
TURNER             30 SALES                                                                                                                           
JAMES              30 SALES                                                                                                                           

已选择14行。


执行计划
----------------------------------------------------------                                                                                            
Plan hash value: 1158787846                                                                                                                           
                                                                                                                                                      
-----------------------------------------------------------------------------------------                                                             
| Id  | Operation                     | Name    | Rows  | Bytes | Cost (%CPU)| Time     |                                                             
-----------------------------------------------------------------------------------------                                                             
|   0 | SELECT STATEMENT              |         |    14 |   308 |     5  (20)| 00:00:01 |                                                             
|   1 |  MERGE JOIN                   |         |    14 |   308 |     5  (20)| 00:00:01 |                                                             
|   2 |   TABLE ACCESS BY INDEX ROWID | EMP     |    14 |   126 |     2   (0)| 00:00:01 |                                                             
|   3 |    INDEX FULL SCAN            | INX_DEP |    14 |       |     1   (0)| 00:00:01 |                                                             
|*  4 |   SORT JOIN                   |         |     4 |    52 |     3  (34)| 00:00:01 |                                                             
|   5 |    TABLE ACCESS BY INDEX ROWID| DEPT    |     4 |    52 |     2   (0)| 00:00:01 |                                                             
|   6 |     INDEX FULL SCAN           | PK_DEPT |     4 |       |     1   (0)| 00:00:01 |                                                             
-----------------------------------------------------------------------------------------                                                             
                                                                                                                                                      
Predicate Information (identified by operation id):                                                                                                   
---------------------------------------------------                                                                                                   
                                                                                                                                                      
   4 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                                                                            
       filter("T1"."DEPTNO"="T2"."DEPTNO")                                                                                                            


统计信息
----------------------------------------------------------                                                                                            
          1  recursive calls                                                                                                                          
          0  db block gets                                                                                                                            
          6  consistent gets                                                                                                                          
          0  physical reads                                                                                                                           
          0  redo size                                                                                                                                
        794  bytes sent via SQL*Net to client                                                                                                         
        415  bytes received via SQL*Net from client                                                                                                   
          2  SQL*Net roundtrips to/from client                                                                                                        
          1  sorts (memory)                                                                                                                           
          0  sorts (disk)                                                                                                                             
         14  rows processed                                                                                                                           

SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select /*+ index(t2 pk_dept ) */ t1.ename, t1.deptno, t2.dname
  2      from emp t1
  3      inner join dept t2
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select /*+ index(t2 pk_dept ) */ t1.ename, t1.deptno, t2.dname
  2      from emp t1
  3      inner join t2
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/
    on t1.deptno = t2.deptno
                   *
第 4 行出现错误: 
ORA-00904: "T2"."DEPTNO": 标识符无效 


SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select /*+ index(t2 pk_dept ) */ t1.ename, t1.deptno, t2.dname
  2      from emp t1
  3      inner join dept t2
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/

ENAME          DEPTNO DNAME                                                                                                                           
---------- ---------- --------------                                                                                                                  
CLARK              10 ACCOUNTING                                                                                                                      
KING               10 ACCOUNTING                                                                                                                      
MILLER             10 ACCOUNTING                                                                                                                      
SMITH              20 RESEARCH                                                                                                                        
JONES              20 RESEARCH                                                                                                                        
SCOTT              20 RESEARCH                                                                                                                        
ADAMS              20 RESEARCH                                                                                                                        
FORD               20 RESEARCH                                                                                                                        
ALLEN              30 SALES                                                                                                                           
WARD               30 SALES                                                                                                                           
MARTIN             30 SALES                                                                                                                           

ENAME          DEPTNO DNAME                                                                                                                           
---------- ---------- --------------                                                                                                                  
BLAKE              30 SALES                                                                                                                           
TURNER             30 SALES                                                                                                                           
JAMES              30 SALES                                                                                                                           

已选择14行。


执行计划
----------------------------------------------------------                                                                                            
Plan hash value: 1158787846                                                                                                                           
                                                                                                                                                      
-----------------------------------------------------------------------------------------                                                             
| Id  | Operation                     | Name    | Rows  | Bytes | Cost (%CPU)| Time     |                                                             
-----------------------------------------------------------------------------------------                                                             
|   0 | SELECT STATEMENT              |         |    14 |   308 |     5  (20)| 00:00:01 |                                                             
|   1 |  MERGE JOIN                   |         |    14 |   308 |     5  (20)| 00:00:01 |                                                             
|   2 |   TABLE ACCESS BY INDEX ROWID | EMP     |    14 |   126 |     2   (0)| 00:00:01 |                                                             
|   3 |    INDEX FULL SCAN            | INX_DEP |    14 |       |     1   (0)| 00:00:01 |                                                             
|*  4 |   SORT JOIN                   |         |     4 |    52 |     3  (34)| 00:00:01 |                                                             
|   5 |    TABLE ACCESS BY INDEX ROWID| DEPT    |     4 |    52 |     2   (0)| 00:00:01 |                                                             
|   6 |     INDEX FULL SCAN           | PK_DEPT |     4 |       |     1   (0)| 00:00:01 |                                                             
-----------------------------------------------------------------------------------------                                                             
                                                                                                                                                      
Predicate Information (identified by operation id):                                                                                                   
---------------------------------------------------                                                                                                   
                                                                                                                                                      
   4 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                                                                            
       filter("T1"."DEPTNO"="T2"."DEPTNO")                                                                                                            


统计信息
----------------------------------------------------------                                                                                            
          0  recursive calls                                                                                                                          
          0  db block gets                                                                                                                            
          6  consistent gets                                                                                                                          
          0  physical reads                                                                                                                           
          0  redo size                                                                                                                                
        794  bytes sent via SQL*Net to client                                                                                                         
        415  bytes received via SQL*Net from client                                                                                                   
          2  SQL*Net roundtrips to/from client                                                                                                        
          1  sorts (memory)                                                                                                                           
          0  sorts (disk)                                                                                                                             
         14  rows processed                                                                                                                           

SCOTT@orcl >select * from dept;

    DEPTNO DNAME          LOC                                                                                                                         
---------- -------------- -------------                                                                                                               
        10 ACCOUNTING     NEW YORK                                                                                                                    
        20 RESEARCH       DALLAS                                                                                                                      
        30 SALES          CHICAGO                                                                                                                     
        40 OPERATIONS     BOSTON                                                                                                                      


执行计划
----------------------------------------------------------                                                                                            
Plan hash value: 3383998547                                                                                                                           
                                                                                                                                                      
--------------------------------------------------------------------------                                                                            
| Id  | Operation         | Name | Rows  | Bytes | Cost (%CPU)| Time     |                                                                            
--------------------------------------------------------------------------                                                                            
|   0 | SELECT STATEMENT  |      |     4 |    80 |     3   (0)| 00:00:01 |                                                                            
|   1 |  TABLE ACCESS FULL| DEPT |     4 |    80 |     3   (0)| 00:00:01 |                                                                            
--------------------------------------------------------------------------                                                                            


统计信息
----------------------------------------------------------                                                                                            
         24  recursive calls                                                                                                                          
          0  db block gets                                                                                                                            
         11  consistent gets                                                                                                                          
          0  physical reads                                                                                                                           
          0  redo size                                                                                                                                
        667  bytes sent via SQL*Net to client                                                                                                         
        415  bytes received via SQL*Net from client                                                                                                   
          2  SQL*Net roundtrips to/from client                                                                                                        
          0  sorts (memory)                                                                                                                           
          0  sorts (disk)                                                                                                                             
          4  rows processed                                                                                                                           

SCOTT@orcl >
SCOTT@orcl >select * from emp;

EMPNO ENAME      JOB              MGR HIREDATE                SAL       COMM     DEPTNO                                                               
----- ---------- --------- ---------- -------------- ------------ ---------- ----------                                                               
 7369 SMITH      CLERK           7902 17-12月-80          $800.00                    20                                                               
 7499 ALLEN      SALESMAN        7698 20-2月 -81        $1,600.00        300         30                                                               
 7521 WARD       SALESMAN        7698 22-2月 -81        $1,250.00        500         30                                                               
 7566 JONES      MANAGER         7839 02-4月 -81        $2,975.00                    20                                                               
 7654 MARTIN     SALESMAN        7698 28-9月 -81        $1,250.00       1400         30                                                               
 7698 BLAKE      MANAGER         7839 01-5月 -81        $2,850.00                    30                                                               
 7782 CLARK      MANAGER         7839 09-6月 -81        $2,450.00                    10                                                               
 7788 SCOTT      ANALYST         7566 19-4月 -87        $3,000.00                    20                                                               
 7839 KING       PRESIDENT            17-11月-81        $5,000.00                    10                                                               
 7844 TURNER     SALESMAN        7698 08-9月 -81        $1,500.00          0         30                                                               
 7876 ADAMS      CLERK           7788 23-5月 -87        $1,100.00                    20                                                               

EMPNO ENAME      JOB              MGR HIREDATE                SAL       COMM     DEPTNO                                                               
----- ---------- --------- ---------- -------------- ------------ ---------- ----------                                                               
 7900 JAMES      CLERK           7698 03-12月-81          $950.00                    30                                                               
 7902 FORD       ANALYST         7566 03-12月-81        $3,000.00                    20                                                               
 7934 MILLER     CLERK           7782 23-1月 -82        $1,300.00                    10                                                               

已选择14行。


执行计划
----------------------------------------------------------                                                                                            
Plan hash value: 3956160932                                                                                                                           
                                                                                                                                                      
--------------------------------------------------------------------------                                                                            
| Id  | Operation         | Name | Rows  | Bytes | Cost (%CPU)| Time     |                                                                            
--------------------------------------------------------------------------                                                                            
|   0 | SELECT STATEMENT  |      |    14 |   532 |     3   (0)| 00:00:01 |                                                                            
|   1 |  TABLE ACCESS FULL| EMP  |    14 |   532 |     3   (0)| 00:00:01 |                                                                            
--------------------------------------------------------------------------                                                                            


统计信息
----------------------------------------------------------                                                                                            
        124  recursive calls                                                                                                                          
          0  db block gets                                                                                                                            
         26  consistent gets                                                                                                                          
          5  physical reads                                                                                                                           
          0  redo size                                                                                                                                
       1455  bytes sent via SQL*Net to client                                                                                                         
        415  bytes received via SQL*Net from client                                                                                                   
          2  SQL*Net roundtrips to/from client                                                                                                        
          0  sorts (memory)                                                                                                                           
          0  sorts (disk)                                                                                                                             
         14  rows processed                                                                                                                           

SCOTT@orcl >get D:\git\db\sqlOptimize\index_scan_table_scan.sql
  1  select t1.empno, t1.ename, t1.deptno
  2  	from emp t1
  3  	inner join dept t2
  4  	on (t1.empno = 7844 )
  5  select t1.empno, t1.ename, t1.deptno, t2.dname
  6  	from emp t1
  7  	inner join dept t2
  8  	on (t1.empno = 7844 )
  9  select t1.empno, t1.ename, t2.dname
 10   	from emp t1
 11   	inner join dept t2
 12   	on ( t1.deptno = t2.deptno or t2.deptno = 20)
 13  select t1.empno, t1.ename, t1.deptno, t2.dname
 14  	from emp t1
 15  	inner join dept t2
 16  	-- on (t1.empno = 7844 and t1.deptno = t2.deptno)
 17  	on (t1.empno = 7844 )
 18  -------------- why table access full
 19  select t1.ename, t1.deptno, t2.dname
 20      from emp t1
 21      inner join dept t2
 22      on t1.deptno = t2.deptno
 23  -- force using index
 24  select /*+ index(t2 pk_dept ) */ t1.ename, t1.deptno, t2.dname
 25      from emp t1
 26      inner join dept t2
 27      on t1.deptno = t2.deptno
 28  select t1.empno, t1.ename, t1.deptno, t2.dname
 29      from emp t1
 30      inner join dept t2
 31      on t1.deptno = t2.deptno
 32  select t1.empno, t1.ename, t1.deptno
 33      from emp t1
 34      inner join dept t2
 35      on t1.deptno = t2.deptno
 36  select t1.dname, t1.deptno, t2.ename
 37      from dept t1
 38      inner join emp t2
 39      on t1.deptno = t2.deptno
 40  select t1.empno, t1.ename, t1.deptno, t2.dname
 41      from emp t1
 42      inner join dept t2
 43      on ( t1.deptno = t2.deptno and t1.empno = 7900 )
 44  -- force using access full scan
 45* select deptno from dept
 46  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.ename, t1.deptno, t2.dname
  2      from emp t1
  3      inner join dept t2
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/

ENAME          DEPTNO DNAME                                                                                                                           
---------- ---------- --------------                                                                                                                  
CLARK              10 ACCOUNTING                                                                                                                      
KING               10 ACCOUNTING                                                                                                                      
MILLER             10 ACCOUNTING                                                                                                                      
SMITH              20 RESEARCH                                                                                                                        
JONES              20 RESEARCH                                                                                                                        
SCOTT              20 RESEARCH                                                                                                                        
ADAMS              20 RESEARCH                                                                                                                        
FORD               20 RESEARCH                                                                                                                        
ALLEN              30 SALES                                                                                                                           
WARD               30 SALES                                                                                                                           
MARTIN             30 SALES                                                                                                                           

ENAME          DEPTNO DNAME                                                                                                                           
---------- ---------- --------------                                                                                                                  
BLAKE              30 SALES                                                                                                                           
TURNER             30 SALES                                                                                                                           
JAMES              30 SALES                                                                                                                           

已选择14行。


执行计划
----------------------------------------------------------                                                                                            
Plan hash value: 4204424153                                                                                                                           
                                                                                                                                                      
------------------------------------------------                                                                                                      
| Id  | Operation                    | Name    |                                                                                                      
------------------------------------------------                                                                                                      
|   0 | SELECT STATEMENT             |         |                                                                                                      
|   1 |  NESTED LOOPS                |         |                                                                                                      
|   2 |   NESTED LOOPS               |         |                                                                                                      
|   3 |    TABLE ACCESS FULL         | DEPT    |                                                                                                      
|*  4 |    INDEX RANGE SCAN          | INX_DEP |                                                                                                      
|   5 |   TABLE ACCESS BY INDEX ROWID| EMP     |                                                                                                      
------------------------------------------------                                                                                                      
                                                                                                                                                      
Predicate Information (identified by operation id):                                                                                                   
---------------------------------------------------                                                                                                   
                                                                                                                                                      
   4 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                                                                            
                                                                                                                                                      
Note                                                                                                                                                  
-----                                                                                                                                                 
   - rule based optimizer used (consider using cbo)                                                                                                   


统计信息
----------------------------------------------------------                                                                                            
          0  recursive calls                                                                                                                          
          0  db block gets                                                                                                                            
         13  consistent gets                                                                                                                          
          0  physical reads                                                                                                                           
          0  redo size                                                                                                                                
        794  bytes sent via SQL*Net to client                                                                                                         
        415  bytes received via SQL*Net from client                                                                                                   
          2  SQL*Net roundtrips to/from client                                                                                                        
          0  sorts (memory)                                                                                                                           
          0  sorts (disk)                                                                                                                             
         14  rows processed                                                                                                                           

SCOTT@orcl >/

ENAME          DEPTNO DNAME                                                                                                                           
---------- ---------- --------------                                                                                                                  
CLARK              10 ACCOUNTING                                                                                                                      
KING               10 ACCOUNTING                                                                                                                      
MILLER             10 ACCOUNTING                                                                                                                      
SMITH              20 RESEARCH                                                                                                                        
SCOTT@orcl >select sql_id, child_number
  2  from v$sql
  3  where sql_text like 'dept%'
  4  /

未选定行


执行计划
----------------------------------------------------------                                                                                            
Plan hash value: 903671040                                                                                                                            
                                                                                                                                                      
--------------------------------------------------------------------------------------                                                                
| Id  | Operation        | Name              | Rows  | Bytes | Cost (%CPU)| Time     |                                                                
--------------------------------------------------------------------------------------                                                                
|   0 | SELECT STATEMENT |                   |     1 |   536 |     0   (0)| 00:00:01 |                                                                
|*  1 |  FIXED TABLE FULL| X$KGLCURSOR_CHILD |     1 |   536 |     0   (0)| 00:00:01 |                                                                
--------------------------------------------------------------------------------------                                                                
                                                                                                                                                      
Predicate Information (identified by operation id):                                                                                                   
---------------------------------------------------                                                                                                   
                                                                                                                                                      
   1 - filter("KGLNAOBJ" LIKE 'dept%' AND "INST_ID"=USERENV('INSTANCE'))                                                                              


统计信息
----------------------------------------------------------                                                                                            
        534  recursive calls                                                                                                                          
          0  db block gets                                                                                                                            
         90  consistent gets                                                                                                                          
          1  physical reads                                                                                                                           
          0  redo size                                                                                                                                
        353  bytes sent via SQL*Net to client                                                                                                         
        404  bytes received via SQL*Net from client                                                                                                   
          1  SQL*Net roundtrips to/from client                                                                                                        
         12  sorts (memory)                                                                                                                           
          0  sorts (disk)                                                                                                                             
          0  rows processed                                                                                                                           

SCOTT@orcl >
SCOTT@orcl >
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select sql_id, child_number
  2  from v$sql
  3* where sql_text like 'dept%'
SCOTT@orcl >get D:\git\db\sqlOptimize\index_scan_table_scan.sql
  1  select t1.empno, t1.ename, t1.deptno
  2  	from emp t1
  3  	inner join dept t2
  4  	on (t1.empno = 7844 )
  5  select t1.empno, t1.ename, t1.deptno, t2.dname
  6  	from emp t1
  7  	inner join dept t2
  8  	on (t1.empno = 7844 )
  9  select t1.empno, t1.ename, t2.dname
 10   	from emp t1
 11   	inner join dept t2
 12   	on ( t1.deptno = t2.deptno or t2.deptno = 20)
 13  select t1.empno, t1.ename, t1.deptno, t2.dname
 14  	from emp t1
 15  	inner join dept t2
 16  	-- on (t1.empno = 7844 and t1.deptno = t2.deptno)
 17  	on (t1.empno = 7844 )
 18  -------------- why table access full
 19  select t1.ename, t1.deptno, t2.dname
 20      from emp t1
 21      inner join dept t2
 22      on t1.deptno = t2.deptno
 23  -- force using index
 24  select /*+ index(t2 pk_dept ) */ t1.ename, t1.deptno, t2.dname
 25      from emp t1
 26      inner join dept t2
 27      on t1.deptno = t2.deptno
 28  select t1.empno, t1.ename, t1.deptno, t2.dname
 29      from emp t1
 30      inner join dept t2
 31      on t1.deptno = t2.deptno
 32  select t1.empno, t1.ename, t1.deptno
 33      from emp t1
 34      inner join dept t2
 35      on t1.deptno = t2.deptno
 36  select t1.dname, t1.deptno, t2.ename
 37      from dept t1
 38      inner join emp t2
 39      on t1.deptno = t2.deptno
 40  select t1.empno, t1.ename, t1.deptno, t2.dname
 41      from emp t1
 42      inner join dept t2
 43      on ( t1.deptno = t2.deptno and t1.empno = 7900 )
 44  -- force using access full scan
 45* select deptno from dept
 46  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.ename, t1.deptno, t2.dname
  2      from emp t1
  3      inner join dept t2
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/

ENAME          DEPTNO DNAME                                                                                                                           
---------- ---------- --------------                                                                                                                  
CLARK              10 ACCOUNTING                                                                                                                      
KING               10 ACCOUNTING                                                                                                                      
MILLER             10 ACCOUNTING                                                                                                                      
SMITH              20 RESEARCH                                                                                                                        
JONES              20 RESEARCH                                                                                                                        
SCOTT              20 RESEARCH                                                                                                                        
ADAMS              20 RESEARCH                                                                                                                        
FORD               20 RESEARCH                                                                                                                        
ALLEN              30 SALES                                                                                                                           
WARD               30 SALES                                                                                                                           
MARTIN             30 SALES                                                                                                                           

ENAME          DEPTNO DNAME                                                                                                                           
---------- ---------- --------------                                                                                                                  
BLAKE              30 SALES                                                                                                                           
TURNER             30 SALES                                                                                                                           
JAMES              30 SALES                                                                                                                           

已选择14行。


执行计划
----------------------------------------------------------                                                                                            
Plan hash value: 2528716167                                                                                                                           
                                                                                                                                                      
----------------------------------------------------------------------------------------                                                              
| Id  | Operation                    | Name    | Rows  | Bytes | Cost (%CPU)| Time     |                                                              
----------------------------------------------------------------------------------------                                                              
|   0 | SELECT STATEMENT             |         |    14 |   308 |     6  (17)| 00:00:01 |                                                              
|   1 |  MERGE JOIN                  |         |    14 |   308 |     6  (17)| 00:00:01 |                                                              
|   2 |   TABLE ACCESS BY INDEX ROWID| EMP     |    14 |   126 |     2   (0)| 00:00:01 |                                                              
|   3 |    INDEX FULL SCAN           | INX_DEP |    14 |       |     1   (0)| 00:00:01 |                                                              
|*  4 |   SORT JOIN                  |         |     4 |    52 |     4  (25)| 00:00:01 |                                                              
|   5 |    TABLE ACCESS FULL         | DEPT    |     4 |    52 |     3   (0)| 00:00:01 |                                                              
----------------------------------------------------------------------------------------                                                              
                                                                                                                                                      
Predicate Information (identified by operation id):                                                                                                   
---------------------------------------------------                                                                                                   
                                                                                                                                                      
   4 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                                                                            
       filter("T1"."DEPTNO"="T2"."DEPTNO")                                                                                                            


统计信息
----------------------------------------------------------                                                                                            
          0  recursive calls                                                                                                                          
          0  db block gets                                                                                                                            
         11  consistent gets                                                                                                                          
          0  physical reads                                                                                                                           
          0  redo size                                                                                                                                
        794  bytes sent via SQL*Net to client                                                                                                         
        415  bytes received via SQL*Net from client                                                                                                   
          2  SQL*Net roundtrips to/from client                                                                                                        
          1  sorts (memory)                                                                                                                           
          0  sorts (disk)                                                                                                                             
         14  rows processed                                                                                                                           

SCOTT@orcl >select sql_id, child_number
  2  from v$sql
  3  where sql_text like 'select t1.ename%';

SQL_ID        CHILD_NUMBER                                                                                                                            
------------- ------------                                                                                                                            
fpwtgggq295h2            0                                                                                                                            
fpwtgggq295h2            1                                                                                                                            


执行计划
----------------------------------------------------------                                                                                            
Plan hash value: 903671040                                                                                                                            
                                                                                                                                                      
--------------------------------------------------------------------------------------                                                                
| Id  | Operation        | Name              | Rows  | Bytes | Cost (%CPU)| Time     |                                                                
--------------------------------------------------------------------------------------                                                                
|   0 | SELECT STATEMENT |                   |     1 |   536 |     0   (0)| 00:00:01 |                                                                
|*  1 |  FIXED TABLE FULL| X$KGLCURSOR_CHILD |     1 |   536 |     0   (0)| 00:00:01 |                                                                
--------------------------------------------------------------------------------------                                                                
                                                                                                                                                      
Predicate Information (identified by operation id):                                                                                                   
---------------------------------------------------                                                                                                   
                                                                                                                                                      
   1 - filter("KGLNAOBJ" LIKE 'select t1.ename%' AND                                                                                                  
              "INST_ID"=USERENV('INSTANCE'))                                                                                                          


统计信息
----------------------------------------------------------                                                                                            
          8  recursive calls                                                                                                                          
          0  db block gets                                                                                                                            
          2  consistent gets                                                                                                                          
          0  physical reads                                                                                                                           
          0  redo size                                                                                                                                
        552  bytes sent via SQL*Net to client                                                                                                         
        415  bytes received via SQL*Net from client                                                                                                   
          2  SQL*Net roundtrips to/from client                                                                                                        
          0  sorts (memory)                                                                                                                           
          0  sorts (disk)                                                                                                                             
          2  rows processed                                                                                                                           

SCOTT@orcl >alter system flush shared_pool;

系统已更改。

SCOTT@orcl >alter system flush buffer_cache;

系统已更改。

SCOTT@orcl >get D:\git\db\sqlOptimize\index_scan_table_scan.sql
  1  select t1.empno, t1.ename, t1.deptno
  2  	from emp t1
  3  	inner join dept t2
  4  	on (t1.empno = 7844 )
  5  select t1.empno, t1.ename, t1.deptno, t2.dname
  6  	from emp t1
  7  	inner join dept t2
  8  	on (t1.empno = 7844 )
  9  select t1.empno, t1.ename, t2.dname
 10   	from emp t1
 11   	inner join dept t2
 12   	on ( t1.deptno = t2.deptno or t2.deptno = 20)
 13  select t1.empno, t1.ename, t1.deptno, t2.dname
 14  	from emp t1
 15  	inner join dept t2
 16  	-- on (t1.empno = 7844 and t1.deptno = t2.deptno)
 17  	on (t1.empno = 7844 )
 18  -------------- why table access full
 19  select t1.ename, t1.deptno, t2.dname
 20      from emp t1
 21      inner join dept t2
 22      on t1.deptno = t2.deptno
 23  -- force using index
 24  select /*+ index(t2 pk_dept ) */ t1.ename, t1.deptno, t2.dname
 25      from emp t1
 26      inner join dept t2
 27      on t1.deptno = t2.deptno
 28  select t1.empno, t1.ename, t1.deptno, t2.dname
 29      from emp t1
 30      inner join dept t2
 31      on t1.deptno = t2.deptno
 32  select t1.empno, t1.ename, t1.deptno
 33      from emp t1
 34      inner join dept t2
 35      on t1.deptno = t2.deptno
 36  select t1.dname, t1.deptno, t2.ename
 37      from dept t1
 38      inner join emp t2
 39      on t1.deptno = t2.deptno
 40  select t1.empno, t1.ename, t1.deptno, t2.dname
 41      from emp t1
 42      inner join dept t2
 43      on ( t1.deptno = t2.deptno and t1.empno = 7900 )
 44  -- force using access full scan
 45* select deptno from dept
 46  
SCOTT@orcl >ed
已写入 file afiedt.buf

  1  select t1.ename, t1.deptno, t2.dname
  2      from emp t1
  3      inner join dept t2
  4*     on t1.deptno = t2.deptno
SCOTT@orcl >/

ENAME          DEPTNO DNAME                                                                                                                           
---------- ---------- --------------                                                                                                                  
CLARK              10 ACCOUNTING                                                                                                                      
KING               10 ACCOUNTING                                                                                                                      
MILLER             10 ACCOUNTING                                                                                                                      
SMITH              20 RESEARCH                                                                                                                        
JONES              20 RESEARCH                                                                                                                        
SCOTT              20 RESEARCH                                                                                                                        
ADAMS              20 RESEARCH                                                                                                                        
FORD               20 RESEARCH                                                                                                                        
ALLEN              30 SALES                                                                                                                           
WARD               30 SALES                                                                                                                           
MARTIN             30 SALES                                                                                                                           

ENAME          DEPTNO DNAME                                                                                                                           
---------- ---------- --------------                                                                                                                  
BLAKE              30 SALES                                                                                                                           
TURNER             30 SALES                                                                                                                           
JAMES              30 SALES                                                                                                                           

已选择14行。


执行计划
----------------------------------------------------------                                                                                            
Plan hash value: 2528716167                                                                                                                           
                                                                                                                                                      
----------------------------------------------------------------------------------------                                                              
| Id  | Operation                    | Name    | Rows  | Bytes | Cost (%CPU)| Time     |                                                              
----------------------------------------------------------------------------------------                                                              
|   0 | SELECT STATEMENT             |         |    14 |   308 |     6  (17)| 00:00:01 |                                                              
|   1 |  MERGE JOIN                  |         |    14 |   308 |     6  (17)| 00:00:01 |                                                              
|   2 |   TABLE ACCESS BY INDEX ROWID| EMP     |    14 |   126 |     2   (0)| 00:00:01 |                                                              
|   3 |    INDEX FULL SCAN           | INX_DEP |    14 |       |     1   (0)| 00:00:01 |                                                              
|*  4 |   SORT JOIN                  |         |     4 |    52 |     4  (25)| 00:00:01 |                                                              
|   5 |    TABLE ACCESS FULL         | DEPT    |     4 |    52 |     3   (0)| 00:00:01 |                                                              
----------------------------------------------------------------------------------------                                                              
                                                                                                                                                      
Predicate Information (identified by operation id):                                                                                                   
---------------------------------------------------                                                                                                   
                                                                                                                                                      
   4 - access("T1"."DEPTNO"="T2"."DEPTNO")                                                                                                            
       filter("T1"."DEPTNO"="T2"."DEPTNO")                                                                                                            


统计信息
----------------------------------------------------------                                                                                            
        709  recursive calls                                                                                                                          
          0  db block gets                                                                                                                            
        146  consistent gets                                                                                                                          
         25  physical reads                                                                                                                           
          0  redo size                                                                                                                                
        794  bytes sent via SQL*Net to client                                                                                                         
        415  bytes received via SQL*Net from client                                                                                                   
          2  SQL*Net roundtrips to/from client                                                                                                        
         13  sorts (memory)                                                                                                                           
          0  sorts (disk)                                                                                                                             
         14  rows processed                                                                                                                           

SCOTT@orcl >
SCOTT@orcl >where sql_text like 'select t1.ename%';
SP2-0734: 未知的命令开头 "where sql_..." - 忽略了剩余的行。
SCOTT@orcl >select sql_id, child_number
  2  from v$sql
  3  where sql_text like 'select%'
  4  /

SQL_ID        CHILD_NUMBER                                                                                                                            
------------- ------------                                                                                                                            
b39dwjz0a404c            0                                                                                                                            
g6gu1n3x0h1h4            0                                                                                                                            
dpg36j03vn1p7            0                                                                                                                            
9g485acn2n30m            1                                                                                                                            
9azvz3dvrc3tp            0                                                                                                                            
4tcychgh5w4yu            0                                                                                                                            
f3w7spa78s55w            0                                                                                                                            
3k0c6241uw582            0                                                                                                                            
a1v7ay660h5vj            0                                                                                                                            
asvzxj61dc5vs            1                                                                                                                            
fsbqktj5vw6n9            0                                                                                                                            

SQL_ID        CHILD_NUMBER                                                                                                                            
------------- ------------                                                                                                                            
10t8dxp5w07fb            0                                                                                                                            
3rfhkbsgs085h            0                                                                                                                            
amavw48u8894a            0                                                                                                                            
5ax0q1md1w99p            0                                                                                                                            
45cngnmv709m4            0                                                                                                                            
45cngnmv709m4            1                                                                                                                            
aykvshm7zsabd            0                                                                                                                            
57guu81bd4bc5            0                                                                                                                            
85sxp7kypwbx6            0                                                                                                                            
dacm7fuqf4h4b            0                                                                                                                            
35hatv0pj8hw7            0                                                                                                                            

SQL_ID        CHILD_NUMBER                                                                                                                            
------------- ------------                                                                                                                            
56h11bx91nk74            0                                                                                                                            
fvkynu9xgck8h            0                                                                                                                            
2syvqzbxp4k9z            0                                                                                                                            
2syvqzbxp4k9z            1                                                                                                                            
crwtm662ycm4w            0                                                                                                                            
fxt2x4nu5nmcy            0                                                                                                                            
f91p5x1pzsmu1            1                                                                                                                            
c1y7jjsny0n6a            0                                                                                                                            
6z4zxpz8z4qfb            0                                                                                                                            
ccx938kq28qkh            0                                                                                                                            
6qz82dptj0qr7            1                                                                                                                            

SQL_ID        CHILD_NUMBER                                                                                                                            
------------- ------------                                                                                                                            
bjy4gf2k1wrk6            0                                                                                                                            
5rjh6ytb9ws5g            0                                                                                                                            
cvn54b7yz0s8u            0                                                                                                                            
cvn54b7yz0s8u            1                                                                                                                            
bp3zqtx8bnsjf            0                                                                                                                            
9gkq7rruycsjp            1                                                                                                                            
5yr7dz7rpht7n            0                                                                                                                            
52kfqq6q4ntj5            0                                                                                                                            
52kfqq6q4ntj5            1                                                                                                                            
f3g84j69n0tjh            1                                                                                                                            
8wxxddd1nswfw            0                                                                                                                            

SQL_ID        CHILD_NUMBER                                                                                                                            
------------- ------------                                                                                                                            
ftj9uawt4wwzb            0                                                                                                                            
772s25v1y0x8k            0                                                                                                                            
54h21tcvx8y2q            0                                                                                                                            
2xgubd6ayhyb1            1                                                                                                                            
07pcqtmt58zv9            0                                                                                                                            
frmuarw3st23v            0                                                                                                                            
gx4mv66pvj3xz            0                                                                                                                            
0shksdzxpp4bh            0                                                                                                                            
9grp4z4xh158b            0                                                                                                                            
fpwtgggq295h2            0                                                                                                                            
4zzxr8rvht74z            0                                                                                                                            

SQL_ID        CHILD_NUMBER                                                                                                                            
------------- ------------                                                                                                                            
8wutkrpf8j81q            1                                                                                                                            
5r4jv9ywsx8gh            0                                                                                                                            
1w8dyba53p8t7            0                                                                                                                            
83taa7kaw59c1            1                                                                                                                            
83taa7kaw59c1            2                                                                                                                            
g444v7spk9cyf            0                                                                                                                            
0xqn4sx1ytghr            0                                                                                                                            
83cq1aqjw5gmg            0                                                                                                                            
ab3kcpdz55hm3            0                                                                                                                            
5j4c2v06qdhqq            1                                                                                                                            
9zzuyxx4pjhsx            0                                                                                                                            

SQL_ID        CHILD_NUMBER                                                                                                                            
------------- ------------                                                                                                                            
g1cv0x7ht1jy8            0                                                                                                                            
36j47w2sf9kbn            0                                                                                                                            
cm5vu20fhtnq1            2                                                                                                                            
3nkd3g3ju5ph1            1                                                                                                                            
c6awqs517jpj0            0                                                                                                                            
c6awqs517jpj0            1                                                                                                                            
8r5sp8cjcpqan            0                                                                                                                            
fy1p4yk46pqfw            0                                                                                                                            
6c9wx6z8w9qpu            0                                                                                                                            
bkdusjx00dsmc            0                                                                                                                            
bkdusjx00dsmc            1                                                                                                                            

SQL_ID        CHILD_NUMBER                                                                                                                            
------------- ------------                                                                                                                            
2xyb5d6xg9srh            0                                                                                                                            
grzuvf0hjxt1f            0                                                                                                                            
cumjq42201t37            0                                                                                                                            
db78fxqxwxt7r            1                                                                                                                            
db78fxqxwxt7r            2                                                                                                                            
bgjhtnqhr5u9h            1                                                                                                                            
5yv7yvjgjxugg            0                                                                                                                            
2q93zsrvbdw48            0                                                                                                                            
d79wjgqnrpx11            0                                                                                                                            
1j1vyvn3cpzdx            0                                                                                                                            
dwssdqx28tzf5            0                                                                                                                            

SQL_ID        CHILD_NUMBER                                                                                                                            
------------- ------------                                                                                                                            
b9tc1s4xgu0h4            0                                                                                                                            
5a30ayk4c20tz            0                                                                                                                            
9p6bq1v54k13j            0                                                                                                                            
5ms6rbzdnq16t            0                                                                                                                            
9usdawmz4y1bh            0                                                                                                                            
axmdf8vq7k1rh            2                                                                                                                            
a9u0s3g93f47z            1                                                                                                                            
acq0xn8jjq592            0                                                                                                                            
13fz57d22f59f            0                                                                                                                            
f7b39pn4f2626            0                                                                                                                            
grwydz59pu6mc            1                                                                                                                            

SQL_ID        CHILD_NUMBER                                                                                                                            
------------- ------------                                                                                                                            
gcnf7vvsyq6w3            0                                                                                                                            
5s6yv4ynbu70y            0                                                                                                                            
0hmat0ydq6778            0                                                                                                                            
ga9j9xk5cy9s0            0                                                                                                                            
ga9j9xk5cy9s0            1                                                                                                                            
am4qbdr7da9wj            0                                                                                                                            
459f3z9u4fb3u            0                                                                                                                            
3ktacv9r56b51            0                                                                                                                            
3ktacv9r56b51            1                                                                                                                            
7tu2m5msbfb71            0                                                                                                                            
3nhfzxjzx2btx            0                                                                                                                            

SQL_ID        CHILD_NUMBER                                                                                                                            
------------- ------------                                                                                                                            
3zmw1wxrvfckx            0                                                                                                                            
0m78skf1mudnb            1                                                                                                                            
19z8my5daaf7j            0                                                                                                                            
b1wc53ddd6h3p            0                                                                                                                            
87gaftwrm2h68            1                                                                                                                            
3brgygbqhqjyn            0                                                                                                                            
gaq23nq4fqkmb            0                                                                                                                            
cuu0u9fp3ynqn            0                                                                                                                            
1fa6m97mnaq58            0                                                                                                                            
f4waraz252r5d            0                                                                                                                            
18ba533gpqrwd            0                                                                                                                            

SQL_ID        CHILD_NUMBER                                                                                                                            
------------- ------------                                                                                                                            
gbxny72fzqtc7            0                                                                                                                            
32bhha21dkv0v            1                                                                                                                            
53saa2zkr6wc3            0                                                                                                                            
70rgrbvwkqwp4            0                                                                                                                            
9rfqm06xmuwu0            1                                                                                                                            
7ng34ruy5awxq            1                                                                                                                            
7nuw4xwrnuwxq            1                                                                                                                            
8wn6tw88rux4j            0                                                                                                                            
5n1fs4m2n2y0r            1                                                                                                                            
3g7sxtj9d6zd3            2                                                                                                                            
795cpp7mvz0ff            0                                                                                                                            

SQL_ID        CHILD_NUMBER                                                                                                                            
------------- ------------                                                                                                                            
fr31mzzknv0wh            0                                                                                                                            
92m835hc5z1dr            0                                                                                                                            
djbm6495z71p3            0                                                                                                                            
6004acmhbg1w3            0                                                                                                                            
1sqnczby7b2dg            0                                                                                                                            
6aq34nj2zb2n7            0                                                                                                                            
6v0cyda83r2qf            0                                                                                                                            
f6xf2v1pw72ww            0                                                                                                                            
8swypbbr0m372            0                                                                                                                            
8swypbbr0m372            1                                                                                                                            
bd4bznqbq73hk            0                                                                                                                            

SQL_ID        CHILD_NUMBER                                                                                                                            
------------- ------------                                                                                                                            
cubcqrdcjb3mz            0                                                                                                                            
cubcqrdcjb3mz            1                                                                                                                            
0rnt8v06tb3sp            0                                                                                                                            
bsa0wjtftg3uw            0                                                                                                                            
54xu36wdjz49b            0                                                                                                                            
g7139b433z4tk            0                                                                                                                            
05sghzkq6r6yv            0                                                                                                                            
0kugqg48477gf            0                                                                                                                            
0ws7ahf1d78qa            0                                                                                                                            
1a8n1zgb7m90w            1                                                                                                                            
cuubcg9yjr94v            0                                                                                                                            

SQL_ID        CHILD_NUMBER                                                                                                                            
------------- ------------                                                                                                                            
2a0cs9ga2v972            0                                                                                                                            
1agbzmyp179a8            0                                                                                                                            
971vpk0tp7ahm            1                                                                                                                            
7hmzwy3kdmb90            0                                                                                                                            
39m4sx9k63ba2            0                                                                                                                            
39m4sx9k63ba2            1                                                                                                                            
cb21bacyh3c7d            0                                                                                                                            
8pqfk1p147dg9            0                                                                                                                            
1gu8t96d0bdmu            1                                                                                                                            
32hbap2vtmf53            1                                                                                                                            
5ur69atw3vfhj            1                                                                                                                            

SQL_ID        CHILD_NUMBER                                                                                                                            
------------- ------------                                                                                                                            
0k8522rmdzg4k            1                                                                                                                            
d869jqjjjrgxr            0                                                                                                                            
656rwmhbk7h4w            0                                                                                                                            
g3wrkmxkxzhf2            1                                                                                                                            
96g93hntrzjtr            1                                                                                                                            
SCOTT@orcl >@D:\git\db\bookCBO\ch_00_preface\in_list.sql
SP2-0310: 无法打开文件 "setenv.sql"

表已删除。


PL/SQL 过程已成功完成。


表已创建。


PL/SQL 过程已成功完成。

SCOTT@orcl >desc emp
 名称                                                  是否为空? 类型
 ----------------------------------------------------- -------- ------------------------------------
 EMPNO                                                 NOT NULL NUMBER(4)
 ENAME                                                          VARCHAR2(10)
 JOB                                                            VARCHAR2(9)
 MGR                                                            NUMBER(4)
 HIREDATE                                                       DATE
 SAL                                                            NUMBER(7,2)
 COMM                                                           NUMBER(7,2)
 DEPTNO                                                         NUMBER(2)

SCOTT@orcl >desc dept
 名称                                                  是否为空? 类型
 ----------------------------------------------------- -------- ------------------------------------
 DEPTNO                                                NOT NULL NUMBER(2)
 DNAME                                                          VARCHAR2(14)
 LOC                                                            VARCHAR2(13)

SCOTT@orcl >@D:\git\db\bookCBO\ch_01_cost\first_rows.sql
SP2-0310: 无法打开文件 "setenv.sql"

表已删除。


PL/SQL 过程已成功完成。


表已创建。


表已更改。


索引已创建。


PL/SQL 过程已成功完成。


会话已更改。

